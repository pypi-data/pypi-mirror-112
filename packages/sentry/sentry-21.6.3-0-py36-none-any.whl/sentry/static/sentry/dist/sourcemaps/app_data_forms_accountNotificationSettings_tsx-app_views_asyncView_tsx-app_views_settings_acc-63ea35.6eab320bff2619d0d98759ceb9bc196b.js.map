{"version":3,"sources":["webpack:///./app/data/forms/accountNotificationSettings.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/account/notifications/constants.tsx","webpack:///./app/views/settings/account/notifications/feedbackAlert.tsx","webpack:///./app/views/settings/account/notifications/fields2.tsx","webpack:///./app/views/settings/account/notifications/parentLabel.tsx","webpack:///./app/views/settings/account/notifications/utils.tsx","webpack:///./app/views/settings/components/forms/formPanel.tsx","webpack:///./app/views/settings/components/forms/jsonForm.tsx","webpack:///../node_modules/core-js/internals/date-to-primitive.js","webpack:///../node_modules/core-js/modules/es.date.to-primitive.js","webpack:///../node_modules/core-js/modules/es.symbol.to-primitive.js"],"names":["route","fields","subscribeByDefault","name","type","label","t","help","workflowNotifications","choices","weeklyReports","disabled","deployNotifications","personalActivityNotifications","selfAssignOnResolve","title","AsyncView","this","getTitle","renderComponent","AsyncComponent","ALL_PROVIDERS","email","slack","VALUE_MAPPING","default","never","always","subscribe_only","committed_only","MIN_PROJECTS_FOR_SEARCH","MIN_PROJECTS_FOR_PAGINATION","NOTIFICATION_SETTINGS_TYPES","SELF_NOTIFICATION_SETTINGS_TYPES","FeedbackAlert","StyledAlert","icon","tct","href","Alert","NOTIFICATION_SETTING_FIELDS","alerts","deploy","provider","workflow","reports","ParentLabel","props","notificationType","parent","FieldLabel","getParentKey","slug","React","space","isGroupedByProject","includes","groupByOrganization","projects","reduce","acc","project","orgSlug","organization","hasOwnProperty","push","getFallBackValue","providerListToString","providers","sort","join","getChoiceString","key","found","find","row","Error","backfillMissingProvidersWithFallback","data","providerList","fallbackValue","scopeType","fallback","Object","values","previousValue","currentValue","fromEntries","keys","map","mergeNotificationSettings","output","objects","settingsByType","entries","settingsByScopeType","settingsByScopeId","scopeId","settingsByProvider","set","getUserDefaultValues","notificationSettings","user","pop","value","getCurrentProviders","userData","filter","getCurrentDefault","providersList","length","decideDefault","compare","a","b","parentIndependentSetting","parentSpecificSetting","flatMap","isEverythingDisabled","getParentIds","getParentValues","parentId","getParentData","parents","id","getStateToPutForProvider","changedData","split","scopeTypeData","scopeIdData","me","getStateToPutForDefault","parentIds","newValue","updatedNotificationSettings","getStateToPutForParent","getParentField","onChange","defaultFields","assign","getData","concat","defaultValue","undefined","FormPanel","access","additionalFieldProps","renderFooter","renderHeader","otherProps","sanitizeQuerySelector","field","fieldWithoutDefaultValue","disabledReason","highlighted","JsonForm","location","hash","scrollToHash","nextProps","setState","toHash","scrollToElement","decodeURIComponent","align","offset","err","Sentry","fieldsWithVisibleProp","defined","visible","every","formPanelProps","shouldDisplayForm","forms","features","state","formGroup","i","renderForm","withRouter","anObject","toPrimitive","module","exports","hint","TypeError","createNonEnumerableProperty","dateToPrimitive","TO_PRIMITIVE","wellKnownSymbol","DatePrototype","Date","prototype","defineWellKnownSymbol"],"mappings":"uTAIaA,EAAQ,mCAERC,EAAiC,CAC5CC,mBAAoB,CAClBC,KAAM,qBACNC,KAAM,UACNC,OAAOC,OAAE,kBAETC,MAAMD,OACJ,8IAGJE,sBAAuB,CACrBL,KAAM,wBACNC,KAAM,QACNC,OAAOC,OAAE,kCACTG,QAAS,CACP,CAAC,GAAGH,OAAE,WACN,CAAC,GAAGA,OAAE,kCACN,CAAC,GAAGA,OAAE,WAERC,MAAMD,OAAE,uEAEVI,cAAe,CAEbP,KAAM,gBACNC,KAAM,UACNC,OAAOC,OAAE,0BACTC,MAAMD,OAAE,0EACRK,UAAU,GAEZC,oBAAqB,CACnBT,KAAM,sBACNC,KAAM,QACNC,OAAOC,OAAE,gCACTG,QAAS,CACP,CAAC,GAAGH,OAAE,WACN,CAAC,GAAGA,OAAE,oCACN,CAAC,GAAGA,OAAE,WAERC,MAAMD,OAAE,qEAEVO,8BAA+B,CAC7BV,KAAM,gCACNC,KAAM,UACNC,OAAOC,OAAE,mCACTC,MAAMD,OAAE,2EAEVQ,oBAAqB,CACnBX,KAAM,sBACNC,KAAM,UACNC,OAAOC,OAAE,yCACTC,MAAMD,OAAE,4EAoCZ,QAhCqC,CACnC,CACES,OAAOT,OAAE,UACTL,OAAQ,CAACA,EAAOC,qBAGlB,CACEa,OAAOT,OAAE,0BACTL,OAAQ,CAACA,EAAOO,wBAGlB,CACEO,OAAOT,OAAE,iBACTL,OAAQ,IAGV,CACEc,OAAOT,OAAE,kBACTL,OAAQ,IAGV,CACEc,OAAOT,OAAE,wBACTL,OAAQ,CAACA,EAAOW,sBAGlB,CACEG,OAAOT,OAAE,eACTL,OAAQ,CAACA,EAAOY,8BAA+BZ,EAAOa,wB,8sBChFrCE,E,0iBAInB,WACE,MAAO,K,oBAGT,WACE,IAAMD,EAAQE,KAAKC,WACnB,OACE,QAAC,IAAD,CAAeH,MAAK,UAAKA,EAAQ,GAAH,OAAMA,EAAN,OAAmB,GAA7B,UAApB,SACGE,KAAKE,wB,GATJC,KAHWJ,E,0KCRd,IAAMK,EAAgB,CAC3BC,MAAO,UACPC,MAAO,SAIIC,EAAgB,CAC3BC,QAAS,EACTC,MAAO,GACPC,OAAQ,GACRC,eAAgB,GAChBC,eAAgB,IAGLC,EAA0B,EAC1BC,EAA8B,IAO9BC,EAA8B,CACzC,SACA,SACA,WACA,UACA,SAGWC,EAAmC,CAC9C,gCACA,wB,sXC1BIC,EAAgB,kBACpB,QAACC,EAAD,CAAa/B,KAAK,OAAOgC,MAAM,QAAC,KAAD,IAA/B,UACGC,QAAI,4DAA6D,CAChEf,OAAO,aAAGgB,KAAK,6CAHfJ,E,4BAQN,IAAMC,GAAc,OAAOI,IAAP,qBAAH,2CAIjB,W,6HCNaC,EAAwE,CACnFC,OAAQ,CACNtC,KAAM,SACNC,KAAM,SACNC,OAAOC,OAAE,6BACTG,QAAS,CACP,CAAC,UAAUH,OAAE,OACb,CAAC,SAASA,OAAE,SAEdC,MAAMD,OAAE,mEAEVoC,OAAQ,CACNvC,KAAM,SACNC,KAAM,SACNC,OAAOC,OAAE,wBACTG,QAAS,CACP,CAAC,UAAUH,OAAE,OACb,CAAC,kBAAkBA,OAAE,0BACrB,CAAC,SAASA,OAAE,SAEdC,MAAMD,OAAE,gDAEVqC,SAAU,CACRxC,KAAM,WACNC,KAAM,SACNC,OAAOC,OAAE,mBACTG,QAAS,CACP,CAAC,SAASH,OAAE,kBACZ,CAAC,SAASA,OAAE,kBACZ,CAAC,eAAeA,OAAE,8BAGtBsC,SAAU,CACRzC,KAAM,WACNC,KAAM,SACNC,OAAOC,OAAE,0BACTG,QAAS,CACP,CAAC,UAAUH,OAAE,OACb,CAAC,kBAAkBA,OAAE,2BACrB,CAAC,SAASA,OAAE,SAEdC,MAAMD,OAAE,kEAEVuC,QAAS,CACP1C,KAAM,iBACNC,KAAM,QACNC,OAAOC,OAAE,kBACTC,MAAMD,OAAE,oDAEVgB,MAAO,CACLnB,KAAM,gBACNC,KAAM,QACNC,OAAOC,OAAE,iBACTC,MAAMD,OAAE,yEAEVO,8BAA+B,CAC7BV,KAAM,gCACNC,KAAM,UACNC,OAAOC,OAAE,mCACTC,MAAMD,OAAE,2EAEVQ,oBAAqB,CACnBX,KAAM,sBACNC,KAAM,UACNC,OAAOC,OAAE,yCACTC,MAAMD,OAAE,6E,20GC/DNwC,E,0nBACK,WACP,MAAmC,EAAKC,MAAjCC,EAAP,EAAOA,iBAAkBC,EAAzB,EAAyBA,OAEzB,OACE,QAACC,EAAD,YACE,QAAC,IAAD,gBAEKC,EAAaH,GAAoBC,MAGtC,yBAAOA,EAAOG,a,YAXIC,aAiBpBH,GAAa,OAAO,MAAP,sBAAH,qBAEPI,OAAM,IAFC,sBAMhB,UCtBO,IAAMC,EAAqB,SAACP,GAAD,MAChC,CAAC,SAAU,QAAS,YAAYQ,SAASR,IAE9BG,EAAe,SAACH,GAC3B,OAAOO,EAAmBP,GAAoB,UAAY,gBAG/CS,EAAsB,SACjCC,GAEA,OAAOA,EAASC,QAEd,SAACC,EAAKC,GACN,IAAMC,EAAUD,EAAQE,aAAaX,KASrC,OARIQ,EAAII,eAAeF,GACrBF,EAAIE,GAASJ,SAASO,KAAKJ,GAE3BD,EAAIE,GAAW,CACbC,aAAcF,EAAQE,aACtBL,SAAU,CAACG,IAGRD,IACN,KAGQM,EAAmB,SAAClB,GAC/B,OAAQA,GACN,IAAK,SACH,MAAO,SACT,IAAK,SACH,MAAO,iBACT,IAAK,WACH,MAAO,iBACT,QACE,MAAO,KAIAmB,EAAuB,SAACC,GACnC,OAAOA,EAAUC,OAAOC,KAAK,MAGlBC,EAAkB,SAAC9D,EAAqB+D,GACnD,IAAK/D,EACH,MAAO,UAET,IAAMgE,EAAQhE,EAAQiE,MAAK,SAAAC,GAAG,OAAIA,EAAI,KAAOH,KAC7C,IAAKC,EACH,MAAM,IAAIG,MAAJ,yBAA4BJ,IAGpC,OAAOC,EAAM,IAGFI,EAAuC,SAClDC,EACAC,EACAC,EACAC,GAWA,IAAMC,EAAWC,OAAOC,OAAON,GAAMnB,QACnC,SAAC0B,EAAeC,GAAhB,MACmB,UAAjBA,EAA2BD,EAAgBC,IAC7CN,GAGF,OAAOG,OAAOI,YACZJ,OAAOK,KAAKnE,MAAeoE,KAAI,SAAA9C,GAAQ,MAAI,CACzCA,EACAoC,EAAavB,SAASb,GAClBuC,EACc,SAAdD,EACA,QACA,gBAKGS,EAA4B,WAER,IAE/B,IAAMC,EAAS,GAFgB,mBAD5BC,EAC4B,yBAD5BA,EAC4B,gBAa/B,OAVAA,EAAQH,KAAI,SAAAI,GAAc,OACxBV,OAAOW,QAAQD,GAAgBJ,KAAI,+BAAErF,EAAF,KAAQ2F,EAAR,YACjCZ,OAAOW,QAAQC,GAAqBN,KAAI,+BAAER,EAAF,KAAae,EAAb,YACtCb,OAAOW,QAAQE,GAAmBP,KAAI,YAAmC,mBAAjCQ,EAAiC,KAAxBC,EAAwB,KACvEC,IAAIR,EAAQ,CAACvF,EAAM6E,EAAWgB,GAAS3B,KAAK,KAAM4B,eAMnDP,GAGIS,EAAuB,SAClCpD,EACAqD,GACyC,MAMzC,OACElB,OAAOC,QAAO,UAAAiB,EAAqBrD,UAArB,eAAwCsD,OAAQ,IAAIC,OAClEpB,OAAOI,YACLJ,OAAOW,QAAQzE,MAAeoE,KAAI,+BAAE9C,EAAF,KAAY6D,EAAZ,WAAuB,CACvD7D,EACU,YAAV6D,EAAsBtC,EAAiBlB,GAAoBwD,QAMtDC,EAAsB,SACjCzD,EACAqD,GAGA,IAAMK,EAAWN,EAAqBpD,EAAkBqD,GAExD,OAAOlB,OAAOW,QAAQY,GACnBC,QAAO,+BAAKH,GAAL,kBAAiB,CAAC,SAAShD,SAASgD,MAC3Cf,KAAI,+BAAE9C,EAAF,iBAAmBA,MAGfiE,EAAoB,SAC/B5D,EACAqD,GAIA,IAAMQ,EAAgBJ,EAAoBzD,EAAkBqD,GAC5D,OAAOQ,EAAcC,OACjBV,EAAqBpD,EAAkBqD,GAAsBQ,EAAc,IAC3E,SAGOE,EAAgB,SAC3B/D,EACAqD,GACW,MAOLW,EAAU,SAACC,EAAWC,GAAZ,OAAkC1F,KAAcyF,GAAKzF,KAAc0F,IAE7EC,EACJhC,OAAOC,OAAOgB,EAAqBpD,EAAkBqD,IAClDhC,KAAK2C,GACLT,OAAS,QAEd,GAAiC,UAA7BY,EACF,OAAOA,EAGT,IAAMC,EACJjC,OAAOC,QACL,UAAAiB,EAAqBrD,UAArB,eAAyCG,EAAaH,MAAsB,IAE3EqE,SAAQ,SAAAnB,GAAkB,OAAIf,OAAOC,OAAOc,MAC5C7B,KAAK2C,GACLT,OAAS,UAEd,MAAiC,YAA1Ba,EAAsC,QAAUA,GAG5CE,EAAuB,SAClCtE,EACAqD,GAQA,MAAO,CAAC,QAAS,WAAW7C,SAC1BuD,EAAc/D,EAAkBqD,KAIvBkB,EAAe,SAC1BvE,EACAqD,GACa,MAMb,OAAOlB,OAAOK,MACZ,UAAAa,EAAqBrD,UAArB,eAAyCG,EAAaH,MAAsB,KAInEwE,EAAkB,SAC7BxE,EACAqD,EACAoB,GACyC,QACzC,OACE,UAAApB,EAAqBrD,UAArB,mBAAyCG,EAAaH,WAAtD,eACEyE,KACG,CACHnG,MAAO,YAKAoG,EAAgB,SAC3B1E,EACAqD,EACAsB,GAGA,IAAMhF,EAAW8D,EAAoBzD,EAAkBqD,GAAsB,GAE7E,OAAOlB,OAAOI,YACZoC,EAAQlC,KAAI,SAAAxC,GAAM,MAAI,CACpBA,EAAO2E,GACPJ,EAAgBxE,EAAkBqD,EAAsBpD,EAAO2E,IAAIjF,SAK5DkF,EAA2B,SACtC7E,EACAqD,EACAyB,GAMA,IAAM/C,EAAyB+C,EAAYnF,SAASoF,MAAM,KACpD/C,EAAgBd,EAAiBlB,GAmCvC,OAhCImC,OAAOK,KAAKa,GAAsBS,QACN,UAC3B9D,EAAmBmC,OAAOI,YACzBJ,OAAOW,QAAQO,EAAqBrD,IAAmByC,KACrD,+BAAER,EAAF,KAAa+C,EAAb,WAAgC,CAC9B/C,EACAE,OAAOI,YACLJ,OAAOW,QAAQkC,GAAevC,KAAI,+BAAEQ,EAAF,KAAWgC,EAAX,WAA4B,CAC5DhC,EACApB,EACEoD,EACAlD,EACAC,EACAC,eAUgB,UAC3BjC,EAAmB,CAClBsD,KAAM,CACJ4B,GAAI/C,OAAOI,YAAYR,EAAaU,KAAI,SAAA9C,GAAQ,MAAI,CAACA,EAAUqC,WAS5DmD,EAA0B,SACrCnF,EACAqD,EACAyB,EACAM,GASA,IAAMC,EAAWlD,OAAOC,OAAO0C,GAAa,GACxC/C,EAAe0B,EAAoBzD,EAAkBqD,GACpDtB,EAAa+B,SAChB/B,EAAe,CAAC,UAGlB,IAAMuD,GAA8B,UACjCtF,EAAmB,CAClBsD,KAAM,CACJ4B,GAAI/C,OAAOI,YAAYR,EAAaU,KAAI,SAAA9C,GAAQ,MAAI,CAACA,EAAU0F,UAerE,MAViB,UAAbA,IACFC,EAA4BtF,GAAkBG,EAAaH,IACzDmC,OAAOI,YACL6C,EAAU3C,KAAI,SAAAgC,GAAQ,MAAI,CACxBA,EACAtC,OAAOI,YAAYR,EAAaU,KAAI,SAAA9C,GAAQ,MAAI,CAACA,EAAU,qBAK5D2F,GAGIC,EAAyB,SACpCvF,EACAqD,EACAyB,EACAL,GAIA,IAAM1C,EAAe0B,EAAoBzD,EAAkBqD,GACrDgC,EAAWlD,OAAOC,OAAO0C,GAAa,GAE5C,iBACG9E,GADH,UAEKG,EAAaH,IAFlB,UAGOyE,EAAWtC,OAAOI,YACjBR,EAAaU,KAAI,SAAA9C,GAAQ,MAAI,CAACA,EAAU0F,WAOrCG,EAAiB,SAC5BxF,EACAqD,EACApD,EACAwF,GAIgB,MAGVC,EAAgBlG,IAA4BQ,GAElD,OAAOmC,OAAOwD,OAAO,GAAID,EAAe,CACtCrI,OAAO,QAAC,EAAD,CAAa4C,OAAQA,EAAQD,iBAAkBA,IACtD4F,QAAS,SAAA9D,GAAI,OAAI2D,EAAS3D,EAAM7B,EAAO2E,KACvCzH,KAAM8C,EAAO2E,GACbnH,QAAO,UAAEiI,EAAcjI,eAAhB,aAAE,EAAuBoI,OAAO,CACrC,CACE,UADF,WAEKvI,OAAE,WAFP,aAEsBiE,EAClBmE,EAAcjI,QACdmG,EAAkB5D,EAAkBqD,IAJxC,QAQFyC,aAAc,UACdvI,UAAMwI,M,gxECzVWC,E,wiBAKnB,WAAS,WACP,EASI/H,KAAK8B,MARPhC,EADF,EACEA,MACAd,EAFF,EAEEA,OACAgJ,EAHF,EAGEA,OACAtI,EAJF,EAIEA,SACAuI,EALF,EAKEA,qBACAC,EANF,EAMEA,aACAC,EAPF,EAOEA,aACGC,GARL,YAWA,OACE,QAAC,KAAD,CAAOzB,GAAqB,iBAAV7G,GAAqBuI,OAAsBvI,QAASgI,EAAtE,UACGhI,IAAS,QAAC,KAAD,UAAcA,KACxB,QAAC,IAAD,WAC2B,mBAAjBqI,GAA+BA,EAAa,CAACrI,QAAOd,WAE3DA,EAAOwF,KAAI,SAAA8D,GACV,GAAqB,mBAAVA,EACT,OAAOA,IAG8CA,EAAhDT,aAAP,IAA2BU,GAA3B,OAAuDD,EAAvD,GASA,OALiB,IAAb5I,IACF6I,EAAyB7I,UAAW,EACpC6I,EAAyBC,oBAAiBV,IAI1C,QAAC,IAAD,OACEE,OAAQA,EACRtI,SAAUA,GAEN0I,GACAH,GALN,IAMEK,MAAOC,EACPE,YAAa,EAAK3G,MAAM2G,cAAX,WAA+BH,EAAMpJ,QAJ7CoJ,EAAMpJ,SAQQ,mBAAjBgJ,GAA+BA,EAAa,CAACpI,QAAOd,qB,GAjD/BoD,aAAlB2F,E,gCAAAA,E,eACiB,CAClCE,qBAAsB,M,6jFCfpBS,E,0nBACW,CAEbD,YAAW,UAAE,EAAK3G,MAAM6G,gBAAb,aAAE,EAAqBC,O,kDAGpC,WACE5I,KAAK6I,iB,8CAGP,SAAiCC,GAC/B,GAAI9I,KAAK8B,MAAM6G,SAASC,OAASE,EAAUH,SAASC,KAAM,CACxD,IAAMA,EAAOE,EAAUH,SAASC,KAChC5I,KAAK6I,aAAaD,GAClB5I,KAAK+I,SAAS,CAACN,YAAaG,O,0BAIhC,SAAaI,GAAuB,MAE5BJ,EAAOI,IAAM,UAAIhJ,KAAK8B,MAAM6G,gBAAf,aAAI,EAAqBC,MAE5C,GAAKA,EAOL,IACEK,KAAgBZ,OAAsBa,mBAAmBN,IAAQ,CAC/DO,MAAO,SACPC,QAAS,MAEX,MAAOC,GACPC,KAAwBD,M,+BAI5B,SAAkBrK,GAChB,IAAMuK,EAAwBvK,EAAO0G,QACnC,SAAA4C,GAAK,MAAqB,mBAAVA,IAAwBkB,QAAQlB,aAAD,EAACA,EAAOmB,YAGzD,GAAIzK,EAAO6G,SAAW0D,EAAsB1D,OAAQ,CAClD,MAAyC7F,KAAK8B,MAAvCmG,EAAP,EAAOA,qBAAyBnG,GAAhC,YASA,OAP2ByH,EAAsBG,OAAM,SAAApB,GACrD,MAA6B,mBAAlBA,EAAMmB,SACPnB,EAAMmB,QAAN,OAAkB3H,GAAUmG,KAE9BK,EAAMmB,WAMlB,OAAO,I,wBAGT,YAiBG,IAhBDzK,EAgBC,EAhBDA,OACA2K,EAeC,EAfDA,eACA7J,EAcC,EAdDA,MAiBA,OAF0BE,KAAK4J,kBAAkB5K,IAI9C2K,WAAgBzB,cAChByB,WAAgBxB,cAKZ,QAAC,IAAD,GAAWrI,MAAOA,EAAOd,OAAQA,GAAY2K,IAH3C,O,oBAMX,WAAS,WACP,EAYI3J,KAAK8B,MAXPkG,EADF,EACEA,OACAhJ,EAFF,EAEEA,OACAc,EAHF,EAGEA,MACA+J,EAJF,EAIEA,MACAnK,EALF,EAKEA,SACAoK,EANF,EAMEA,SACA7B,EAPF,EAOEA,qBACAC,EARF,EAQEA,aACAC,EATF,EASEA,aAEGC,GAXL,EAUEO,UAVF,aAcMgB,EAAiB,CACrB3B,SACAtI,WACAoK,WACA7B,uBACAC,eACAC,eACAM,YAAazI,KAAK+J,MAAMtB,aAG1B,OACE,qBAASL,GAAT,mBACoB,IAAVyB,GACNA,EAAMrF,KAAI,SAACwF,EAAWC,GAAZ,OACR,QAAC,WAAD,UACG,EAAKC,WAAL,GAAiBP,kBAAmBK,KADlBC,WAIP,IAAVJ,QACY,IAAX7K,GACPgB,KAAKkK,WAAW,CAAClL,SAAQ2K,iBAAgB7J,kB,GA9H5BsC,aAAjBsG,E,uBAoIN,SAAeyB,gBAAWzB,I,gFCtK1B,IAAI0B,EAAW,EAAQ,kDACnBC,EAAc,EAAQ,qDAI1BC,EAAOC,QAAU,SAAUC,GACzB,GAAa,WAATA,GAA8B,WAATA,GAA8B,YAATA,EAC5C,MAAMC,UAAU,kBAChB,OAAOJ,EAAYD,EAASpK,MAAgB,WAATwK,K,oECTvC,IAAIE,EAA8B,EAAQ,uEACtCC,EAAkB,EAAQ,0DAG1BC,EAFkB,EAAQ,yDAEXC,CAAgB,eAC/BC,EAAgBC,KAAKC,UAInBJ,KAAgBE,GACpBJ,EAA4BI,EAAeF,EAAcD,I,sECV/B,EAAQ,gEAIpCM,CAAsB","file":"chunks/app_data_forms_accountNotificationSettings_tsx-app_views_asyncView_tsx-app_views_settings_acc-63ea35.xxxxxxxxxxxxxxxxxxxx.js","sourcesContent":["import {t} from 'app/locale';\nimport {Field, JsonFormObject} from 'app/views/settings/components/forms/type';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/account/notifications/';\n\nexport const fields: {[key: string]: Field} = {\n  subscribeByDefault: {\n    name: 'subscribeByDefault',\n    type: 'boolean',\n    label: t('Send Me Alerts'),\n    // TODO(billy): Make this a real link\n    help: t(\n      'Enable this to receive notifications for Alerts sent to your teams. You will always receive alerts configured to be sent directly to you.'\n    ),\n  },\n  workflowNotifications: {\n    name: 'workflowNotifications',\n    type: 'radio',\n    label: t('Send Me Workflow Notifications'),\n    choices: [\n      [0, t('Always')],\n      [1, t('Only On Issues I Subscribe To')],\n      [2, t('Never')],\n    ],\n    help: t('E.g. changes in issue assignment, resolution status, and comments.'),\n  },\n  weeklyReports: {\n    // Form is not visible because currently not implemented\n    name: 'weeklyReports',\n    type: 'boolean',\n    label: t('Send Me Weekly Reports'),\n    help: t(\"Reports contain a summary of what's happened within your organization.\"),\n    disabled: true,\n  },\n  deployNotifications: {\n    name: 'deployNotifications',\n    type: 'radio',\n    label: t('Send Me Deploy Notifications'),\n    choices: [\n      [2, t('Always')],\n      [3, t('Only On Deploys With My Commits')],\n      [4, t('Never')],\n    ],\n    help: t('Deploy emails include release, environment and commit overviews.'),\n  },\n  personalActivityNotifications: {\n    name: 'personalActivityNotifications',\n    type: 'boolean',\n    label: t('Notify Me About My Own Activity'),\n    help: t('Enable this to receive notifications about your own actions on Sentry.'),\n  },\n  selfAssignOnResolve: {\n    name: 'selfAssignOnResolve',\n    type: 'boolean',\n    label: t(\"Claim Unassigned Issues I've Resolved\"),\n    help: t(\"You'll receive notifications about any changes that happen afterwards.\"),\n  },\n};\n\nconst formGroups: JsonFormObject[] = [\n  {\n    title: t('Alerts'),\n    fields: [fields.subscribeByDefault],\n  },\n\n  {\n    title: t('Workflow Notifications'),\n    fields: [fields.workflowNotifications],\n  },\n\n  {\n    title: t('Email Routing'),\n    fields: [],\n  },\n\n  {\n    title: t('Weekly Reports'),\n    fields: [],\n  },\n\n  {\n    title: t('Deploy Notifications'),\n    fields: [fields.deployNotifications],\n  },\n\n  {\n    title: t('My Activity'),\n    fields: [fields.personalActivityNotifications, fields.selfAssignOnResolve],\n  },\n];\n\nexport default formGroups;\n","import * as React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent() as React.ReactChild}\n      </DocumentTitle>\n    );\n  }\n}\n","export const ALL_PROVIDERS = {\n  email: 'default',\n  slack: 'never',\n};\n\n/** These values are stolen from the DB. */\nexport const VALUE_MAPPING = {\n  default: 0,\n  never: 10,\n  always: 20,\n  subscribe_only: 30,\n  committed_only: 40,\n};\n\nexport const MIN_PROJECTS_FOR_SEARCH = 3;\nexport const MIN_PROJECTS_FOR_PAGINATION = 100;\n\nexport type NotificationSettingsByProviderObject = {[key: string]: string};\nexport type NotificationSettingsObject = {\n  [key: string]: {[key: string]: {[key: string]: NotificationSettingsByProviderObject}};\n};\n\nexport const NOTIFICATION_SETTINGS_TYPES = [\n  'alerts',\n  'deploy',\n  'workflow',\n  'reports',\n  'email',\n];\n\nexport const SELF_NOTIFICATION_SETTINGS_TYPES = [\n  'personalActivityNotifications',\n  'selfAssignOnResolve',\n];\n","import styled from '@emotion/styled';\n\nimport Alert from 'app/components/alert';\nimport {IconInfo} from 'app/icons';\nimport {tct} from 'app/locale';\n\nconst FeedbackAlert = () => (\n  <StyledAlert type=\"info\" icon={<IconInfo />}>\n    {tct('Got feedback? Email [email:ecosystem-feedback@sentry.io].', {\n      email: <a href=\"mailto:ecosystem-feedback@sentry.io\" />,\n    })}\n  </StyledAlert>\n);\n\nconst StyledAlert = styled(Alert)`\n  margin: 20px 0px;\n`;\n\nexport default FeedbackAlert;\n","import {t} from 'app/locale';\n\nexport type NotificationSettingField = {\n  name: string;\n  type: 'select' | 'blank' | 'boolean';\n  label: string;\n  choices?: string[][];\n  defaultValue?: string;\n  defaultFieldName?: string;\n  help?: string;\n};\n\nexport const NOTIFICATION_SETTING_FIELDS: Record<string, NotificationSettingField> = {\n  alerts: {\n    name: 'alerts',\n    type: 'select',\n    label: t('Issue Alert Notifications'),\n    choices: [\n      ['always', t('On')],\n      ['never', t('Off')],\n    ],\n    help: t('Enable this to receive notifications sent from project alerts.'),\n  },\n  deploy: {\n    name: 'deploy',\n    type: 'select',\n    label: t('Deploy Notifications'),\n    choices: [\n      ['always', t('On')],\n      ['committed_only', t('Only Committed Issues')],\n      ['never', t('Off')],\n    ],\n    help: t('Release, environment, and commit overviews.'),\n  },\n  provider: {\n    name: 'provider',\n    type: 'select',\n    label: t('Delivery Method'),\n    choices: [\n      ['email', t('Send to Email')],\n      ['slack', t('Send to Slack')],\n      ['email+slack', t('Send to Email and Slack')],\n    ],\n  },\n  workflow: {\n    name: 'workflow',\n    type: 'select',\n    label: t('Workflow Notifications'),\n    choices: [\n      ['always', t('On')],\n      ['subscribe_only', t('Only Subscribed Issues')],\n      ['never', t('Off')],\n    ],\n    help: t('Changes in issue assignment, resolution status, and comments.'),\n  },\n  reports: {\n    name: 'weekly reports',\n    type: 'blank',\n    label: t('Weekly Reports'),\n    help: t('A summary of the past week for an organization.'),\n  },\n  email: {\n    name: 'email routing',\n    type: 'blank',\n    label: t('Email Routing'),\n    help: t('Select which email address should receive notifications per project.'),\n  },\n  personalActivityNotifications: {\n    name: 'personalActivityNotifications',\n    type: 'boolean',\n    label: t('Notify Me About My Own Activity'),\n    help: t('Enable this to receive notifications about your own actions on Sentry.'),\n  },\n  selfAssignOnResolve: {\n    name: 'selfAssignOnResolve',\n    type: 'boolean',\n    label: t(\"Claim Unassigned Issues I've Resolved\"),\n    help: t(\"You'll receive notifications about any changes that happen afterwards.\"),\n  },\n};\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport Avatar from 'app/components/avatar';\nimport space from 'app/styles/space';\nimport {OrganizationSummary, Project} from 'app/types';\nimport {getParentKey} from 'app/views/settings/account/notifications/utils';\n\ntype Props = {\n  notificationType: string;\n  parent: OrganizationSummary | Project;\n};\n\n/** TODO(mgaeta): Infer parentKey from parent. */\nclass ParentLabel extends React.Component<Props> {\n  render = () => {\n    const {notificationType, parent} = this.props;\n\n    return (\n      <FieldLabel>\n        <Avatar\n          {...{\n            [getParentKey(notificationType)]: parent,\n          }}\n        />\n        <span>{parent.slug}</span>\n      </FieldLabel>\n    );\n  };\n}\n\nconst FieldLabel = styled('div')`\n  display: flex;\n  gap: ${space(0.5)};\n  line-height: 16px;\n`;\n\nexport default ParentLabel;\n","import set from 'lodash/set';\n\nimport {t} from 'app/locale';\nimport {OrganizationSummary, Project} from 'app/types';\nimport {\n  ALL_PROVIDERS,\n  NotificationSettingsByProviderObject,\n  NotificationSettingsObject,\n  VALUE_MAPPING,\n} from 'app/views/settings/account/notifications/constants';\nimport {NOTIFICATION_SETTING_FIELDS} from 'app/views/settings/account/notifications/fields2';\nimport ParentLabel from 'app/views/settings/account/notifications/parentLabel';\nimport {FieldObject} from 'app/views/settings/components/forms/type';\n\n// Which fine-tuning parts are grouped by project\nexport const isGroupedByProject = (notificationType: string): boolean =>\n  ['alerts', 'email', 'workflow'].includes(notificationType);\n\nexport const getParentKey = (notificationType: string): string => {\n  return isGroupedByProject(notificationType) ? 'project' : 'organization';\n};\n\nexport const groupByOrganization = (\n  projects: Project[]\n): Record<string, {organization: OrganizationSummary; projects: Project[]}> => {\n  return projects.reduce<\n    Record<string, {organization: OrganizationSummary; projects: Project[]}>\n  >((acc, project) => {\n    const orgSlug = project.organization.slug;\n    if (acc.hasOwnProperty(orgSlug)) {\n      acc[orgSlug].projects.push(project);\n    } else {\n      acc[orgSlug] = {\n        organization: project.organization,\n        projects: [project],\n      };\n    }\n    return acc;\n  }, {});\n};\n\nexport const getFallBackValue = (notificationType: string): string => {\n  switch (notificationType) {\n    case 'alerts':\n      return 'always';\n    case 'deploy':\n      return 'committed_only';\n    case 'workflow':\n      return 'subscribe_only';\n    default:\n      return '';\n  }\n};\n\nexport const providerListToString = (providers: string[]): string => {\n  return providers.sort().join('+');\n};\n\nexport const getChoiceString = (choices: string[][], key: string): string => {\n  if (!choices) {\n    return 'default';\n  }\n  const found = choices.find(row => row[0] === key);\n  if (!found) {\n    throw new Error(`Could not find ${key}`);\n  }\n\n  return found[1];\n};\n\nexport const backfillMissingProvidersWithFallback = (\n  data: {[key: string]: string},\n  providerList: string[],\n  fallbackValue: string,\n  scopeType: string\n): NotificationSettingsByProviderObject => {\n  /**\n   * Transform `data`, a mapping of providers to values, so that all providers\n   * in `providerList` are \"on\" in the resulting object. The \"on\" value is\n   * determined by checking `data` for non-\"never\" values and falling back to\n   * the value `fallbackValue`. The \"off\" value is either \"default\" or \"never\"\n   * depending on whether `scopeType` is \"parent\" or \"user\" respectively.\n   */\n\n  // First pass: determine the fallback value.\n  const fallback = Object.values(data).reduce(\n    (previousValue, currentValue) =>\n      currentValue === 'never' ? previousValue : currentValue,\n    fallbackValue\n  );\n  // Second pass: fill in values for every provider.\n  return Object.fromEntries(\n    Object.keys(ALL_PROVIDERS).map(provider => [\n      provider,\n      providerList.includes(provider)\n        ? fallback\n        : scopeType === 'user'\n        ? 'never'\n        : 'default',\n    ])\n  );\n};\n\nexport const mergeNotificationSettings = (\n  ...objects: NotificationSettingsObject[]\n): NotificationSettingsObject => {\n  /** Deeply merge N notification settings objects (usually just 2). */\n  const output = {};\n  objects.map(settingsByType =>\n    Object.entries(settingsByType).map(([type, settingsByScopeType]) =>\n      Object.entries(settingsByScopeType).map(([scopeType, settingsByScopeId]) =>\n        Object.entries(settingsByScopeId).map(([scopeId, settingsByProvider]) => {\n          set(output, [type, scopeType, scopeId].join('.'), settingsByProvider);\n        })\n      )\n    )\n  );\n\n  return output;\n};\n\nexport const getUserDefaultValues = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): NotificationSettingsByProviderObject => {\n  /**\n   * Get the mapping of providers to values that describe a user's parent-\n   * independent notification preferences. The data from the API uses the user\n   * ID rather than \"me\" so we assume the first ID is the user's.\n   */\n  return (\n    Object.values(notificationSettings[notificationType]?.user || {}).pop() ||\n    Object.fromEntries(\n      Object.entries(ALL_PROVIDERS).map(([provider, value]) => [\n        provider,\n        value === 'default' ? getFallBackValue(notificationType) : value,\n      ])\n    )\n  );\n};\n\nexport const getCurrentProviders = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): string[] => {\n  /** Get the list of providers currently active on this page. Note: this can be empty. */\n  const userData = getUserDefaultValues(notificationType, notificationSettings);\n\n  return Object.entries(userData)\n    .filter(([_, value]) => !['never'].includes(value))\n    .map(([provider, _]) => provider);\n};\n\nexport const getCurrentDefault = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): string => {\n  /** Calculate the currently selected provider. */\n\n  const providersList = getCurrentProviders(notificationType, notificationSettings);\n  return providersList.length\n    ? getUserDefaultValues(notificationType, notificationSettings)[providersList[0]]\n    : 'never';\n};\n\nexport const decideDefault = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): string => {\n  /**\n   * For a given notificationType, are the parent-independent setting \"never\"\n   * for all providers and are the parent-specific settings \"default\" or\n   * \"never\". If so, the API is telling us that the user has opted out of\n   * all notifications.\n   */\n  const compare = (a: string, b: string): number => VALUE_MAPPING[a] - VALUE_MAPPING[b];\n\n  const parentIndependentSetting =\n    Object.values(getUserDefaultValues(notificationType, notificationSettings))\n      .sort(compare)\n      .pop() || 'never';\n\n  if (parentIndependentSetting !== 'never') {\n    return parentIndependentSetting;\n  }\n\n  const parentSpecificSetting =\n    Object.values(\n      notificationSettings[notificationType]?.[getParentKey(notificationType)] || {}\n    )\n      .flatMap(settingsByProvider => Object.values(settingsByProvider))\n      .sort(compare)\n      .pop() || 'default';\n\n  return parentSpecificSetting === 'default' ? 'never' : parentSpecificSetting;\n};\n\nexport const isEverythingDisabled = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): boolean => {\n  /**\n   * For a given notificationType, are the parent-independent setting \"never\"\n   * for all providers and are the parent-specific settings \"default\" or\n   * \"never\"? If so, the API is telling us that the user has opted out of\n   * all notifications.\n   */\n  return ['never', 'default'].includes(\n    decideDefault(notificationType, notificationSettings)\n  );\n};\n\nexport const getParentIds = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject\n): string[] => {\n  /**\n   * Extract either the list of project or organization IDs from the\n   * notification settings in state. This assumes that the notification settings\n   * object is fully backfilled with settings for every parent.\n   */\n  return Object.keys(\n    notificationSettings[notificationType]?.[getParentKey(notificationType)] || {}\n  );\n};\n\nexport const getParentValues = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  parentId: string\n): NotificationSettingsByProviderObject => {\n  return (\n    notificationSettings[notificationType]?.[getParentKey(notificationType)]?.[\n      parentId\n    ] || {\n      email: 'default',\n    }\n  );\n};\n\nexport const getParentData = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  parents: OrganizationSummary[] | Project[]\n): NotificationSettingsByProviderObject => {\n  /** Get a mapping of all parent IDs to the notification setting for the current providers. */\n  const provider = getCurrentProviders(notificationType, notificationSettings)[0];\n\n  return Object.fromEntries(\n    parents.map(parent => [\n      parent.id,\n      getParentValues(notificationType, notificationSettings, parent.id)[provider],\n    ])\n  );\n};\n\nexport const getStateToPutForProvider = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  changedData: NotificationSettingsByProviderObject\n): NotificationSettingsObject => {\n  /**\n   * I don't need to update the provider for EVERY once of the user's projects\n   * and organizations, just the user and parents that have explicit settings.\n   */\n  const providerList: string[] = changedData.provider.split('+');\n  const fallbackValue = getFallBackValue(notificationType);\n\n  let updatedNotificationSettings;\n  if (Object.keys(notificationSettings).length) {\n    updatedNotificationSettings = {\n      [notificationType]: Object.fromEntries(\n        Object.entries(notificationSettings[notificationType]).map(\n          ([scopeType, scopeTypeData]) => [\n            scopeType,\n            Object.fromEntries(\n              Object.entries(scopeTypeData).map(([scopeId, scopeIdData]) => [\n                scopeId,\n                backfillMissingProvidersWithFallback(\n                  scopeIdData,\n                  providerList,\n                  fallbackValue,\n                  scopeType\n                ),\n              ])\n            ),\n          ]\n        )\n      ),\n    };\n  } else {\n    // If the user has no settings, we need to create them.\n    updatedNotificationSettings = {\n      [notificationType]: {\n        user: {\n          me: Object.fromEntries(providerList.map(provider => [provider, fallbackValue])),\n        },\n      },\n    };\n  }\n\n  return updatedNotificationSettings;\n};\n\nexport const getStateToPutForDefault = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  changedData: NotificationSettingsByProviderObject,\n  parentIds: string[]\n): NotificationSettingsObject => {\n  /**\n   * Update the current providers' parent-independent notification settings\n   * with the new value. If the new value is \"never\", then also update all\n   * parent-specific notification settings to \"default\". If the previous value\n   * was \"never\", then assume providerList should be \"email\" only.\n   */\n\n  const newValue = Object.values(changedData)[0];\n  let providerList = getCurrentProviders(notificationType, notificationSettings);\n  if (!providerList.length) {\n    providerList = ['email'];\n  }\n\n  const updatedNotificationSettings = {\n    [notificationType]: {\n      user: {\n        me: Object.fromEntries(providerList.map(provider => [provider, newValue])),\n      },\n    },\n  };\n\n  if (newValue === 'never') {\n    updatedNotificationSettings[notificationType][getParentKey(notificationType)] =\n      Object.fromEntries(\n        parentIds.map(parentId => [\n          parentId,\n          Object.fromEntries(providerList.map(provider => [provider, 'default'])),\n        ])\n      );\n  }\n\n  return updatedNotificationSettings;\n};\n\nexport const getStateToPutForParent = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  changedData: NotificationSettingsByProviderObject,\n  parentId: string\n): NotificationSettingsObject => {\n  /** Get the diff of the Notification Settings for this parent ID. */\n\n  const providerList = getCurrentProviders(notificationType, notificationSettings);\n  const newValue = Object.values(changedData)[0];\n\n  return {\n    [notificationType]: {\n      [getParentKey(notificationType)]: {\n        [parentId]: Object.fromEntries(\n          providerList.map(provider => [provider, newValue])\n        ),\n      },\n    },\n  };\n};\n\nexport const getParentField = (\n  notificationType: string,\n  notificationSettings: NotificationSettingsObject,\n  parent: OrganizationSummary | Project,\n  onChange: (\n    changedData: NotificationSettingsByProviderObject,\n    parentId: string\n  ) => NotificationSettingsObject\n): FieldObject => {\n  /** Render each parent and add a default option to the the field choices. */\n\n  const defaultFields = NOTIFICATION_SETTING_FIELDS[notificationType];\n\n  return Object.assign({}, defaultFields, {\n    label: <ParentLabel parent={parent} notificationType={notificationType} />,\n    getData: data => onChange(data, parent.id),\n    name: parent.id,\n    choices: defaultFields.choices?.concat([\n      [\n        'default',\n        `${t('Default')} (${getChoiceString(\n          defaultFields.choices,\n          getCurrentDefault(notificationType, notificationSettings)\n        )})`,\n      ],\n    ]),\n    defaultValue: 'default',\n    help: undefined,\n  }) as any;\n};\n","import * as React from 'react';\n\nimport {Panel, PanelBody, PanelHeader} from 'app/components/panels';\nimport {Scope} from 'app/types';\nimport {sanitizeQuerySelector} from 'app/utils/sanitizeQuerySelector';\nimport FieldFromConfig from 'app/views/settings/components/forms/fieldFromConfig';\n\nimport {FieldObject, JsonFormObject} from './type';\n\ntype DefaultProps = {\n  additionalFieldProps: {[key: string]: any};\n};\n\ntype Props = DefaultProps & {\n  /**\n   * Panel title\n   */\n  title?: React.ReactNode;\n\n  /**\n   * List of fields to render\n   */\n  fields: FieldObject[];\n\n  access?: Set<Scope>;\n  features?: Record<string, any>;\n\n  /**\n   * The name of the field that should be highlighted\n   */\n  highlighted?: string;\n\n  /**\n   * Renders inside of PanelBody at the start\n   */\n  renderHeader?: (arg: JsonFormObject) => React.ReactNode;\n\n  /**\n   * Renders inside of PanelBody before PanelBody close\n   */\n  renderFooter?: (arg: JsonFormObject) => React.ReactNode;\n\n  /**\n   * Disables the entire form\n   */\n  disabled?: boolean;\n};\n\nexport default class FormPanel extends React.Component<Props> {\n  static defaultProps: DefaultProps = {\n    additionalFieldProps: {},\n  };\n\n  render() {\n    const {\n      title,\n      fields,\n      access,\n      disabled,\n      additionalFieldProps,\n      renderFooter,\n      renderHeader,\n      ...otherProps\n    } = this.props;\n\n    return (\n      <Panel id={typeof title === 'string' ? sanitizeQuerySelector(title) : undefined}>\n        {title && <PanelHeader>{title}</PanelHeader>}\n        <PanelBody>\n          {typeof renderHeader === 'function' && renderHeader({title, fields})}\n\n          {fields.map(field => {\n            if (typeof field === 'function') {\n              return field();\n            }\n\n            const {defaultValue: _, ...fieldWithoutDefaultValue} = field;\n\n            // Allow the form panel disabled prop to override the fields\n            // disabled prop, with fallback to the fields disabled state.\n            if (disabled === true) {\n              fieldWithoutDefaultValue.disabled = true;\n              fieldWithoutDefaultValue.disabledReason = undefined;\n            }\n\n            return (\n              <FieldFromConfig\n                access={access}\n                disabled={disabled}\n                key={field.name}\n                {...otherProps}\n                {...additionalFieldProps}\n                field={fieldWithoutDefaultValue}\n                highlighted={this.props.highlighted === `#${field.name}`}\n              />\n            );\n          })}\n          {typeof renderFooter === 'function' && renderFooter({title, fields})}\n        </PanelBody>\n      </Panel>\n    );\n  }\n}\n","import * as React from 'react';\nimport {withRouter, WithRouterProps} from 'react-router';\nimport * as Sentry from '@sentry/react';\nimport scrollToElement from 'scroll-to-element';\n\nimport {defined} from 'app/utils';\nimport {sanitizeQuerySelector} from 'app/utils/sanitizeQuerySelector';\n\nimport FormPanel from './formPanel';\nimport {Field, FieldObject, JsonFormObject} from './type';\n\ntype Props = {\n  /**\n   * Fields that are grouped by \"section\"\n   */\n  forms?: JsonFormObject[];\n\n  /**\n   * If `forms` is not defined, `title` + `fields` must be required.\n   * Allows more fine grain control of title/fields\n   */\n  fields?: FieldObject[];\n\n  additionalFieldProps?: {[key: string]: any};\n} & WithRouterProps &\n  Omit<\n    React.ComponentProps<typeof FormPanel>,\n    'highlighted' | 'fields' | 'additionalFieldProps'\n  >;\n\ntype State = {\n  // Field name that should be highlighted\n  highlighted?: string;\n};\n\nclass JsonForm extends React.Component<Props, State> {\n  state: State = {\n    // location.hash is optional because of tests.\n    highlighted: this.props.location?.hash,\n  };\n\n  componentDidMount() {\n    this.scrollToHash();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.location.hash !== nextProps.location.hash) {\n      const hash = nextProps.location.hash;\n      this.scrollToHash(hash);\n      this.setState({highlighted: hash});\n    }\n  }\n\n  scrollToHash(toHash?: string): void {\n    // location.hash is optional because of tests.\n    const hash = toHash || this.props.location?.hash;\n\n    if (!hash) {\n      return;\n    }\n\n    // Push onto callback queue so it runs after the DOM is updated,\n    // this is required when navigating from a different page so that\n    // the element is rendered on the page before trying to getElementById.\n    try {\n      scrollToElement(sanitizeQuerySelector(decodeURIComponent(hash)), {\n        align: 'middle',\n        offset: -100,\n      });\n    } catch (err) {\n      Sentry.captureException(err);\n    }\n  }\n\n  shouldDisplayForm(fields: FieldObject[]) {\n    const fieldsWithVisibleProp = fields.filter(\n      field => typeof field !== 'function' && defined(field?.visible)\n    ) as Array<Omit<Field, 'visible'> & Required<Pick<Field, 'visible'>>>;\n\n    if (fields.length === fieldsWithVisibleProp.length) {\n      const {additionalFieldProps, ...props} = this.props;\n\n      const areAllFieldsHidden = fieldsWithVisibleProp.every(field => {\n        if (typeof field.visible === 'function') {\n          return !field.visible({...props, ...additionalFieldProps});\n        }\n        return !field.visible;\n      });\n\n      return !areAllFieldsHidden;\n    }\n\n    return true;\n  }\n\n  renderForm({\n    fields,\n    formPanelProps,\n    title,\n  }: {\n    fields: FieldObject[];\n    formPanelProps: Pick<\n      Props,\n      | 'access'\n      | 'disabled'\n      | 'features'\n      | 'additionalFieldProps'\n      | 'renderFooter'\n      | 'renderHeader'\n    > &\n      Pick<State, 'highlighted'>;\n    title?: React.ReactNode;\n  }) {\n    const shouldDisplayForm = this.shouldDisplayForm(fields);\n\n    if (\n      !shouldDisplayForm &&\n      !formPanelProps?.renderFooter &&\n      !formPanelProps?.renderHeader\n    ) {\n      return null;\n    }\n\n    return <FormPanel title={title} fields={fields} {...formPanelProps} />;\n  }\n\n  render() {\n    const {\n      access,\n      fields,\n      title,\n      forms,\n      disabled,\n      features,\n      additionalFieldProps,\n      renderFooter,\n      renderHeader,\n      location: _location,\n      ...otherProps\n    } = this.props;\n\n    const formPanelProps = {\n      access,\n      disabled,\n      features,\n      additionalFieldProps,\n      renderFooter,\n      renderHeader,\n      highlighted: this.state.highlighted,\n    };\n\n    return (\n      <div {...otherProps}>\n        {typeof forms !== 'undefined' &&\n          forms.map((formGroup, i) => (\n            <React.Fragment key={i}>\n              {this.renderForm({formPanelProps, ...formGroup})}\n            </React.Fragment>\n          ))}\n        {typeof forms === 'undefined' &&\n          typeof fields !== 'undefined' &&\n          this.renderForm({fields, formPanelProps, title})}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(JsonForm);\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\n// `Date.prototype[@@toPrimitive](hint)` method implementation\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nmodule.exports = function (hint) {\n  if (hint !== 'string' && hint !== 'number' && hint !== 'default') {\n    throw TypeError('Incorrect hint');\n  } return toPrimitive(anObject(this), hint !== 'number');\n};\n","var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar dateToPrimitive = require('../internals/date-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar DatePrototype = Date.prototype;\n\n// `Date.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nif (!(TO_PRIMITIVE in DatePrototype)) {\n  createNonEnumerableProperty(DatePrototype, TO_PRIMITIVE, dateToPrimitive);\n}\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.toPrimitive` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.toprimitive\ndefineWellKnownSymbol('toPrimitive');\n"],"sourceRoot":""}