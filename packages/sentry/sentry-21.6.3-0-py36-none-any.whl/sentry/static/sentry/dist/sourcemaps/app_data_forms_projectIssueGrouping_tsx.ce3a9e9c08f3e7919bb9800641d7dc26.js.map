{"version":3,"sources":["webpack:///./app/data/forms/projectIssueGrouping.tsx"],"names":["route","groupingConfigField","name","type","label","t","saveOnBlur","saveMessageAlertType","saveMessage","selectionInfoFunction","args","groupingConfigs","value","selection","find","id","changelog","Changelog","ChangelogTitle","tct","version","dangerouslySetInnerHTML","__html","marked","choices","map","hidden","toString","isHidden","help","visible","features","has","fields","fingerprintingRules","hideLabel","placeholder","multiline","monospace","autosize","inline","maxRows","formatMessageValue","Fragment","RuleDescription","pattern","docs","href","RuleExample","groupingEnhancements","validate","groupingConfig","secondaryGroupingConfig","secondaryGroupingExpiry","space","p","theme","innerBorder","backgroundSecondary","fontSizeMedium","borderRadius"],"mappings":"2kEAWO,IAAMA,EAAQ,uDAEfC,EAA6B,CACjCC,KAAM,iBACNC,KAAM,SACNC,OAAOC,OAAE,mBACTC,YAAY,EACZC,qBAAsB,OACtBC,aAAaH,OACX,wFAEFI,sBAAuB,SAAAC,GACrB,IAAOC,EAA0BD,EAA1BC,gBAAiBC,EAASF,EAATE,MAClBC,EAAYF,EAAgBG,MAAK,qBAAEC,KAAeH,KAClDI,GAAYH,aAAA,EAAAA,EAAWG,YAAa,GAC1C,OAAKA,GAIH,QAACC,EAAD,YACE,QAACC,EAAD,YACGC,QAAI,2BAA4B,CAACC,QAASP,EAAUE,KADvD,QAGA,eAAKM,wBAAyB,CAACC,QAAQC,OAAOP,SAPzC,MAWXQ,QAAS,qBAAEb,gBACOc,KAAI,gBAAEV,EAAF,EAAEA,GAAIW,EAAN,EAAMA,OAAN,MAAkB,CACpCX,EAAGY,YACH,QAAC,IAAD,CAA6BC,SAAUF,EAAvC,SACGX,GADsBA,QAI7Bc,MAAMxB,OAAE,0DACRyB,QAAS,qBAAEC,SAAuBC,IAAI,yBAG3BC,EAAgC,CAC3CC,oBAAqB,CACnBhC,KAAM,sBACNC,KAAM,SACNC,OAAOC,OAAE,qBACT8B,WAAW,EACXC,aAAa/B,OACX,wGAEFgC,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,QAAQ,EACRC,QAAS,GACTnC,YAAY,EACZC,qBAAsB,OACtBC,aAAaH,OACX,0FAEFqC,oBAAoB,EACpBb,KAAM,kBACJ,QAAC,EAAAc,SAAD,YACE,QAACC,EAAD,WACGzB,QAAI,8LAGH,CACE0B,SAAS,iEACTC,MACE,QAAC,IAAD,CAAcC,KAAK,mGAK3B,QAACC,EAAD,iPAQJlB,SAAS,GAEXmB,qBAAsB,CACpB/C,KAAM,uBACNC,KAAM,SACNC,OAAOC,OAAE,qBACT8B,WAAW,EACXC,aAAa/B,OACX,+EAEFgC,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,QAAQ,EACRC,QAAS,GACTnC,YAAY,EACZC,qBAAsB,OACtBC,aAAaH,OACX,0FAEFqC,oBAAoB,EACpBb,KAAM,kBACJ,QAAC,EAAAc,SAAD,YACE,QAACC,EAAD,WACGzB,QAAI,kLAGH,CACE0B,SAAS,wDACTC,MACE,QAAC,IAAD,CAAcC,KAAK,mGAK3B,QAACC,EAAD,oMAQJE,SAAU,iBAAM,IAChBpB,SAAS,GAEXqB,eAAgBlD,EAChBmD,wBAAyB,EAAF,KAClBnD,GADkB,IAErBC,KAAM,0BACNE,OAAOC,OAAE,sCACTwB,MAAMxB,OACJ,sJAGJgD,wBAAyB,CACvBnD,KAAM,0BACNC,KAAM,SACNC,OAAOC,OAAE,yCACTwB,MAAMxB,OACJ,+GAKAuC,GAAkB,OAAO,MAAP,qBAAH,kBACFU,OAAM,GADJ,iBAEJA,OAAM,GAFF,uBAMfN,GAAc,OAAO,MAAP,qBAAH,kBACEM,OAAM,GADR,uBAKXrC,GAAY,OAAO,MAAP,qBAAH,0DAIFqC,OAAM,GAJJ,6BAKc,SAAAC,GAAC,OAAIA,EAAEC,MAAMC,cAL3B,gBAMC,SAAAF,GAAC,OAAIA,EAAEC,MAAME,sBANd,eAOA,SAAAH,GAAC,OAAIA,EAAEC,MAAMG,iBAPb,qDAWkB,SAAAJ,GAAC,OAAIA,EAAEC,MAAMI,eAX/B,gCAYmB,SAAAL,GAAC,OAAIA,EAAEC,MAAMI,eAZhC,MAgBT1C,GAAiB,OAAO,KAAP,qBAAH,cACL,SAAAqC,GAAC,OAAIA,EAAEC,MAAMG,iBADR,mBAEDL,OAAM,KAFL","file":"chunks/app_data_forms_projectIssueGrouping_tsx.xxxxxxxxxxxxxxxxxxxx.js","sourcesContent":["import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport {GroupingConfigItem} from 'app/components/events/groupingInfo';\nimport ExternalLink from 'app/components/links/externalLink';\nimport {t, tct} from 'app/locale';\nimport space from 'app/styles/space';\nimport marked from 'app/utils/marked';\nimport {Field} from 'app/views/settings/components/forms/type';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/projects/:projectId/issue-grouping/';\n\nconst groupingConfigField: Field = {\n  name: 'groupingConfig',\n  type: 'select',\n  label: t('Grouping Config'),\n  saveOnBlur: false,\n  saveMessageAlertType: 'info',\n  saveMessage: t(\n    'Changing grouping config will apply to future events only (can take up to a minute).'\n  ),\n  selectionInfoFunction: args => {\n    const {groupingConfigs, value} = args;\n    const selection = groupingConfigs.find(({id}) => id === value);\n    const changelog = selection?.changelog || '';\n    if (!changelog) {\n      return null;\n    }\n    return (\n      <Changelog>\n        <ChangelogTitle>\n          {tct('New in version [version]', {version: selection.id})}:\n        </ChangelogTitle>\n        <div dangerouslySetInnerHTML={{__html: marked(changelog)}} />\n      </Changelog>\n    );\n  },\n  choices: ({groupingConfigs}) =>\n    groupingConfigs.map(({id, hidden}) => [\n      id.toString(),\n      <GroupingConfigItem key={id} isHidden={hidden}>\n        {id}\n      </GroupingConfigItem>,\n    ]),\n  help: t('Sets the grouping algorithm to be used for new events.'),\n  visible: ({features}) => features.has('set-grouping-config'),\n};\n\nexport const fields: Record<string, Field> = {\n  fingerprintingRules: {\n    name: 'fingerprintingRules',\n    type: 'string',\n    label: t('Fingerprint Rules'),\n    hideLabel: true,\n    placeholder: t(\n      'error.type:MyException -> fingerprint-value\\nstack.function:some_panic_function -> fingerprint-value'\n    ),\n    multiline: true,\n    monospace: true,\n    autosize: true,\n    inline: false,\n    maxRows: 20,\n    saveOnBlur: false,\n    saveMessageAlertType: 'info',\n    saveMessage: t(\n      'Changing fingerprint rules will apply to future events only (can take up to a minute).'\n    ),\n    formatMessageValue: false,\n    help: () => (\n      <Fragment>\n        <RuleDescription>\n          {tct(\n            `This can be used to modify the fingerprint rules on the server with custom rules.\n        Rules follow the pattern [pattern]. To learn more about fingerprint rules, [docs:read the docs].`,\n            {\n              pattern: <code>matcher:glob -&gt; fingerprint, values</code>,\n              docs: (\n                <ExternalLink href=\"https://docs.sentry.io/product/data-management-settings/event-grouping/fingerprint-rules/\" />\n              ),\n            }\n          )}\n        </RuleDescription>\n        <RuleExample>\n          {`# force all errors of the same type to have the same fingerprint\nerror.type:DatabaseUnavailable -> system-down\n# force all memory allocation errors to be grouped together\nstack.function:malloc -> memory-allocation-error`}\n        </RuleExample>\n      </Fragment>\n    ),\n    visible: true,\n  },\n  groupingEnhancements: {\n    name: 'groupingEnhancements',\n    type: 'string',\n    label: t('Stack Trace Rules'),\n    hideLabel: true,\n    placeholder: t(\n      'stack.function:raise_an_exception ^-group\\nstack.function:namespace::* +app'\n    ),\n    multiline: true,\n    monospace: true,\n    autosize: true,\n    inline: false,\n    maxRows: 20,\n    saveOnBlur: false,\n    saveMessageAlertType: 'info',\n    saveMessage: t(\n      'Changing stack trace rules will apply to future events only (can take up to a minute).'\n    ),\n    formatMessageValue: false,\n    help: () => (\n      <Fragment>\n        <RuleDescription>\n          {tct(\n            `This can be used to enhance the grouping algorithm with custom rules.\n        Rules follow the pattern [pattern]. To learn more about stack trace rules, [docs:read the docs].`,\n            {\n              pattern: <code>matcher:glob [^v]?[+-]flag</code>,\n              docs: (\n                <ExternalLink href=\"https://docs.sentry.io/product/data-management-settings/event-grouping/stack-trace-rules/\" />\n              ),\n            }\n          )}\n        </RuleDescription>\n        <RuleExample>\n          {`# remove all frames above a certain function from grouping\nstack.function:panic_handler ^-group\n# mark all functions following a prefix in-app\nstack.function:mylibrary_* +app`}\n        </RuleExample>\n      </Fragment>\n    ),\n    validate: () => [],\n    visible: true,\n  },\n  groupingConfig: groupingConfigField,\n  secondaryGroupingConfig: {\n    ...groupingConfigField,\n    name: 'secondaryGroupingConfig',\n    label: t('Fallback/Secondary Grouping Config'),\n    help: t(\n      'Sets the secondary grouping algorithm that should be run in addition to avoid creating too many new groups. Controlled by expiration date below.'\n    ),\n  },\n  secondaryGroupingExpiry: {\n    name: 'secondaryGroupingExpiry',\n    type: 'number',\n    label: t('Expiration date of secondary grouping'),\n    help: t(\n      'If this UNIX timestamp is in the past, the secondary grouping configuration stops applying automatically.'\n    ),\n  },\n};\n\nconst RuleDescription = styled('div')`\n  margin-bottom: ${space(1)};\n  margin-top: -${space(1)};\n  margin-right: 36px;\n`;\n\nconst RuleExample = styled('pre')`\n  margin-bottom: ${space(1)};\n  margin-right: 36px;\n`;\n\nconst Changelog = styled('div')`\n  position: relative;\n  top: -1px;\n  margin-bottom: -1px;\n  padding: ${space(2)};\n  border-bottom: 1px solid ${p => p.theme.innerBorder};\n  background: ${p => p.theme.backgroundSecondary};\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:last-child {\n    border: 0;\n    border-bottom-left-radius: ${p => p.theme.borderRadius};\n    border-bottom-right-radius: ${p => p.theme.borderRadius};\n  }\n`;\n\nconst ChangelogTitle = styled('h3')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  margin-bottom: ${space(0.75)} !important;\n`;\n"],"sourceRoot":""}