(self.webpackChunk=self.webpackChunk||[]).push([["app_views_admin_adminOverview_index_tsx"],{"./app/views/admin/adminOverview/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S}),s("../node_modules/core-js/modules/es.date.to-string.js");var r=s("../node_modules/react/index.js"),n=s("../node_modules/react-document-title/index.js"),o=s.n(n),a=s("./app/components/panels/index.tsx"),i=s("./app/locale.tsx"),c=(s("../node_modules/core-js/modules/es.reflect.construct.js"),s("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),l=s("../node_modules/@babel/runtime/helpers/esm/createClass.js"),u=s("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),p=s("../node_modules/@babel/runtime/helpers/esm/inherits.js"),d=s("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),h=s("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),f=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=(s("../node_modules/core-js/modules/es.array.concat.js"),s("../node_modules/core-js/modules/es.array.for-each.js"),s("../node_modules/core-js/modules/es.array.map.js"),s("./app/components/charts/miniBarChart.tsx")),v=s("./app/components/loadingError.tsx"),x=s("./app/components/loadingIndicator.tsx"),Z=s("./app/utils/theme.tsx"),y=s("./app/utils/withApi.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var w={error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":[],"client-api.all-versions.responses.4xx":[],"client-api.all-versions.responses.5xx":[]}},b=function(e){(0,p.Z)(n,e);var t,s,r=(t=n,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.Z)(t);if(s){var n=(0,h.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function n(){var e;(0,c.Z)(this,n);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=r.call.apply(r,[this].concat(s)),(0,f.Z)((0,u.Z)(e),"state",w),(0,f.Z)((0,u.Z)(e),"fetchData",(function(){["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(s){e.setState((function(e){var r=e.rawData;return r[t]=s,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))})),(0,f.Z)((0,u.Z)(e),"requestFinished",(function(){var t=e.state.rawData;t["client-api.all-versions.responses.2xx"]&&t["client-api.all-versions.responses.4xx"]&&t["client-api.all-versions.responses.5xx"]&&e.setState({loading:!1})})),e}return(0,l.Z)(n,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(w,this.fetchData)}},{key:"processRawSeries",value:function(e){return e.map((function(e){return{name:1e3*e[0],value:e[1]}}))}},{key:"getChartSeries",value:function(){var e=this.state.rawData;return[{seriesName:"2xx",data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:Z.ZP.green200},{seriesName:"4xx",data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:Z.ZP.blue300},{seriesName:"5xx",data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:Z.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,s=e.error;if(t)return(0,j.tZ)(x.Z,{});if(s)return(0,j.tZ)(v.Z,{onRetry:this.fetchData});var r=this.getChartSeries(),n=r.map((function(e){return e.color}));return(0,j.tZ)(m.Z,{series:r,colors:n,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),n}(r.Component);b.displayName="ApiChart";const g=(0,y.Z)(b);s("../node_modules/core-js/modules/web.dom-collections.for-each.js"),s("../node_modules/core-js/modules/es.object.keys.js"),s("../node_modules/core-js/modules/es.parse-int.js");var _={error:!1,loading:!0,rawData:{"events.total":[],"events.dropped":[]},stats:{received:[],rejected:[]}},D=function(e){(0,p.Z)(n,e);var t,s,r=(t=n,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.Z)(t);if(s){var n=(0,h.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function n(){var e;(0,c.Z)(this,n);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=r.call.apply(r,[this].concat(s)),(0,f.Z)((0,u.Z)(e),"state",_),(0,f.Z)((0,u.Z)(e),"fetchData",(function(){["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(s){e.setState((function(e){var r=e.rawData;return r[t]=s,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))})),e}return(0,l.Z)(n,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(_,this.fetchData)}},{key:"requestFinished",value:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()}},{key:"processOrgData",value:function(){var e=this.state.rawData,t={},s={},r=[0,0];e["events.total"].forEach((function(n,o){var a,i=n[1],c=null===(a=e["events.dropped"][o])||void 0===a?void 0:a[1],l=n[0];void 0===t[l]?(t[l]=i,s[l]=c):(t[l]+=i,s[l]+=c),i>0&&(r[0]+=i,r[1]+=1)})),this.setState({stats:{rejected:Object.keys(s).map((function(e){return{name:1e3*parseInt(e,10),value:s[e]||0}})),accepted:Object.keys(t).map((function(e){return{name:1e3*parseInt(e,10),value:t[e]-s[e]}}))},loading:!1})}},{key:"getChartSeries",value:function(){var e=this.state.stats;return[{seriesName:(0,i.t)("Accepted"),data:e.accepted,color:Z.ZP.blue300},{seriesName:(0,i.t)("Dropped"),data:e.rejected,color:Z.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,s=e.error;if(t)return(0,j.tZ)(x.Z,{});if(s)return(0,j.tZ)(v.Z,{onRetry:this.fetchData});var r=this.getChartSeries(),n=r.map((function(e){return e.color}));return(0,j.tZ)(m.Z,{series:r,colors:n,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),n}(r.Component);D.displayName="EventChart";const k=(0,y.Z)(D);var R=function(){var e=(new Date).getTime()/1e3-604800;return(0,j.tZ)(o(),{title:"Admin Overview - Sentry",children:(0,j.BX)(r.Fragment,{children:[(0,j.tZ)("h3",{children:(0,i.t)("System Overview")}),(0,j.BX)(a.s_,{children:[(0,j.tZ)(a.V9,{children:(0,i.t)("Event Throughput")}),(0,j.tZ)(a.N,{withPadding:!0,children:(0,j.tZ)(k,{since:e,resolution:"1h"})})]},"events"),(0,j.BX)(a.s_,{children:[(0,j.tZ)(a.V9,{children:(0,i.t)("API Responses")}),(0,j.tZ)(a.N,{withPadding:!0,children:(0,j.tZ)(g,{since:e,resolution:"1h"})})]},"api")]})})};R.displayName="AdminOverview";const S=R}}]);
//# sourceMappingURL=../sourcemaps/app_views_admin_adminOverview_index_tsx.da36fc32bdadb2ed3b9c8d4b900e024d.js.map