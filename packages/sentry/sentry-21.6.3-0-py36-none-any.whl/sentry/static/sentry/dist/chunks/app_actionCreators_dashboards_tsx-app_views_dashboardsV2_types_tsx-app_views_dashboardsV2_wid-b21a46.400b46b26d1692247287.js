(self.webpackChunk=self.webpackChunk||[]).push([["app_actionCreators_dashboards_tsx-app_views_dashboardsV2_types_tsx-app_views_dashboardsV2_wid-b21a46"],{"./app/actionCreators/dashboards.tsx":(e,t,r)=>{"use strict";r.d(t,{JR:()=>s,AK:()=>a,Y:()=>i,iM:()=>l,QL:()=>c}),r("../node_modules/core-js/modules/es.array.concat.js");var o=r("./app/actionCreators/indicator.tsx"),n=r("./app/locale.tsx");function s(e,t,r,s){var a=r.title,i=r.widgets,l=e.requestPromise("/organizations/".concat(t,"/dashboards/"),{method:"POST",data:{title:a,widgets:i,duplicate:s}});return l.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,o.Iw)(r):(0,o.Iw)((0,n.t)("Unable to create dashboard"))})),l}function a(e,t,r){var s=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r,"/"),{method:"GET"});return s.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,o.Iw)(r):(0,o.Iw)((0,n.t)("Unable to load dashboard"))})),s}function i(e,t,r){var s={title:r.title,widgets:r.widgets},a=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r.id,"/"),{method:"PUT",data:s});return a.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,o.Iw)(r):(0,o.Iw)((0,n.t)("Unable to update dashboard"))})),a}function l(e,t,r){var s=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r,"/"),{method:"DELETE"});return s.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,o.Iw)(r):(0,o.Iw)((0,n.t)("Unable to delete dashboard"))})),s}function c(e,t,r){return e.requestPromise("/organizations/".concat(t,"/dashboards/widgets/"),{method:"POST",data:r})}},"./app/actionCreators/events.tsx":(e,t,r)=>{"use strict";r.d(t,{lI:()=>h,eV:()=>b,JE:()=>g}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=r("../node_modules/@babel/runtime/regenerator/index.js"),i=r.n(a),l=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/lodash/pick.js")),c=r.n(l),u=r("./app/components/charts/utils.tsx"),d=r("./app/utils/getPeriod.tsx"),p=r("./app/utils/performance/constants.tsx");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e,t){var r=t.organization,o=t.project,n=t.environment,a=t.team,i=t.period,l=t.start,c=t.end,p=t.interval,m=t.includePrevious,h=t.query,b=t.yAxis,v=t.field,g=t.topEvents,y=t.orderby,j=t.partial,Z=(0,u.Sw)(m,i),w=Object.fromEntries(Object.entries({interval:p,project:o,environment:n,team:a,query:h,yAxis:b,field:v,topEvents:g,orderby:y,partial:j?"1":void 0}).filter((function(e){return void 0!==(0,s.Z)(e,2)[1]}))),O=(0,d.X)({period:i,start:l,end:c},{shouldDoublePeriod:Z});return e.requestPromise("/organizations/".concat(r.slug,"/events-stats/"),{query:f(f({},w),O)})};function b(e,t,r){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(i().mark((function e(t,r,o){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c()(o,Object.values(p.s)),s=f(f({},n),{},{query:o.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-facets/"),{query:s}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,r){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)(i().mark((function e(t,r,o){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c()(o,Object.values(p.s)),s=f(f({},n),{},{query:o.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-meta/"),{query:s}).then((function(e){return e.count})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"./app/components/charts/components/visualMap.tsx":(e,t,r)=>{"use strict";function o(e){return e}r.d(t,{Z:()=>o}),r("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/lineChart.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react/index.js")),d=r("./app/components/charts/series/lineSeries.tsx"),p=r("./app/components/charts/baseChart.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),f=["series","seriesOptions"],h=["seriesName","data","dataArray"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){(0,i.Z)(u,e);var t,r,o=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),o.apply(this,arguments)}return(0,a.Z)(u,[{key:"render",value:function(){var e=this.props,t=e.series,r=e.seriesOptions,o=(0,n.Z)(e,f);return(0,m.tZ)(p.Z,v(v({},o),{},{series:t.map((function(e){var t=e.seriesName,o=e.data,s=e.dataArray,a=(0,n.Z)(e,h);return(0,d.Z)(v(v(v({},r),a),{},{name:t,data:s||o.map((function(e){var t=e.value;return[e.name,t]})),animation:!1,animationThreshold:1,animationDuration:0}))}))}))}}]),u}(u.Component);g.displayName="LineChart"},"./app/components/charts/transitionChart.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>f}),r("../node_modules/core-js/modules/es.reflect.construct.js");var o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),d=r("./app/components/charts/loadingPanel.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var m=function(e){(0,a.Z)(f,e);var t,r,m=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=m.call.apply(m,[this].concat(r)),(0,c.Z)((0,s.Z)(e),"state",{prevReloading:e.props.reloading,prevLoading:e.props.loading,key:1}),e}return(0,n.Z)(f,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.loading,o=e.reloading;return r&&!o?(0,p.tZ)(d.Z,{height:t,"data-test-id":"events-request-loading"}):(0,p.tZ)(u.Fragment,{children:this.props.children},String(this.state.key))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevReloading,o=e.reloading,n=t.prevLoading,s=e.loading;return n!==s?{prevReloading:o,prevLoading:s,key:t.key+1}:s?{prevReloading:o,prevLoading:s,key:t.key}:r&&!o?{prevReloading:o,prevLoading:s,key:t.key+1}:{prevReloading:o,prevLoading:s,key:t.key}}}]),f}(u.Component);m.displayName="TransitionChart",(0,c.Z)(m,"defaultProps",{height:"200px"});const f=m},"./app/utils/getPeriod.tsx":(e,t,r)=>{"use strict";r.d(t,{X:()=>l});var o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),n=(r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.match.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.parse-int.js"),r("../node_modules/moment/moment.js")),s=r.n(n),a=r("./app/constants/index.tsx"),i=r("./app/utils/dates.tsx"),l=function(e){var t=e.period,r=e.start,n=e.end,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.shouldDoublePeriod;if(t||r||n||(t=a.GY),t){if(!c)return{statsPeriod:t};var u=t.match(/([0-9]+)([mhdw])/),d=(0,o.Z)(u,3),p=d[1],m=d[2];return{statsPeriod:"".concat(2*parseInt(p,10)).concat(m)}}if(!r||!n)throw new Error("start and end required");var f=(0,i.v5)(r),h=(0,i.v5)(n);if(c){var b=s()(n).diff(s()(r)),v=s()(r).subtract(b);return{start:(0,i.v5)(v),end:h}}return{start:f,end:h}}},"./app/views/dashboardsV2/contextMenu.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/classnames/index.js"),a=r.n(s),i=r("./app/components/dropdownMenu.tsx"),l=r("./app/icons/index.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.children;return(0,c.tZ)(i.Z,{children:function(e){var r=e.isOpen,o=e.getRootProps,n=e.getActorProps,s=e.getMenuProps,i=a()("dropdown",{"anchor-right":!0,open:r});return(0,c.BX)(m,d(d({},o({className:i})),{},{children:[(0,c.tZ)(f,d(d({},n({onClick:function(e){e.stopPropagation(),e.preventDefault()}})),{},{children:(0,c.tZ)(l.YR,{"data-test-id":"context-menu",size:"md"})})),r&&(0,c.tZ)("ul",d(d({},s({})),{},{className:a()("dropdown-menu"),children:t}))]}))}})};p.displayName="ContextMenu";var m=(0,n.Z)("span",{target:"e1xn1f5x1"})("display:flex;color:",(function(e){return e.theme.textColor}),";"),f=(0,n.Z)("div",{target:"e1xn1f5x0"})({name:"1y7emqs",styles:"display:flex;cursor:pointer;padding:0 5px"});const h=p},"./app/views/dashboardsV2/types.tsx":(e,t,r)=>{"use strict";var o,n;r.d(t,{F:()=>o,n:()=>n}),function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.STACKED_AREA="stacked_area"}(o||(o={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete"}(n||(n={}))},"./app/views/dashboardsV2/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{q:()=>i,t:()=>l});var o=r("../node_modules/lodash/cloneDeep.js"),n=r.n(o),s=r("./app/utils/dates.tsx"),a=r("./app/utils/discover/eventView.tsx");function i(e){return n()(e)}function l(e,t,r){var o=r.datetime,n=o.start,i=o.end,l=o.period,c=r.projects,u=r.environments;return a.ZP.fromSavedQuery({id:void 0,name:e,version:2,fields:t.fields,query:t.conditions,orderby:t.orderby,projects:c,range:l,start:n?(0,s.v5)(n):void 0,end:i?(0,s.v5)(i):void 0,environment:u})}},"./app/views/dashboardsV2/widgetCard.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Le}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.parse-int.js"),r("../node_modules/react/index.js")),d=r("../node_modules/react-router/es/index.js"),p=r("../node_modules/lodash/isEqual.js"),m=r.n(p),f=r("./app/components/charts/styles.tsx"),h=r("./app/components/errorBoundary.tsx"),b=r("./app/components/menuItem.tsx"),v=r("./app/components/organizations/globalSelectionHeader/utils.tsx"),g=r("./app/components/panels/index.tsx"),y=r("./app/components/placeholder.tsx"),j=r("./app/icons/index.tsx"),Z=r("./app/locale.tsx"),w=r("./app/styles/overflowEllipsis.tsx"),O=r("./app/styles/space.tsx"),_=r("./app/utils/analytics.tsx"),x=r("./app/utils/withApi.tsx"),P=r("./app/utils/withGlobalSelection.tsx"),R=r("./app/utils/withOrganization.tsx"),C=r("./app/views/dashboardsV2/contextMenu.tsx"),k=r("./app/views/dashboardsV2/utils.tsx"),D=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js")),S=r("./app/components/charts/areaChart.tsx"),E=r("./app/components/charts/barChart.tsx"),q=r("./app/components/charts/chartZoom.tsx"),T=r("./app/components/charts/errorPanel.tsx"),M=r("./app/components/charts/lineChart.tsx"),z=(r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("./app/components/panels/panelTable.tsx")),N=r("./app/utils/discover/fieldRenderers.tsx"),A=r("./app/utils/discover/fields.tsx"),B=r("./app/views/eventsV2/utils.tsx"),I=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var L=function(e){(0,a.Z)(c,e);var t,r,o=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function c(){return(0,n.Z)(this,c),o.apply(this,arguments)}return(0,s.Z)(c,[{key:"renderRow",value:function(e,t,r,o){var n=this.props,s=n.location,a=n.organization;return o.map((function(o){var n=(0,N.Js)(o.name,r)(t,{organization:a,location:s});return(0,I.tZ)("div",{children:n},"".concat(e,":").concat(o.name))}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,o=t.loading,n=t.fields,s=t.metadata,a=t.data,i=t.title,l=null!=s?s:{},c=(0,B.Hg)(n.map((function(e){return{field:e}})));return(0,I.BX)(u.Fragment,{children:[i&&(0,I.tZ)("h4",{children:i}),(0,I.tZ)(F,{className:r,isLoading:o,headers:c.map((function(e,t){var r=(0,A.qG)(e.name,e.type,l);return(0,I.tZ)(W,{align:r,children:e.name},t)})),children:null==a?void 0:a.map((function(t,r){return e.renderRow(r,t,l,c)}))})]})}}]),c}(u.Component);L.displayName="SimpleTableChart";var F=(0,c.Z)(z.Z,{target:"e3tr8vk1"})("border-radius:0;border-left:0;border-right:0;border-bottom:0;margin:0;",z.z,"{height:min-content;}"),W=(0,c.Z)("div",{target:"e3tr8vk0"})((function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";");const X=(0,R.Z)(L);var V=r("./app/components/charts/transitionChart.tsx"),U=r("./app/components/charts/transparentLoadingMask.tsx"),J=r("./app/components/charts/utils.tsx"),G=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),Q=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),H=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),K=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),Y=r("../node_modules/@babel/runtime/regenerator/index.js"),$=r.n(Y),ee=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.array.is-array.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/echarts/index.js")),te=r.n(ee),re=r("../node_modules/lodash/max.js"),oe=r.n(re),ne=r("./app/components/charts/components/visualMap.tsx");function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("../node_modules/echarts/lib/chart/map.js");var ie=r("./app/components/charts/baseChart.tsx"),le=["series","seriesOptions","theme"],ce=["seriesName","data"];function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=function(e){(0,a.Z)(p,e);var t,c,u,d=(c=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(c);if(u){var r=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,i.Z)(this,e)});function p(){var e;(0,n.Z)(this,p);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=d.call.apply(d,[this].concat(r)),(0,o.Z)((0,K.Z)(e),"state",{countryToCodeMap:null,map:null,codeToCountryMap:null}),e}return(0,s.Z)(p,[{key:"componentDidMount",value:(t=(0,H.Z)($().mark((function e(){var t,o,n,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e("app_data_countryCodesMap_tsx").then(r.bind(r,"./app/data/countryCodesMap.tsx")),r.e("app_data_world_json").then(r.t.bind(r,"./app/data/world.json",19))]);case 2:t=e.sent,o=(0,Q.Z)(t,2),n=o[0],s=o[1],te().registerMap("sentryWorld",s.default),this.setState({countryToCodeMap:n.default,map:s.default,codeToCountryMap:Object.fromEntries(Object.entries(n.default).map((function(e){var t=(0,Q.Z)(e,2),r=t[0];return[t[1],r]})))});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,r=t.countryToCodeMap,o=t.map;if(null===r||null===o)return null;var n=this.props,s=n.series,a=n.seriesOptions,i=n.theme,l=(0,G.Z)(n,le),c=s.map((function(t){var r,o=t.seriesName,n=t.data,s=(0,G.Z)(t,ce);return function(){return ae(ae({roam:!0,itemStyle:{emphasis:{label:{show:!1}}}},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{type:"map"})}(de(de(de({},a),s),{},{map:"sentryWorld",name:o,nameMap:null!==(r=e.state.countryToCodeMap)&&void 0!==r?r:void 0,aspectScale:.85,zoom:1.3,center:[10.97,9.71],itemStyle:{areaColor:i.gray200,borderColor:i.backgroundSecondary,emphasis:{areaColor:i.orange300}},label:{emphasis:{show:!1}},data:n}))})),u=oe()(s.map((function(e){var t=e.data;return oe()(t.map((function(e){return e.value})))})))||1;return(0,I.tZ)(ie.Z,de(de({options:{backgroundColor:i.background,visualMap:[(0,ne.Z)({left:"right",min:0,max:u,inRange:{color:[i.purple200,i.purple300]},text:["High","Low"],textStyle:{color:i.textColor},calculable:!1})]}},l),{},{yAxis:null,xAxis:null,series:c,tooltip:{formatter:function(t){var r,o=Array.isArray(t)?t[0]:t,n=o.marker,s=o.name,a=o.value;if(isNaN(a))return"";var i="number"==typeof a?a.toLocaleString():"",l=(null===(r=e.state.codeToCountryMap)||void 0===r?void 0:r[s])||s;return['<div class="tooltip-series tooltip-series-solo">\n                 <div><span class="tooltip-label">'.concat(n," <strong>").concat(l,"</strong></span> ").concat(i,"</div>\n              </div>"),'<div class="tooltip-arrow"></div>'].join("")}}}))}}]),p}(u.Component);pe.displayName="WorldMapChart";const me=(0,D.b)(pe);var fe=r("./app/components/loadingIndicator.tsx"),he=r("./app/utils/discover/charts.tsx"),be=r("./app/utils/getDynamicText.tsx");function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=function(e){(0,a.Z)(c,e);var t,r,o=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function c(){return(0,n.Z)(this,c),o.apply(this,arguments)}return(0,s.Z)(c,[{key:"shouldComponentUpdate",value:function(e){var t=ge(ge({},this.props),{},{widget:ge(ge({},this.props.widget),{},{title:""})});return e=ge(ge({},e),{},{widget:ge(ge({},e.widget),{},{title:""})}),!m()(t,e)}},{key:"tableResultComponent",value:function(e){var t=e.loading,r=e.errorMessage,o=e.tableResults,n=this.props,s=n.location,a=n.widget,i=n.organization;return r?(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})}):void 0===o||t?(0,I.tZ)(y.Z,{height:"200px"}):o.map((function(e,r){var n,l,c=null!==(n=null===(l=a.queries[r])||void 0===l?void 0:l.fields)&&void 0!==n?n:[];return(0,I.tZ)(_e,{location:s,fields:c,title:o.length>1?e.title:"",loading:t,metadata:e.meta,data:e.data,organization:i},"table:".concat(e.title))}))}},{key:"bigNumberComponent",value:function(e){var t=e.loading,r=e.errorMessage,o=e.tableResults;return r?(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})}):void 0===o||t?(0,I.tZ)(we,{children:"—"}):o.map((function(e){var t,r=null!==(t=e.meta)&&void 0!==t?t:{},o=Object.keys(null!=r?r:{})[0];if(!o||!e.data.length)return(0,I.tZ)(we,{children:"—"},"big_number:".concat(e.title));var n=e.data[0],s=(0,N.fK)(o,r)(n);return(0,I.tZ)(we,{children:s},"big_number:".concat(e.title))}))}},{key:"chartComponent",value:function(e){switch(this.props.widget.displayType){case"bar":return(0,I.tZ)(E.Z,ge({},e));case"area":return(0,I.tZ)(S.Z,ge({stacked:!0},e));case"world_map":return(0,I.tZ)(me,ge({},e));case"line":default:return(0,I.tZ)(M.Z,ge({},e))}}},{key:"render",value:function(){var e,t,r,o=this,n=this.props,s=n.theme,a=n.tableResults,i=n.timeseriesResults,l=n.errorMessage,c=n.loading,u=n.widget;if("table"===u.displayType)return(0,I.BX)(V.Z,{loading:c,reloading:c,children:[(0,I.tZ)(Ze,{loading:c}),this.tableResultComponent({tableResults:a,loading:c,errorMessage:l})]});if("big_number"===u.displayType)return(0,I.BX)(V.Z,{loading:c,reloading:c,children:[(0,I.tZ)(Ze,{loading:c}),this.bigNumberComponent({tableResults:a,loading:c,errorMessage:l})]});if(l)return(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})});var d=this.props,p=d.location,m=d.router,f=d.selection.datetime,h=f.start,b=f.end,v=f.period,g=f.utc;if("world_map"===u.displayType){var Z={title:"",data:[]},w=function(){var e;if(!a||!a.length)return Z;var t=a[0],r=t.data,o=t.meta;if(!r||!r.length||!o)return Z;var n=Object.keys(o).find((function(e){return"geo.country_code"!==e}));return n?{title:null!==(e=t.title)&&void 0!==e?e:"",data:r.filter((function(e){return e["geo.country_code"]})).map((function(e){return{name:e["geo.country_code"],value:e[n]}}))}:Z}(),O=w.data,_=[{seriesName:w.title,data:O}];return(0,I.BX)(V.Z,{loading:c,reloading:c,children:[(0,I.tZ)(Ze,{loading:c}),(0,I.tZ)(Oe,{children:(0,be.Z)({value:this.chartComponent({series:_}),fixed:(0,I.tZ)(y.Z,{height:"200px",testId:"skeleton-ui"})})})]})}var x={left:0,top:0,selected:(0,J.RI)(p),formatter:function(e){var t=(0,A.hW)(e);if(null!==t){var r=(0,A.b8)(t);null!==r&&(e=r.toUpperCase())}return e}},P=null!==(e=null===(t=u.queries[0])||void 0===t||null===(r=t.fields)||void 0===r?void 0:r[0])&&void 0!==e?e:"count()",R={grid:{left:0,right:0,top:"40px",bottom:0},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:he.CX},yAxis:{axisLabel:{color:s.chartLabel,formatter:function(e){return(0,he.gu)(e,P)}}}};return(0,I.tZ)(q.Z,{router:m,period:v,start:h,end:b,utc:g,children:function(e){if(l)return(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})});var t=i?s.charts.getColorPalette(i.length-2):[],r=i?i.map((function(e,r){return ge(ge({},e),{},{color:t[r]})})):[];return(0,I.BX)(V.Z,{loading:c,reloading:c,children:[(0,I.tZ)(Ze,{loading:c}),(0,I.tZ)(Oe,{children:(0,be.Z)({value:o.chartComponent(ge(ge(ge({},e),R),{},{legend:x,series:r})),fixed:(0,I.tZ)(y.Z,{height:"200px",testId:"skeleton-ui"})})})]})}})}}]),c}(u.Component);ye.displayName="WidgetCardChart";var je=(0,c.Z)((function(e){return(0,I.tZ)(U.Z,ge(ge({},e),{},{maskBackgroundColor:"transparent"}))}),{target:"e1od7x483"})({name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"}),Ze=function(e){var t=e.loading;return t?(0,I.tZ)(je,{visible:t,children:(0,I.tZ)(fe.Z,{mini:!0})}):null};Ze.displayName="LoadingScreen";var we=(0,c.Z)("div",{target:"e1od7x482"})("font-size:32px;padding:",(0,O.Z)(1)," ",(0,O.Z)(3)," ",(0,O.Z)(3)," ",(0,O.Z)(3),";*{text-align:left!important;}"),Oe=(0,c.Z)("div",{target:"e1od7x481"})("padding:0 ",(0,O.Z)(3)," ",(0,O.Z)(3),";"),_e=(0,c.Z)(X,{target:"e1od7x480"})("margin-top:",(0,O.Z)(1.5),";border-bottom-left-radius:",(function(e){return e.theme.borderRadius}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";box-shadow:none;>div{padding:",(0,O.Z)(1)," ",(0,O.Z)(3),";}");const xe=(0,D.b)(ye);var Pe=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),Re=(r("../node_modules/core-js/modules/es.array.reduce.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("./app/actionCreators/events.tsx")),Ce=r("./app/utils/dates.tsx"),ke=r("./app/utils/discover/genericDiscoverQuery.tsx"),De=["name"],Se=["name"];function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t){return{seriesName:t,data:e.data.map((function(e){var t=(0,Q.Z)(e,2);return{name:1e3*t[0],value:t[1].reduce((function(e,t){return e+t.count}),0)}}))}}function Me(e,t){var r=[],o=e.name;if((0,J.Xe)(t)){var n=Object.keys(t).map((function(e){var r=o?"".concat(o," : ").concat(e):e,n=t[e];return[n.order||0,Te(n,r)]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));r=r.concat(n)}else{var s=e.fields[0],a=o?"".concat(o," : ").concat(s):s,i=Te(t,a);r.push(i)}return r}var ze=function(e){(0,a.Z)(u,e);var t,r,c=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function u(){var e;(0,n.Z)(this,u);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=c.call.apply(c,[this].concat(r)),(0,o.Z)((0,K.Z)(e),"state",{loading:!0,queryFetchID:void 0,errorMessage:void 0,timeseriesResults:void 0,rawResults:void 0,tableResults:void 0}),e}return(0,s.Z)(u,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t,r=this.props,o=r.selection,n=r.widget,s=e.widget.queries.reduce((function(e,t){var r=(0,Q.Z)(e,2),o=r[0],n=r[1],s=t.name,a=(0,G.Z)(t,De);return o.push(s),n.push(a),[o,n]}),[[],[]]),a=(0,Q.Z)(s,2),i=a[0],l=a[1],c=n.queries.reduce((function(e,t){var r=(0,Q.Z)(e,2),o=r[0],n=r[1],s=t.name,a=(0,G.Z)(t,Se);return o.push(s),n.push(a),[o,n]}),[[],[]]),u=(0,Q.Z)(c,2),d=u[0],p=u[1];m()(n.displayType,e.widget.displayType)&&m()(n.interval,e.widget.interval)&&m()(p,l)&&m()(n.displayType,e.widget.displayType)&&(0,v.WO)(o,e.selection)?this.state.loading||m()(i,d)||(null===(t=this.state.rawResults)||void 0===t?void 0:t.length)!==n.queries.length||this.setState((function(e){var t=n.queries.reduce((function(t,r,o){return t.concat(Me(r,e.rawResults[o]))}),[]);return qe(qe({},e),{},{timeseriesResults:t})})):this.fetchData()}},{key:"fetchEventData",value:function(e){var t=this,r=this.props,o=r.selection,n=r.api,s=r.organization,a=r.widget,i=[];this.setState({tableResults:[]});var l=a.queries.map((function(e){var t=(0,k.t)(a.title,e,o),r="",i={per_page:5,noPagination:!0};if("table"===a.displayType)r="/organizations/".concat(s.slug,"/eventsv2/"),i.referrer="api.dashboards.tablewidget";else if("big_number"===a.displayType)r="/organizations/".concat(s.slug,"/eventsv2/"),i.per_page=1,i.referrer="api.dashboards.bignumberwidget";else{if("world_map"!==a.displayType)throw Error("Expected widget displayType to be either big_number, table or world_map");r="/organizations/".concat(s.slug,"/events-geo/"),delete i.per_page,i.referrer="api.dashboards.worldmapwidget"}return(0,ke.A)(n,r,qe(qe({},t.generateQueryStringObject()),i))})),c=0;l.forEach(function(){var r=(0,H.Z)($().mark((function r(o,n){var s,u,d,p,m,f,h,b;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o;case 3:d=r.sent,p=(0,Q.Z)(d,1),m=p[0],(f=m).title=null!==(s=null===(u=a.queries[n])||void 0===u?void 0:u.name)&&void 0!==s?s:"",i=[].concat((0,Pe.Z)(i),[f]),t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{tableResults:i})})),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),b=(null===r.t0||void 0===r.t0||null===(h=r.t0.responseJSON)||void 0===h?void 0:h.detail)||(0,Z.t)("An unknown error occurred."),t.setState({errorMessage:b});case 16:return r.prev=16,c++,t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{loading:c!==l.length})})),r.finish(16);case 20:case"end":return r.stop()}}),r,null,[[0,12,16,20]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"fetchTimeseriesData",value:function(e){var t=this,r=this.props,o=r.selection,n=r.api,s=r.organization,a=r.widget;this.setState({timeseriesResults:[],rawResults:[]});var i=o.environments,l=o.projects,c=o.datetime,u=c.start,d=c.end,p=c.period,m=function(e,t){var r="bar"===e.displayType?"1d":e.interval;r||(r="5m");var o=(0,Ce.YJ)(r);return(0,J.Nm)(t)/o>4e3?(0,J.ZS)(t,!0):r}(a,{start:u,end:d,period:p}),f=a.queries.map((function(e){var t={organization:s,interval:m,start:u,end:d,project:l,environment:i,period:p,query:e.conditions,yAxis:e.fields,orderby:e.orderby,includePrevious:!1,referrer:"api.dashboards.timeserieswidget",partial:!0};return(0,Re.lI)(n,t)})),h=0;f.forEach(function(){var r=(0,H.Z)($().mark((function r(o,n){var s,i,l;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o;case 3:s=r.sent,t.setState((function(t){var r,o;if(t.queryFetchID!==e)return t;var i=(null!==(r=t.timeseriesResults)&&void 0!==r?r:[]).concat(Me(a.queries[n],s));return qe(qe({},t),{},{timeseriesResults:i,rawResults:(null!==(o=t.rawResults)&&void 0!==o?o:[]).concat(s)})})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),l=(null===r.t0||void 0===r.t0||null===(i=r.t0.responseJSON)||void 0===i?void 0:i.detail)||(0,Z.t)("An unknown error occurred."),t.setState({errorMessage:l});case 11:return r.prev=11,h++,t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{loading:h!==f.length})})),r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,7,11,15]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"fetchData",value:function(){var e=this.props.widget,t=Symbol("queryFetchID");this.setState({loading:!0,errorMessage:void 0,queryFetchID:t}),["table","world_map","big_number"].includes(e.displayType)?this.fetchEventData(t):this.fetchTimeseriesData(t)}},{key:"render",value:function(){var e=this.props.children,t=this.state;return e({loading:t.loading,timeseriesResults:t.timeseriesResults,tableResults:t.tableResults,errorMessage:t.errorMessage})}}]),u}(u.Component);ze.displayName="WidgetQueries";const Ne=ze;function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie=function(e){(0,a.Z)(c,e);var t,r,o=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function c(){return(0,n.Z)(this,c),o.apply(this,arguments)}return(0,s.Z)(c,[{key:"shouldComponentUpdate",value:function(e){return!m()(e.widget,this.props.widget)||!(0,v.WO)(e.selection,this.props.selection)||this.props.isEditing!==e.isEditing||this.props.isSorting!==e.isSorting||this.props.hideToolbar!==e.hideToolbar}},{key:"renderToolbar",value:function(){var e=this.props,t=e.onEdit,r=e.onDelete,o=e.draggableProps,n=e.hideToolbar;return e.isEditing?(0,I.tZ)(Xe,{children:(0,I.BX)(Ve,{style:{visibility:n?"hidden":"visible"},children:[(0,I.tZ)(Ue,{children:(0,I.tZ)(Je,Be(Be({color:"textColor"},null==o?void 0:o.listeners),null==o?void 0:o.attributes))}),(0,I.tZ)(Ue,{"data-test-id":"widget-edit",onClick:function(){t()},children:(0,I.tZ)(j.yl,{color:"textColor"})}),(0,I.tZ)(Ue,{"data-test-id":"widget-delete",onClick:function(){r()},children:(0,I.tZ)(j.Fz,{color:"textColor"})})]})}):null}},{key:"renderContextMenu",value:function(){var e=this,t=this.props,r=t.widget,o=t.selection,n=t.organization;if(!t.showContextMenu)return null;var s=[];if("table"===r.displayType&&n.features.includes("discover-basic")&&r.queries.length){var a=r.queries[0],i=(0,k.t)(r.title,a,o);s.push((0,I.tZ)(b.Z,{onClick:function(t){t.preventDefault(),(0,_.ec)({eventKey:"dashboards2.tablewidget.open_in_discover",eventName:"Dashboards2: Table Widget - Open in Discover",organization_id:parseInt(e.props.organization.id,10)}),d.browserHistory.push(i.getResultsViewUrlTarget(n.slug))},children:(0,Z.t)("Open in Discover")},"open-discover"))}return s.length?(0,I.tZ)(He,{children:(0,I.tZ)(C.Z,{children:s})}):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.widget,o=t.api,n=t.organization,s=t.selection,a=t.renderErrorMessage,i=t.location,l=t.router;return(0,I.tZ)(h.Z,{customComponent:(0,I.tZ)(Fe,{children:(0,Z.t)("Error loading widget data")}),children:(0,I.BX)(We,{isDragging:!1,children:[(0,I.BX)(Qe,{children:[(0,I.tZ)(Ge,{children:r.title}),this.renderContextMenu()]}),(0,I.tZ)(Ne,{api:o,organization:n,widget:r,selection:s,children:function(t){var o=t.tableResults,c=t.timeseriesResults,d=t.errorMessage,p=t.loading;return(0,I.BX)(u.Fragment,{children:["function"==typeof a?a(d):null,(0,I.tZ)(xe,{timeseriesResults:c,tableResults:o,errorMessage:d,loading:p,location:i,widget:r,selection:s,router:l,organization:n}),e.renderToolbar()]})}})]})})}}]),c}(u.Component);Ie.displayName="WidgetCard";const Le=(0,x.Z)((0,R.Z)((0,P.Z)(d.withRouter(Ie))));var Fe=(0,c.Z)(y.Z,{target:"emngp8q8"})("display:flex;align-items:center;justify-content:center;background-color:",(function(e){return e.theme.alert.error.backgroundLight}),";border:1px solid ",(function(e){return e.theme.alert.error.border}),";color:",(function(e){return e.theme.alert.error.textLight}),";border-radius:",(function(e){return e.theme.borderRadius}),";margin-bottom:",(0,O.Z)(2),";"),We=(0,c.Z)(g.s_,{shouldForwardProp:function(e){return"isDragging"!==e},target:"emngp8q7"})("margin:0;visibility:",(function(e){return e.isDragging?"hidden":"visible"}),";height:100%;min-height:96px;"),Xe=(0,c.Z)("div",{target:"emngp8q6"})("position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;display:flex;justify-content:flex-end;align-items:flex-start;background-color:",(function(e){return e.theme.overlayBackgroundAlpha}),";border-radius:",(function(e){return e.theme.borderRadius}),";"),Ve=(0,c.Z)("div",{target:"emngp8q5"})("display:flex;margin:10px ",(0,O.Z)(2),";touch-action:none;"),Ue=(0,c.Z)("div",{target:"emngp8q4"})("padding:",(0,O.Z)(1),";&:hover{cursor:pointer;}"),Je=(0,c.Z)(j.LS,{target:"emngp8q3"})({name:"1fhyj3b",styles:"&:hover{cursor:grab;}"}),Ge=(0,c.Z)(f.Gh,{target:"emngp8q2"})(w.Z,";"),Qe=(0,c.Z)("div",{target:"emngp8q1"})("padding:",(0,O.Z)(2)," ",(0,O.Z)(3)," 0 ",(0,O.Z)(3),";width:100%;display:flex;justify-content:space-between;"),He=(0,c.Z)("div",{target:"emngp8q0"})("margin-left:",(0,O.Z)(1),";")}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_dashboards_tsx-app_views_dashboardsV2_types_tsx-app_views_dashboardsV2_wid-b21a46.a03545da3dc570a02842526f2b9c844d.js.map