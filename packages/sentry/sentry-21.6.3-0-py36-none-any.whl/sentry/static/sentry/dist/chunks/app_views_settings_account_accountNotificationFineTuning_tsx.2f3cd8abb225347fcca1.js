(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_account_accountNotificationFineTuning_tsx"],{"./app/views/settings/account/accountNotificationFineTuning.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te}),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.array.for-each.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es.object.define-properties.js"),n("../node_modules/core-js/modules/es.object.define-property.js"),n("../node_modules/core-js/modules/es.reflect.construct.js");var o=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),p=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),f=(n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.object.values.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.array.sort.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.array.some.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/react/index.js")),d=n("./app/components/pagination/index.tsx"),m=n("./app/components/panels/index.tsx"),h=n("./app/data/forms/accountNotificationSettings.tsx"),y=n("./app/locale.tsx"),j=n("./app/utils/withOrganizations.tsx"),g=n("./app/views/asyncView.tsx"),v={alerts:{title:"Project Alerts",description:(0,y.t)("Control alerts that you receive per project."),type:"select",choices:[["-1",(0,y.t)("Default")],["1",(0,y.t)("On")],["0",(0,y.t)("Off")]],defaultValue:"-1",defaultFieldName:"subscribeByDefault"},workflow:{title:"Workflow Notifications",description:(0,y.t)("Control workflow notifications, e.g. changes in issue assignment, resolution status, and comments."),type:"select",choices:[["-1",(0,y.t)("Default")],["0",(0,y.t)("Always")],["1",(0,y.t)("Only on issues I subscribe to")],["2",(0,y.t)("Never")]],defaultValue:"-1",defaultFieldName:"workflowNotifications"},deploy:{title:(0,y.t)("Deploy Notifications"),description:(0,y.t)("Control deploy notifications that include release, environment, and commit overviews."),type:"select",choices:[["-1",(0,y.t)("Default")],["2",(0,y.t)("Always")],["3",(0,y.t)("Only on deploys with my commits")],["4",(0,y.t)("Never")]],defaultValue:"-1",defaultFieldName:"deployNotifications"},reports:{title:(0,y.t)("Weekly Reports"),description:(0,y.t)("Reports contain a summary of what's happened within the organization."),type:"select",defaultValue:"1",choices:[["1",(0,y.t)("On")],["0",(0,y.t)("Off")]],defaultFieldName:"weeklyReports"},email:{title:(0,y.t)("Email Routing"),description:(0,y.t)("On a per project basis, route emails to an alternative email address."),type:"select"}},Z=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),b=n("../node_modules/@babel/runtime/helpers/esm/get.js"),O=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.object.assign.js"),n("./app/components/asyncComponent.tsx")),w=n("./app/views/settings/account/notifications/feedbackAlert.tsx"),P=n("./app/views/settings/account/notifications/fields2.tsx"),_=n("./app/views/settings/account/notifications/utils.tsx"),S=n("./app/views/settings/components/forms/form.tsx"),x=n("./app/views/settings/components/forms/jsonForm.tsx"),k=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var B=function(e){(0,r.Z)(l,e);var t,n,o=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(n){var i=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function l(){return(0,i.Z)(this,l),o.apply(this,arguments)}return(0,s.Z)(l,[{key:"render",value:function(){var e=this.props,t=e.notificationType,n=e.notificationSettings,o=e.onChange,i=e.organizations;return(0,k.tZ)(S.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notification-settings/",initialData:(0,_.tl)(t,n,i),children:(0,k.tZ)(x.Z,{title:(0,y.t)("Organizations"),fields:i.map((function(e){return(0,_.gw)(t,n,e,o)}))})})}}]),l}(f.Component);B.displayName="NotificationSettingsByOrganization";const D=(0,j.Z)(B);n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/es.object.entries.js");var T=n("./app/utils.tsx"),N=n("./app/views/settings/account/notifications/constants.tsx"),R=n("./app/views/settings/components/defaultSearchBar.tsx"),F=n("./app/views/settings/components/emptyMessage.tsx");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=function(e){(0,r.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(n){var i=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,i.Z)(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=u.call.apply(u,[this].concat(n)),(0,l.Z)((0,Z.Z)(e),"getProjectCount",(function(){var t,n=e.props,o=n.notificationType,i=n.notificationSettings;return Object.values((null===(t=i[o])||void 0===t?void 0:t.project)||{}).length})),(0,l.Z)((0,Z.Z)(e),"getGroupedProjects",(function(){var t=e.state.projects;return Object.fromEntries(Object.values((0,_.uI)((0,T.Mx)(t))).map((function(e){var t=e.organization,n=e.projects;return["".concat(t.name," Projects"),n]})))})),e}return(0,s.Z)(p,[{key:"getDefaultState",value:function(){return E(E({},(0,b.Z)((0,c.Z)(p.prototype),"getDefaultState",this).call(this)),{},{projects:[]})}},{key:"getEndpoints",value:function(){return[["projects","/projects/"]]}},{key:"renderBody",value:function(){var e=this.props,t=e.notificationType,n=e.notificationSettings,i=e.onChange,s=this.state,r=s.projects,a=s.projectsPageLinks,c=this.getProjectCount()>=N.Zb,l=r.length>=N.sg;return(0,k.BX)(f.Fragment,{children:[c&&this.renderSearchInput({stateKey:"projects",url:"/projects/",placeholder:(0,y.t)("Search Projects"),children:function(e){var t=e.defaultSearchBar;return(0,k.tZ)(V,{children:t})}}),(0,k.tZ)(S.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notification-settings/",initialData:(0,_.tl)(t,n,r),children:0===r.length?(0,k.tZ)(F.Z,{children:(0,y.t)("No projects found")}):Object.entries(this.getGroupedProjects()).map((function(e){var s=(0,o.Z)(e,2),r=s[0],a=s[1];return(0,k.tZ)(x.Z,{title:r,fields:a.map((function(e){return(0,_.gw)(t,n,e,i)}))},r)}))}),c&&l&&(0,k.tZ)(d.Z,E({pageLinks:a},this.props))]})}}]),p}(O.Z);var V=(0,p.Z)(R._,{target:"e1ab1zjl0"})({name:"1ekhw56",styles:"*{width:100%;}"}),A=n("./app/views/settings/components/settingsPageHeader.tsx"),I=n("./app/views/settings/components/text/textBlock.tsx");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const U=function(e){(0,r.Z)(u,e);var t,n,o=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(n){var i=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function u(){var e;(0,i.Z)(this,u);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=o.call.apply(o,[this].concat(n)),(0,l.Z)((0,Z.Z)(e),"getStateToPutForProvider",(function(t){var n=e.props.notificationType,o=e.state.notificationSettings,i=(0,_.E2)(n,o,t);return e.setState({notificationSettings:(0,_.r_)(o,i)}),i})),(0,l.Z)((0,Z.Z)(e),"getStateToPutForDefault",(function(t){var n=e.props.notificationType,o=e.state.notificationSettings,i=(0,_.zD)(n,o,t,(0,_.Vy)(n,o));return e.setState({notificationSettings:(0,_.r_)(o,i)}),i})),(0,l.Z)((0,Z.Z)(e),"getStateToPutForParent",(function(t,n){var o=e.props.notificationType,i=e.state.notificationSettings,s=(0,_.O0)(o,i,t,n);return e.setState({notificationSettings:(0,_.r_)(i,s)}),s})),e}return(0,s.Z)(u,[{key:"getDefaultState",value:function(){return X(X({},(0,b.Z)((0,c.Z)(u.prototype),"getDefaultState",this).call(this)),{},{notificationSettings:{}})}},{key:"getEndpoints",value:function(){return[["notificationSettings","/users/me/notification-settings/",{query:{type:this.props.notificationType}}]]}},{key:"getInitialData",value:function(){var e=this.props.notificationType,t=this.state.notificationSettings,n=(0,l.Z)({},e,(0,_.hx)(e,t));return(0,_.iy)(e,t)||(n.provider=(0,_.Oi)((0,_.xy)(e,t))),n}},{key:"getFields",value:function(){var e=this,t=this.props.notificationType,n=this.state.notificationSettings,o=[Object.assign({},P.u[t],{help:(0,y.t)("This is the default for all projects."),getData:function(t){return e.getStateToPutForDefault(t)}})];return(0,_.iy)(t,n)||o.push(Object.assign({help:(0,y.t)("Where personal notifications will be sent."),getData:function(t){return e.getStateToPutForProvider(t)}},P.u.provider)),o}},{key:"renderBody",value:function(){var e=this.props.notificationType,t=this.state.notificationSettings,n=v[e],o=n.title,i=n.description;return(0,k.BX)(f.Fragment,{children:[(0,k.tZ)(A.Z,{title:o}),i&&(0,k.tZ)(I.Z,{children:i}),(0,k.tZ)(w.Z,{}),(0,k.tZ)(S.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notification-settings/",initialData:this.getInitialData(),children:(0,k.tZ)(x.Z,{title:(0,_.yB)(e)?(0,y.t)("All Projects"):(0,y.t)("All Organizations"),fields:this.getFields()})}),!(0,_.iy)(e,t)&&((0,_.yB)(e)?(0,k.tZ)(z,{notificationType:e,notificationSettings:t,onChange:this.getStateToPutForParent}):(0,k.tZ)(D,{notificationType:e,notificationSettings:t,onChange:this.getStateToPutForParent}))]})}}]),u}(O.Z);var q=n("./app/views/settings/components/forms/selectField.tsx"),L=["title","description"],W=["title","description"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=(0,p.Z)(m.N,{target:"euheq541"})("font-size:1.4rem;&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),J=function(e){var t=e.projects,n=e.field,o=(0,_.uI)(t),i=(n.title,n.description,(0,u.Z)(n,L)),s=Object.values(o).map((function(e){return{name:e.organization.name,projects:e.projects.map((function(e){return K(K({},i),{},{name:e.id,label:e.slug})}))}}));return(0,k.tZ)(f.Fragment,{children:s.map((function(e){var t=e.name,n=e.projects;return(0,k.BX)("div",{children:[(0,k.tZ)(m.V9,{children:t}),n.map((function(e){return(0,k.tZ)(H,{children:(0,k.tZ)(q.Z,{defaultValue:e.defaultValue,name:e.name,choices:e.choices,label:e.label})},e.name)}))]},t)}))})};J.displayName="AccountNotificationsByProject";var Q=function(e){var t=e.organizations,n=e.field,o=(n.title,n.description,(0,u.Z)(n,W)),i=t.map((function(e){return K(K({},o),{},{name:e.id,label:e.slug})}));return(0,k.tZ)(f.Fragment,{children:i.map((function(e){return(0,k.tZ)(H,{children:(0,k.tZ)(q.Z,{defaultValue:e.defaultValue,name:e.name,choices:e.choices,label:e.label})},e.name)}))})};Q.displayName="AccountNotificationsByOrganization";var Y=(0,j.Z)(Q),$=function(e){(0,r.Z)(u,e);var t,n,l=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(n){var i=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function u(){return(0,i.Z)(this,u),l.apply(this,arguments)}return(0,s.Z)(u,[{key:"getEndpoints",value:function(){var e=this.props.params.fineTuneType,t=[["notifications","/users/me/notifications/"],["fineTuneData","/users/me/notifications/".concat(e,"/")]];return(0,_.yB)(e)&&t.push(["projects","/projects/"]),t.push(["emails","/users/me/emails/"]),"email"===e&&t.push(["emails","/users/me/emails/"]),t}},{key:"emailChoices",get:function(){var e,t,n;return null!==(e=null===(t=this.state.emails)||void 0===t||null===(n=t.filter((function(e){return e.isVerified})))||void 0===n?void 0:n.sort((function(e,t){return e.isPrimary?-1:t.isPrimary?1:e.email<t.email?-1:1})))&&void 0!==e?e:[]}},{key:"renderBody",value:function(){var e=this.props,t=e.params,n=e.organizations,i=t.fineTuneType;if(["alerts","deploy","workflow"].includes(i)&&n.some((function(e){return e.features.includes("notification-platform")})))return(0,k.tZ)(U,{notificationType:i});var s=this.state,r=s.notifications,a=s.projects,c=s.fineTuneData,l=s.projectsPageLinks,u=(0,_.yB)(i),p=v[i],f=p.title,j=p.description,g=u?this.getEndpoints()[2]:[],Z=(0,o.Z)(g,2),b=Z[0],O=Z[1],w=!(null==a||!a.length);return"email"===i&&(p.choices=this.emailChoices.map((function(e){var t=e.email;return[t,t]}))),r&&c?(0,k.BX)("div",{children:[(0,k.tZ)(A.Z,{title:f}),j&&(0,k.tZ)(I.Z,{children:j}),p&&p.defaultFieldName&&"weeklyReports"!==p.defaultFieldName&&(0,k.tZ)(S.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/",initialData:r,children:(0,k.tZ)(x.Z,{title:"Default ".concat(f),fields:[h.fields[p.defaultFieldName]]})}),(0,k.tZ)(m.s_,{children:(0,k.BX)(m.N,{children:[(0,k.BX)(m.V9,{hasButtons:u,children:[(0,k.tZ)(ee,{children:u?(0,y.t)("Projects"):(0,y.t)("Organizations")}),(0,k.tZ)("div",{children:u&&this.renderSearchInput({placeholder:(0,y.t)("Search Projects"),url:O,stateKey:b})})]}),(0,k.BX)(S.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/".concat(i,"/"),initialData:c,children:[u&&w&&(0,k.tZ)(J,{projects:a,field:p}),u&&!w&&(0,k.tZ)(F.Z,{children:(0,y.t)("No projects found")}),!u&&(0,k.tZ)(Y,{field:p})]})]})}),a&&(0,k.tZ)(d.Z,K({pageLinks:l},this.props))]}):null}}]),u}(g.Z),ee=(0,p.Z)("div",{target:"euheq540"})({name:"82a6rk",styles:"flex:1"});const te=(0,j.Z)($)},"./app/views/settings/components/defaultSearchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("./app/styles/space.tsx"),s=(0,o.Z)("div",{target:"e1pq3sjx0"})("display:flex;grid-template-columns:1fr max-content;grid-gap:",(0,i.Z)(1.5),";margin-top:",(0,i.Z)(4),";margin-bottom:",(0,i.Z)(1.5),";position:relative;")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountNotificationFineTuning_tsx.7add1417d14f69a20b058ae6c9658a46.js.map