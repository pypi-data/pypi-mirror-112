(self.webpackChunk=self.webpackChunk||[]).push([["app_components_projects_missingProjectMembership_tsx"],{"./app/actionCreators/teams.tsx":(e,t,o)=>{"use strict";o.d(t,{eM:()=>u,z_:()=>d,fs:()=>m,um:()=>l,s:()=>p,Cm:()=>h,tT:()=>g}),o("../node_modules/core-js/modules/es.array.concat.js");var s=o("./app/actionCreators/indicator.tsx"),n=o("./app/actions/teamActions.tsx"),r=o("./app/locale.tsx"),a=o("./app/utils/callIfFunction.tsx"),i=o("./app/utils/guid.tsx"),c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o=arguments.length,s=new Array(o>2?o-2:0),n=2;n<o;n++)s[n-2]=arguments[n];a.g.apply(void 0,[e[t]].concat(s))};function u(e,t,o){return n.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){n.Z.fetchDetailsSuccess(t.teamId,e),c(o,"success",e)},error:function(e){n.Z.fetchDetailsError(t.teamId,e),c(o,"error",e)}})}function d(e,t){n.Z.updateSuccess(e,t)}function m(e,t,o){var s="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return n.Z.update(t.teamId,t.data),e.request(s,{method:"PUT",data:t.data,success:function(e){d(t.teamId,e),c(o,"success",e)},error:function(e){n.Z.updateError(t.teamId,e),c(o,"error",e)}})}function l(e,t,o){var s,r="/organizations/".concat(t.orgId,"/members/").concat(null!==(s=t.memberId)&&void 0!==s?s:"me","/teams/").concat(t.teamId,"/"),a=(0,i.E)();return n.Z.update(a,t.teamId),e.request(r,{method:"POST",success:function(e){n.Z.updateSuccess(t.teamId,e),c(o,"success",e)},error:function(e){n.Z.updateError(a,t.teamId,e),c(o,"error",e)}})}function p(e,t,o){var s="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),r=(0,i.E)();return n.Z.update(r,t.teamId),e.request(s,{method:"DELETE",success:function(e){n.Z.updateSuccess(t.teamId,e),c(o,"success",e)},error:function(e){n.Z.updateError(r,t.teamId,e),c(o,"error",e)}})}function h(e,t,o){return n.Z.createTeam(t),e.requestPromise("/organizations/".concat(o.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return n.Z.createTeamSuccess(e),(0,s.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:o.orgId})),e}),(function(e){throw n.Z.createTeamError(t.slug,e),(0,s.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:o.orgId})),e}))}function g(e,t){return n.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return n.Z.removeTeamSuccess(t.teamId,e),(0,s.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw n.Z.removeTeamError(t.teamId,e),(0,s.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/components/projects/missingProjectMembership.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>S}),o("../node_modules/core-js/modules/es.reflect.construct.js");var s=o("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=o("../node_modules/@babel/runtime/helpers/esm/createClass.js"),r=o("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=o("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=o("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=o("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(o("../node_modules/core-js/modules/es.array.find.js"),o("../node_modules/core-js/modules/es.function.bind.js"),o("../node_modules/core-js/modules/es.array.for-each.js"),o("../node_modules/core-js/modules/web.dom-collections.for-each.js"),o("../node_modules/core-js/modules/es.array.iterator.js"),o("../node_modules/core-js/modules/es.object.to-string.js"),o("../node_modules/core-js/modules/es.set.js"),o("../node_modules/core-js/modules/es.string.iterator.js"),o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/core-js/modules/es.array.map.js"),o("../node_modules/react/index.js")),l=o("./app/actionCreators/indicator.tsx"),p=o("./app/actionCreators/teams.tsx"),h=o("./app/components/button.tsx"),g=o("./app/components/forms/selectControl.tsx"),f=o("./app/components/panels/index.tsx"),Z=o("./app/icons/index.tsx"),j=o("./app/locale.tsx"),b=o("./app/stores/teamStore.tsx"),v=o("./app/styles/space.tsx"),y=o("./app/utils/withApi.tsx"),I=o("./app/views/settings/components/emptyMessage.tsx"),_=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var x=function(e){(0,a.Z)(m,e);var t,o,d=(t=m,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,c.Z)(t);if(o){var n=(0,c.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,i.Z)(this,e)});function m(e){var t,o;(0,s.Z)(this,m),o=d.call(this,e),(0,u.Z)((0,r.Z)(o),"handleChangeTeam",(function(e){var t=e?e.value:null;o.setState({team:t})})),(0,u.Z)((0,r.Z)(o),"getPendingTeamOption",(function(e){return{value:e,label:(0,_.tZ)(z,{children:(0,j.t)("#".concat(e))})}}));var n=o.props,a=n.organization,i=n.projectSlug,c=null===(t=a.projects)||void 0===t?void 0:t.find((function(e){return e.slug===i}));return o.state={loading:!1,error:!1,project:c,team:""},o}return(0,n.Z)(m,[{key:"joinTeam",value:function(e){var t=this;this.setState({loading:!0}),(0,p.um)(this.props.api,{orgId:this.props.organization.slug,teamId:e},{success:function(){t.setState({loading:!1,error:!1}),(0,l.S9)((0,j.t)("Request to join team sent."))},error:function(){t.setState({loading:!1,error:!0}),(0,l.Iw)((0,j.t)("There was an error while trying to request access."))}})}},{key:"renderJoinTeam",value:function(e,t){var o=b.Z.getBySlug(e);return o?this.state.loading?t.has("open-membership")?(0,_.tZ)(h.ZP,{busy:!0,children:(0,j.t)("Join Team")}):(0,_.tZ)(h.ZP,{busy:!0,children:(0,j.t)("Request Access")}):null!=o&&o.isPending?(0,_.tZ)(h.ZP,{disabled:!0,children:(0,j.t)("Request Pending")}):t.has("open-membership")?(0,_.tZ)(h.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,j.t)("Join Team")}):(0,_.tZ)(h.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,j.t)("Request Access")}):null}},{key:"getTeamsForAccess",value:function(){var e,t,o=[],s=[];return(null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[]).forEach((function(e){var t=e.slug,n=b.Z.getBySlug(t);n&&(n.isPending?s.push(n.slug):o.push(n.slug))})),[o,s]}},{key:"render",value:function(){var e,t,o=this,s=this.props.organization,n=this.state.team,r=null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[],a=new Set(s.features),i=[{label:(0,j.t)("Request Access"),options:this.getTeamsForAccess()[0].map((function(e){return{value:e,label:(0,j.t)("#".concat(e))}}))},{label:(0,j.t)("Pending Requests"),options:this.getTeamsForAccess()[1].map((function(e){return o.getPendingTeamOption(e)}))}];return(0,_.tZ)(T,{children:r.length?(0,_.tZ)(I.Z,{icon:(0,_.tZ)(Z.Gy,{size:"xl"}),title:(0,j.t)("You're not a member of this project."),description:(0,j.t)("You'll need to join a team with access before you can view this data."),action:(0,_.BX)(P,{children:[(0,_.tZ)(w,{name:"select",placeholder:(0,j.t)("Select a Team"),options:i,onChange:this.handleChangeTeam}),n?this.renderJoinTeam(n,a):(0,_.tZ)(h.ZP,{disabled:!0,children:(0,j.t)("Select a Team")})]})}):(0,_.tZ)(I.Z,{icon:(0,_.tZ)(Z.Gy,{size:"xl"}),children:(0,j.t)("No teams have access to this project yet. Ask an admin to add your team to this project.")})})}}]),m}(m.Component);x.displayName="MissingProjectMembership";var T=(0,d.Z)(f.s_,{target:"e1cfryqt3"})("margin:",(0,v.Z)(2)," 0;"),P=(0,d.Z)("div",{target:"e1cfryqt2"})("display:grid;grid-auto-flow:column;gap:",(0,v.Z)(2),";text-align:left;"),w=(0,d.Z)(g.Z,{target:"e1cfryqt1"})({name:"xu0q36",styles:"width:250px"}),z=(0,d.Z)("div",{target:"e1cfryqt0"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"});const S=(0,y.Z)(x)}}]);
//# sourceMappingURL=../sourcemaps/app_components_projects_missingProjectMembership_tsx.a6c02d6300a072efb7f7199557ba3a24.js.map