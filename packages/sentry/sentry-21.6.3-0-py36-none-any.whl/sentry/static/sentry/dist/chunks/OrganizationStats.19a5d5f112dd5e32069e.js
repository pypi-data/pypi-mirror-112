(self.webpackChunk=self.webpackChunk||[]).push([["OrganizationStats"],{"./app/components/gridEditable/sortLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=r("../node_modules/react/index.js"),d=r("../node_modules/lodash/omit.js"),p=r.n(d),m=r("./app/components/links/link.tsx"),h=r("./app/icons/index.tsx"),f=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var y=function(e){(0,s.Z)(l,e);var t,r,n=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,o.Z)(this,l),n.apply(this,arguments)}return(0,a.Z)(l,[{key:"renderArrow",value:function(){var e=this.props.direction;return e?"desc"===e?(0,f.tZ)(j,{size:"xs",direction:"down"}):(0,f.tZ)(j,{size:"xs",direction:"up"}):null}},{key:"render",value:function(){var e=this.props,t=e.align,r=e.title,n=e.canSort,o=e.generateSortLink,a=e.onClick,s=o();return s&&n?(0,f.BX)(v,{align:t,to:s,onClick:a,children:[r," ",this.renderArrow()]}):(0,f.tZ)(b,{align:t,children:r})}}]),l}(u.Component);y.displayName="SortLink";var v=(0,l.Z)((function(e){var t=p()(e,["align"]);return(0,f.tZ)(m.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),b=(0,l.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),j=(0,l.Z)(h.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"});const Z=y},"./app/components/notAvailable.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/react/index.js"),r("./app/components/tooltip.tsx")),a=r("./app/utils.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){var t=e.tooltip;return(0,s.tZ)(c,{children:(0,s.tZ)(o.Z,{title:t,disabled:!(0,a.ri)(t),children:"—"})})}i.displayName="NotAvailable";var c=(0,n.Z)("div",{target:"e1ickyb10"})("color:",(function(e){return e.theme.gray200}),";");const l=i},"./app/components/organizations/timeRangeSelector/pageTimeRangeSelector.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>j}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),c=r("./app/components/organizations/timeRangeSelector/index.tsx"),l=r("./app/components/panels/index.tsx"),u=r("./app/constants/index.tsx"),d=r("./app/locale.tsx"),p=r("./app/styles/space.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),h=["className"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){var t=e.className,r=(0,a.Z)(e,h),n=(0,i.useState)(!1),s=(0,o.Z)(n,2),l=s[0],p=s[1];return(0,m.tZ)(v,{className:t,isCalendarOpen:l,children:(0,m.tZ)(c.Z,g({label:(0,m.tZ)(b,{children:(0,d.t)("Date Range:")}),onToggleSelector:function(e){return p(e)},relativeOptions:u.wh},r))})}y.displayName="PageTimeRangeSelector";var v=(0,s.Z)(l.s_,{target:"eujuh2u1"})("display:flex;justify-content:center;align-items:center;height:42px;background:",(function(e){return e.theme.background}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.isCalendarOpen?"".concat(e.theme.borderRadius," ").concat(e.theme.borderRadius," 0 0"):e.theme.borderRadius}),";padding:0;margin:0;font-size:",(function(e){return e.theme.fontSizeMedium}),";color:",(function(e){return e.theme.textColor}),";>div{width:100%;align-self:stretch;}>div>div:first-child{padding:0 ",(0,p.Z)(2),";}>div>div:last-child{box-sizing:content-box;font-size:1em;}"),b=(0,s.Z)("span",{target:"eujuh2u0"})("text-align:left;font-weight:600;color:",(function(e){return e.theme.textColor}),";>span:last-child{font-weight:400;}");const j=y},"./app/components/scoreCard.tsx":(e,t,r)=>{"use strict";r.d(t,{Gh:()=>h,wk:()=>m,BE:()=>y,Zh:()=>g,UR:()=>v,ZP:()=>b});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/react/index.js"),r("./app/components/panels/index.tsx")),a=r("./app/components/questionTooltip.tsx"),s=r("./app/components/textOverflow.tsx"),i=r("./app/styles/overflowEllipsis.tsx"),c=r("./app/styles/space.tsx"),l=r("./app/utils.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){var t=e.title,r=e.score,n=e.help,o=e.trend,i=e.trendStatus,c=e.className;return(0,u.BX)(m,{className:c,children:[(0,u.BX)(h,{children:[(0,u.tZ)(f,{children:t}),n&&(0,u.tZ)(a.Z,{title:n,size:"sm",position:"top"})]}),(0,u.BX)(g,{children:[(0,u.tZ)(y,{children:null!=r?r:"—"}),(0,l.ri)(o)&&(0,u.tZ)(v,{trendStatus:i,children:(0,u.tZ)(s.Z,{children:o})})]})]})}function p(e){switch(e.trendStatus){case"good":return e.theme.green300;case"bad":return e.theme.red300;default:return e.theme.gray300}}d.displayName="ScoreCard";var m=(0,n.Z)(o.s_,{target:"e179ouq55"})("display:flex;flex-direction:column;justify-content:space-between;padding:",(0,c.Z)(2)," ",(0,c.Z)(3),";min-height:96px;"),h=(0,n.Z)("div",{target:"e179ouq54"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,c.Z)(1),";align-items:center;width:fit-content;"),f=(0,n.Z)("div",{target:"e179ouq53"})(i.Z,";"),g=(0,n.Z)("div",{target:"e179ouq52"})({name:"ph5vh8",styles:"display:flex;flex-direction:row;align-items:flex-end;max-width:100%"}),y=(0,n.Z)("span",{target:"e179ouq51"})({name:"1ev0dst",styles:"flex-shrink:1;font-size:32px;line-height:1;white-space:nowrap"}),v=(0,n.Z)("div",{target:"e179ouq50"})("color:",p,";margin-left:",(0,c.Z)(1),";line-height:1;overflow:hidden;");const b=d},"./app/components/sentryDocumentTitle.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js");var n=r("../node_modules/react-document-title/index.js"),o=r.n(n),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){var t=e.title,r=e.orgSlug,n=e.projectSlug,s=e.children,i=r||n?r&&n?"".concat(t," - ").concat(r," - ").concat(n):r?"".concat(t," - ").concat(r):"".concat(t," - ").concat(n):t;return(0,a.tZ)(o(),{title:"".concat(i," - Sentry"),children:s})}s.displayName="SentryDocumentTitle";const i=s},"./app/views/organizationStats/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{OrganizationStats:()=>ut,default:()=>dt}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),s=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/react/index.js")),p=r("../node_modules/lodash/omit.js"),m=r.n(p),h=r("../node_modules/lodash/pick.js"),f=r.n(h),g=r("../node_modules/moment/moment.js"),y=r.n(g),v=r("./app/components/dropdownControl.tsx"),b=r("./app/components/errorBoundary.tsx"),j=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),Z=r("./app/components/organizations/timeRangeSelector/pageTimeRangeSelector.tsx"),x=r("./app/components/pageHeading.tsx"),D=r("./app/components/sentryDocumentTitle.tsx"),C=r("./app/constants/index.tsx"),O=r("./app/locale.tsx"),S=r("./app/styles/organization.tsx"),E=r("./app/styles/space.tsx"),T=r("./app/types/index.tsx"),P=r("./app/utils/withOrganization.tsx"),w=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),k=(r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js")),A=r("../node_modules/color/index.js"),R=r.n(A),_=r("./app/components/charts/baseChart.tsx"),L=r("./app/components/charts/components/legend.tsx"),I=r("./app/components/charts/components/tooltip.tsx"),z=r("./app/components/charts/components/xAxis.tsx"),N=r("./app/components/charts/series/barSeries.tsx"),U=r("./app/components/charts/styles.tsx"),M=r("./app/components/loadingIndicator.tsx"),B=r("./app/components/panels/panel.tsx"),q=r("./app/components/placeholder.tsx"),F=r("./app/icons/index.tsx"),X=r("./app/utils/dates.tsx"),H=r("./app/utils/formatters.tsx"),J=r("./app/utils/theme.tsx"),Q=(r("../node_modules/core-js/modules/es.number.to-fixed.js"),r("./app/components/charts/utils.tsx")),V=r("./app/utils.tsx"),G=Math.pow(10,6),Y=Math.pow(10,9),W=Math.pow(10,9);function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isAbbreviated:!1,useUnitScaling:!1};if(t!==T.cn.ATTACHMENTS)return r.isAbbreviated?ee(e):e.toLocaleString();if(r.useUnitScaling)return(0,V.E9)(e);var n=e/W;return r.isAbbreviated?"".concat(ee(n)," GB"):"".concat(n.toLocaleString(void 0,{maximumFractionDigits:2})," GB")}function $(e){return{isAbbreviated:e!==T.cn.ATTACHMENTS,useUnitScaling:e===T.cn.ATTACHMENTS}}function ee(e){return e>=Y?(e/Y).toLocaleString(void 0,{maximumFractionDigits:2})+"B":e>=G?(e/G).toLocaleString(void 0,{maximumFractionDigits:1})+"M":e>=1e3?(e/1e3).toFixed().toLocaleString()+"K":e.toFixed().toLocaleString()}var te="MMM D",re="MMM D LT";function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1d",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,X.YJ)(t)/24;if(n>=1)return y().utc(e).format(te);var o=(0,j.s)(t),a=r?y()(e).utc():y()(e).local();return o?"".concat(a.format(re)," - ").concat(a.add(o.period,o.periodLength).format("LT (Z)")):a.format(re)}function oe(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1d",a=[],s=y()(e).utc().startOf("h"),i=y()(t).startOf("h");if(!s.isValid()||!i.isValid())return a;for(var c=null!==(r=(0,j.s)(o))&&void 0!==r?r:{period:1,periodLength:"d"},l=c.period,u=c.periodLength;!s.isAfter(i);)a.push(ne(s,o,n)),s.add(l,u);return a}function ae(e){return e===T.cn.ATTACHMENTS?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return K(e,T.cn.ATTACHMENTS,{useUnitScaling:!0})}:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.toLocaleString()}}var se=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le,ue=R()(J.ZP.dataCategory.errors).lighten(.25).string(),de=R()(J.ZP.dataCategory.transactions).lighten(.35).string(),pe=R()(J.ZP.dataCategory.attachments).lighten(.65).string(),me=J.ZP.red300,he=J.ZP.gray100,fe=[{label:T.mL[T.cn.ERRORS],value:T.cn.ERRORS,disabled:!1},{label:T.mL[T.cn.TRANSACTIONS],value:T.cn.TRANSACTIONS,disabled:!1},{label:T.mL[T.cn.ATTACHMENTS],value:T.cn.ATTACHMENTS,disabled:!1}];!function(e){e.CUMULATIVE="cumulative",e.PERIODIC="periodic"}(le||(le={}));var ge,ye=[{label:(0,O.t)("Cumulative"),value:le.CUMULATIVE,disabled:!1},{label:(0,O.t)("Periodic"),value:le.PERIODIC,disabled:!1}];!function(e){e.ACCEPTED="Accepted",e.DROPPED="Dropped",e.PROJECTED="Projected"}(ge||(ge={}));var ve=function(e){(0,s.Z)(p,e);var t,r,u=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(){var e;(0,n.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,a.Z)(e),"state",{xAxisDates:[]}),e}return(0,o.Z)(p,[{key:"chartColors",get:function(){var e=this.props.dataCategory;return e===T.cn.ERRORS?[ue,me,he]:e===T.cn.ATTACHMENTS?[pe,me,he]:[de,me,he]}},{key:"chartMetadata",get:function(){var e=this.props,t=e.usageDateStart,r=e.usageDateEnd,n=this.props,o=n.usageDateInterval,a=n.usageStats,s=n.dataCategory,i=n.dataTransform,c=n.handleDataTransformation,l=this.state.xAxisDates,u=fe.find((function(e){return e.value===s}));if(!u)throw new Error("Selected item is not supported");var d=ce({},c(a,i));Object.keys(d).forEach((function(e){var t=e===ge.PROJECTED;d[e]=d[e].map((function(e){return ce(ce({},e),{},{tooltip:{show:!1},itemStyle:{opacity:t?.6:1}})}))}));var p=24*(0,X.Ri)(void 0,t,r),m=(0,X.YJ)(o);if(p<0||m<0)throw new Error("UsageChart: Unable to parse data time period");var h=function(e,t){return e>168?function(e,t){var r=e/24;if(r<=7)throw new Error("This method should be used for periods > 7 days");for(var n=r,o=n,a=[2,4,7,14],s=[1,2,7,7],i=0;i<a.length&&o>10;i++)o=n/a[i],n=r/s[i];return{xAxisTickInterval:t/n-1,xAxisLabelInterval:t/o-1}}(e,t):function(e,t){var r=e/24;if(r>7)throw new Error("This method should be used for periods <= 7 days");var n=t/r;return{xAxisTickInterval:n-1,xAxisLabelInterval:n-1}}(e,t)}(p,p/m),f=h.xAxisTickInterval,g=h.xAxisLabelInterval,y=u.label,v=u.value;return v===T.cn.ERRORS||v===T.cn.TRANSACTIONS?{chartLabel:y,chartData:d,xAxisData:l,xAxisTickInterval:f,xAxisLabelInterval:g,yAxisMinInterval:100,yAxisFormatter:H.Du,tooltipValueFormatter:ae(s)}:{chartLabel:y,chartData:d,xAxisData:l,xAxisTickInterval:f,xAxisLabelInterval:g,yAxisMinInterval:.5*W,yAxisFormatter:function(e){return K(e,T.cn.ATTACHMENTS,{isAbbreviated:!0,useUnitScaling:!0})},tooltipValueFormatter:ae(s)}}},{key:"chartSeries",get:function(){var e=this.props.chartSeries,t=this.chartMetadata.chartData,r=[(0,N.Z)({name:ge.ACCEPTED,data:t.accepted,barMinHeight:1,stack:"usage",legendHoverLink:!1}),(0,N.Z)({name:ge.DROPPED,data:t.dropped,stack:"usage",legendHoverLink:!1}),(0,N.Z)({name:ge.PROJECTED,data:t.projected,barMinHeight:1,stack:"usage",legendHoverLink:!1})];return e&&(r=r.concat(e)),r}},{key:"chartLegend",get:function(){var e=this.chartMetadata.chartData,t=[{name:ge.ACCEPTED}];return e.dropped.length>0&&t.push({name:ge.DROPPED}),e.projected.length>0&&t.push({name:ge.PROJECTED}),t}},{key:"chartTooltip",get:function(){var e=this.props.chartTooltip;if(e)return e;var t=this.chartMetadata.tooltipValueFormatter;return(0,I.Z)({trigger:"axis",valueFormatter:t})}},{key:"renderChart",value:function(){var e=this.props,t=e.theme,r=e.title,n=e.isLoading,o=e.isError,a=e.errors;if(n)return(0,se.tZ)(q.Z,{height:"200px",children:(0,se.tZ)(M.Z,{mini:!0})});if(o)return(0,se.BX)(q.Z,{height:"200px",children:[(0,se.tZ)(F.FC,{size:t.fontSizeExtraLarge}),(0,se.tZ)(Ze,{children:a&&Object.keys(a).map((function(e){var t;return(0,se.tZ)("span",{children:null===(t=a[e])||void 0===t?void 0:t.message},e)}))})]});var s=this.chartMetadata,i=s.xAxisData,c=s.xAxisTickInterval,l=s.xAxisLabelInterval,u=s.yAxisMinInterval,p=s.yAxisFormatter;return(0,se.BX)(d.Fragment,{children:[(0,se.tZ)(U.ws,{children:r||(0,O.t)("Current Usage Period")}),(0,se.tZ)(_.Z,{colors:this.chartColors,grid:{bottom:"3px",left:"0px",right:"10px",top:"40px"},xAxis:(0,z.Z)({show:!0,type:"category",name:"Date",boundaryGap:!0,data:i,axisTick:{interval:c,alignWithLabel:!0},axisLabel:{interval:l,formatter:function(e){return e.slice(0,6)}},theme:t}),yAxis:{min:0,minInterval:u,axisLabel:{formatter:p,color:t.chartLabel}},series:this.chartSeries,tooltip:this.chartTooltip,onLegendSelectChanged:function(){},legend:(0,L.Z)({right:10,top:5,data:this.chartLegend,theme:t})})]})}},{key:"render",value:function(){var e=this.props.footer;return(0,se.BX)(B.Z,{id:"usage-chart",children:[(0,se.tZ)(U.BO,{children:this.renderChart()}),e]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.usageDateStart,n=e.usageDateEnd,o=e.usageDateShowUtc,a=e.usageDateInterval;return ce(ce({},t),{},{xAxisDates:oe(r,n,o,a)})}}]),p}(d.Component);ve.displayName="UsageChart",(0,l.Z)(ve,"defaultProps",{usageDateShowUtc:!0,usageDateInterval:"1d",handleDataTransformation:function(e,t){var r={accepted:[],dropped:[],projected:[]},n=t===le.CUMULATIVE;return Object.keys(e).forEach((function(t){var o=0;r[t]=e[t].map((function(e){var t=(0,w.Z)(e.value,2),r=t[0],a=t[1];return o=n?o+a:a,ce(ce({},e),{},{value:[r,o]})}))})),r}});const be=(0,k.b)(ve);var je,Ze=(0,u.Z)("div",{target:"erx9nbs0"})("display:flex;flex-direction:column;margin-top:",(0,E.Z)(1),";font-size:",(function(e){return e.theme.fontSizeSmall}),";"),xe=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/@sentry/minimal/esm/index.js")),De=r("./app/components/asyncComponent.tsx"),Ce=r("./app/components/charts/optionSelector.tsx"),Oe=r("./app/components/notAvailable.tsx"),Se=r("./app/components/scoreCard.tsx");!function(e){e.ACCEPTED="accepted",e.FILTERED="filtered",e.INVALID="invalid",e.DROPPED="dropped",e.RATE_LIMITED="rate_limited"}(je||(je={})),r("../node_modules/core-js/modules/es.array.reduce.js");const Ee=function(e){(0,s.Z)(l,e);var t,r,a=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,n.Z)(this,l),a.apply(this,arguments)}return(0,o.Z)(l,[{key:"getEndpoints",value:function(){return[["orgStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){return{statsPeriod:"5m",interval:"1m",groupBy:["category","outcome"],field:["sum(quantity)"]}}},{key:"minuteData",get:function(){var e=this.props.dataCategory,t=this.state,r=t.loading,n=t.error,o=t.orgStats;if(!r&&!n&&o&&0!==o.intervals.length){var a=o.intervals,s=o.groups,i=Math.max(a.length-2,0);return K(s.reduce((function(t,r){var n=r.by,o=n.outcome,a=n.category;return e.includes("".concat(a))&&o===je.ACCEPTED?t+=r.series["sum(quantity)"][i]:t}),0),e,$(e))}}},{key:"renderComponent",value:function(){return this.minuteData?(0,se.BX)(Te,{children:[this.minuteData," ",(0,O.t)("in last min")]}):null}}]),l}(De.Z);var Te=(0,u.Z)("div",{target:"e2asf1f0"})("display:inline-block;color:",(function(e){return e.theme.success}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";");function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ke=function(e){(0,s.Z)(p,e);var t,r,u=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(){var e;(0,n.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,a.Z)(e),"renderChartFooter",(function(){var t=e.props.handleChangeState,r=e.state,n=r.loading,o=r.error,a=e.chartData,s=a.chartDateInterval,i=a.chartTransform,c=a.chartDateStartDisplay,l=a.chartDateEndDisplay,u=a.chartDateTimezoneDisplay;return(0,se.BX)(_e,{children:[(0,se.tZ)(U.m2,{children:(0,se.BX)(Le,{children:[(0,se.tZ)(U.OT,{children:(0,O.t)("Date Range:")}),(0,se.tZ)("span",{children:n||o?(0,se.tZ)(Oe.Z,{}):(0,O._N)("[start] — [end] ([timezone] UTC, [interval] interval)",{start:c,end:l,timezone:u,interval:s})})]})}),(0,se.tZ)(U.m2,{children:(0,se.tZ)(Ce.Z,{title:(0,O.t)("Type"),selected:i,options:ye,onChange:function(e){return t({transform:e})}})})]})})),e}return(0,o.Z)(p,[{key:"componentDidUpdate",value:function(e){var t=e.dataDatetime,r=this.props.dataDatetime;t.start===r.start&&t.end===r.end&&t.period===r.period&&t.utc===r.utc||this.reloadData()}},{key:"getEndpoints",value:function(){return[["orgStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){var e=this.props.dataDatetime;return we(we({},e.start&&e.end?{start:e.start,end:e.end,utc:e.utc}:{statsPeriod:e.period||C.GY}),{},{interval:(0,Q.EX)(e),groupBy:["category","outcome"],field:["sum(quantity)"]})}},{key:"chartData",get:function(){var e=this.state.orgStats;return we(we(we({},this.mapSeriesToChart(e)),this.chartDateRange),this.chartTransform)}},{key:"chartTransform",get:function(){var e=this.props.chartTransform;switch(e){case le.CUMULATIVE:case le.PERIODIC:return{chartTransform:e};default:return{chartTransform:le.PERIODIC}}}},{key:"chartDateRange",get:function(){var e=this.state.orgStats,t=this.props.dataDatetime,r=(0,Q.EX)(t);if(!e||!e.intervals)return{chartDateInterval:r,chartDateStart:"",chartDateEnd:"",chartDateUtc:!0,chartDateStartDisplay:"",chartDateEndDisplay:"",chartDateTimezoneDisplay:""};var n=e.intervals,o=(0,X.YJ)(r),a=y()(n[0]).utc(),s=n.length<2?y()(a):y()(n[n.length-1]).utc(),i=function(e){if(e.utc)return!0;var t=(0,Q.EX)(e);return(0,X.YJ)(t)>=24}(t),c=o>=24?te:re,l=y()(a),u=y()(s),d=i?y()(a).utc():y()(a).local(),p=i?y()(s).utc():y()(s).local();return o<24&&p.add(o,"h"),{chartDateInterval:r,chartDateStart:l.format(),chartDateEnd:u.format(),chartDateUtc:i,chartDateStartDisplay:d.format(c),chartDateEndDisplay:p.format(c),chartDateTimezoneDisplay:d.format("Z")}}},{key:"mapSeriesToChart",value:function(e){var t=this,r={total:void 0,accepted:void 0,dropped:void 0,filtered:void 0},n={accepted:[],dropped:[],projected:[]};if(!e)return{cardStats:r,chartStats:n};try{var o,a=this.props.dataCategory,s=this.chartDateRange,i=s.chartDateInterval,c=s.chartDateUtc,u=e.intervals.map((function(e){return{date:ne(y()(e),i,c),total:0,accepted:0,filtered:0,dropped:{total:0}}})),d=(o={total:0},(0,l.Z)(o,je.ACCEPTED,0),(0,l.Z)(o,je.FILTERED,0),(0,l.Z)(o,je.DROPPED,0),(0,l.Z)(o,je.INVALID,0),(0,l.Z)(o,je.RATE_LIMITED,0),o);return e.groups.forEach((function(e){var t=e.by,r=t.outcome,n=t.category;a.includes("".concat(n))&&(d.total+=e.totals["sum(quantity)"],d[r]+=e.totals["sum(quantity)"],e.series["sum(quantity)"].forEach((function(e,t){r!==je.ACCEPTED&&r!==je.FILTERED?u[t].dropped.total+=e:u[t][r]+=e})))})),d[je.DROPPED]+=d[je.INVALID],d[je.DROPPED]+=d[je.RATE_LIMITED],u.forEach((function(e){e.total=e.accepted+e.filtered+e.dropped.total,n.accepted.push({value:[e.date,e.accepted]}),n.dropped.push({value:[e.date,e.dropped.total]})})),{cardStats:{total:K(d.total,a,$(a)),accepted:K(d[je.ACCEPTED],a,$(a)),dropped:K(d[je.DROPPED],a,$(a)),filtered:K(d[je.FILTERED],a,$(a))},chartStats:n}}catch(o){return xe.$e((function(r){r.setContext("query",t.endpointQuery),r.setContext("body",e),xe.Tb(o)})),{cardStats:r,chartStats:n,dataError:new Error("Failed to parse stats data")}}}},{key:"renderCards",value:function(){var e=this.props,t=e.dataCategory,r=e.dataCategoryName,n=e.organization,o=this.state.loading,a=this.chartData.cardStats,s=a.total,i=a.accepted,c=a.dropped,l=a.filtered;return[{title:(0,O._N)("Total [dataCategory]",{dataCategory:r}),value:s},{title:(0,O.t)("Accepted"),help:(0,O._N)("Accepted [dataCategory] were successfully processed by Sentry",{dataCategory:t}),value:i,secondaryValue:(0,se.tZ)(Ee,{organization:n,dataCategory:t})},{title:(0,O.t)("Filtered"),help:(0,O._N)("Filtered [dataCategory] were blocked due to your inbound data filter rules",{dataCategory:t}),value:l},{title:(0,O.t)("Dropped"),help:(0,O._N)("Dropped [dataCategory] were discarded due to invalid data, rate-limits, quota limits, or spike protection",{dataCategory:t}),value:c}].map((function(e,t){return(0,se.tZ)(Ae,{title:e.title,score:o?void 0:e.value,help:e.help,trend:e.secondaryValue},t)}))}},{key:"renderChart",value:function(){var e=this.props.dataCategory,t=this.state,r=t.error,n=t.errors,o=t.loading,a=this.chartData,s=a.chartStats,i=a.dataError,c=a.chartDateInterval,l=a.chartDateStart,u=a.chartDateEnd,d=a.chartDateUtc,p=a.chartTransform,m=r||!!i,h=i?we(we({},n),{},{data:i}):n;return(0,se.tZ)(be,{isLoading:o,isError:m,errors:h,title:" ",footer:this.renderChartFooter(),dataCategory:e,dataTransform:p,usageDateStart:l,usageDateEnd:u,usageDateShowUtc:d,usageDateInterval:c,usageStats:s})}},{key:"renderComponent",value:function(){return(0,se.BX)(d.Fragment,{children:[this.renderCards(),(0,se.tZ)(Re,{children:this.renderChart()})]})}}]),p}(De.Z);var Ae=(0,u.Z)(Se.ZP,{target:"e2z08b03"})({name:"14rqsjo",styles:"grid-column:auto/span 1;margin:0"}),Re=(0,u.Z)("div",{target:"e2z08b02"})({name:"18iuzk9",styles:"grid-column:1/-1"}),_e=(0,u.Z)("div",{target:"e2z08b01"})("display:flex;flex-direction:row;justify-content:space-between;padding:",(0,E.Z)(1)," ",(0,E.Z)(3),";border-top:1px solid ",(function(e){return e.theme.border}),";"),Le=(0,u.Z)("div",{target:"e2z08b00"})("display:flex;flex-direction:row;align-items:center;>",U.OT,"{margin-right:",(0,E.Z)(1.5),";}>span:last-child{font-weight:400;font-size:",(function(e){return e.theme.fontSizeMedium}),";}"),Ie=(r("../node_modules/core-js/modules/es.number.constructor.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.split.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.date.to-string.js"),r("../node_modules/core-js/modules/es.regexp.to-string.js"),r("./app/components/gridEditable/sortLink.tsx")),ze=r("./app/components/pagination/index.tsx"),Ne=r("./app/components/searchBar.tsx"),Ue=r("./app/utils/withProjects.tsx"),Me=r("./app/components/charts/errorPanel.tsx"),Be=r("./app/components/idBadge/index.tsx"),qe=r("./app/components/links/externalLink.tsx"),Fe=r("./app/components/links/link.tsx"),Xe=r("./app/components/organizations/headerItem.tsx"),He=r("./app/components/panels/index.tsx"),Je=r("./app/components/panels/panelTable.tsx"),Qe=r("./app/views/settings/components/emptyMessage.tsx");var Ve="https://docs.sentry.io/product/accounts/membership/#restricting-access",Ge=function(e){(0,s.Z)(d,e);var t,r,u=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function d(){var e;(0,n.Z)(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,a.Z)(e),"getErrorMessage",(function(e){return"No projects available"===e.projectStats.responseJSON.detail?(0,se.tZ)(Qe.Z,{icon:(0,se.tZ)(F.FC,{color:"gray300",size:"48"}),title:(0,O.t)("You don't have access to any projects, or your organization has no projects."),description:(0,O._N)("Learn more about [link:Project Access]",{link:(0,se.tZ)(qe.Z,{href:Ve})})}):(0,se.tZ)(F.FC,{color:"gray300",size:"48"})})),e}return(0,o.Z)(d,[{key:"formatUsageOptions",get:function(){var e=this.props.dataCategory;return{isAbbreviated:e!==T.cn.ATTACHMENTS,useUnitScaling:e===T.cn.ATTACHMENTS}}},{key:"renderTableRow",value:function(e){var t=this.props.dataCategory,r=e.project,n=e.total,o=e.accepted,a=e.filtered,s=e.dropped;return[(0,se.BX)(et,{children:[(0,se.tZ)(Fe.Z,{to:e.projectLink,children:(0,se.tZ)(tt,{avatarSize:16,disableLink:!0,hideOverflow:!0,project:r,displayName:r.slug})}),(0,se.tZ)(Xe.c,{to:e.projectSettingsLink,children:(0,se.tZ)(F.iC,{size:J.ZP.iconSizes.sm})})]},0),(0,se.tZ)($e,{children:K(n,t,this.formatUsageOptions)},1),(0,se.tZ)($e,{children:K(o,t,this.formatUsageOptions)},2),(0,se.tZ)($e,{children:K(a,t,this.formatUsageOptions)},3),(0,se.tZ)($e,{children:K(s,t,this.formatUsageOptions)},4)]}},{key:"render",value:function(){var e=this,t=this.props,r=t.isEmpty,n=t.isLoading,o=t.isError,a=t.errors,s=t.headers,i=t.usageStats;return o?(0,se.tZ)(He.s_,{children:(0,se.tZ)(Me.Z,{height:"256px",children:this.getErrorMessage(a)})}):(0,se.tZ)(Ke,{isLoading:n,isEmpty:r,headers:s,children:i.map((function(t){return e.renderTableRow(t)}))})}}]),d}(d.Component);Ge.displayName="UsageTable";const Ye=Ge;var We,Ke=(0,u.Z)(Je.Z,{target:"e5qzo7m4"})("grid-template-columns:repeat(5, auto);@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:auto repeat(4, 100px);}"),$e=(0,u.Z)("div",{target:"e5qzo7m3"})({name:"1xis4j3",styles:"flex-shrink:1;text-align:right"}),et=(0,u.Z)($e,{target:"e5qzo7m2"})({name:"1axuxrw",styles:"display:flex;align-items:center;text-align:left"}),tt=(0,u.Z)(Be.Z,{target:"e5qzo7m0"})({name:"ri00hy",styles:"overflow:hidden;white-space:nowrap;flex-shrink:1"});function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.PROJECT="project",e.TOTAL="total",e.ACCEPTED="accepted",e.FILTERED="filtered",e.DROPPED="dropped",e.INVALID="invalid",e.RATE_LIMITED="rate_limited"}(We||(We={}));var ot=function(e){(0,s.Z)(p,e);var t,r,u=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(){var e;(0,n.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,a.Z)(e),"handleChangeSort",(function(t){var r=e.props.handleChangeState,n=e.tableSort,o=n.key,a=n.direction,s=1;return o===t?s=-1*a:t===We.PROJECT&&(s=-1),r({sort:"".concat(s>0?"-":"").concat(t)},{willUpdateRouter:!1})})),(0,l.Z)((0,a.Z)(e),"handleSearch",(function(t){var r=e.props,n=r.handleChangeState;t!==r.tableQuery&&n(t?{query:t,cursor:void 0}:{query:void 0,cursor:void 0})})),e}return(0,o.Z)(p,[{key:"componentDidUpdate",value:function(e){var t=e.dataDatetime,r=e.dataCategory,n=this.props,o=n.dataDatetime,a=n.dataCategory;t.start===o.start&&t.end===o.end&&t.period===o.period&&t.utc===o.utc&&a===r||this.reloadData()}},{key:"getEndpoints",value:function(){return[["projectStats",this.endpointPath,{query:this.endpointQuery}]]}},{key:"endpointPath",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/stats_v2/")}},{key:"endpointQuery",get:function(){var e=this.props,t=e.dataDatetime,r=e.dataCategory;return nt(nt({},t.start&&t.end?{start:t.start,end:t.end,utc:t.utc}:{statsPeriod:t.period||C.GY}),{},{interval:"1d",groupBy:["outcome","project"],field:["sum(quantity)"],project:"-1",category:r.slice(0,-1)})}},{key:"tableData",get:function(){var e=this.state.projectStats;return nt({headers:this.tableHeader},this.mapSeriesToTable(e))}},{key:"tableSort",get:function(){var e=this.props.tableSort;if(!e)return{key:We.TOTAL,direction:1};var t=e,r=-1;switch("-"===e.charAt(0)&&(t=t.slice(1),r=1),t){case We.PROJECT:case We.TOTAL:case We.ACCEPTED:case We.FILTERED:case We.DROPPED:return{key:t,direction:r};default:return{key:We.ACCEPTED,direction:-1}}}},{key:"tableCursor",get:function(){var e=this.props.tableCursor,t=Number(null==e?void 0:e.split(":")[1]);return isNaN(t)?0:t}},{key:"pageLink",get:function(){var e=this.filteredProjects.length,t=this.tableCursor,r=t-p.MAX_ROWS_USAGE_TABLE,n=t+p.MAX_ROWS_USAGE_TABLE;return'<link>; rel="previous"; results="'.concat(r>=0,'"; cursor="0:').concat(Math.max(0,r),':1", <link>; rel="next"; results="').concat(n<e,'"; cursor="0:').concat(n,':0"')}},{key:"filteredProjects",get:function(){var e=this.props,t=e.projects,r=e.tableQuery;return r?t.filter((function(e){return e.slug.includes(r)&&e.hasAccess})):t.filter((function(e){return e.hasAccess}))}},{key:"tableHeader",get:function(){var e=this,t=this.tableSort,r=t.key,n=t.direction,o=function(e){if(e===r)return n>0?"desc":"asc"};return[{key:We.PROJECT,title:(0,O.t)("Project"),align:"left",direction:o(We.PROJECT),onClick:function(){return e.handleChangeSort(We.PROJECT)}},{key:We.TOTAL,title:(0,O.t)("Total"),align:"right",direction:o(We.TOTAL),onClick:function(){return e.handleChangeSort(We.TOTAL)}},{key:We.ACCEPTED,title:(0,O.t)("Accepted"),align:"right",direction:o(We.ACCEPTED),onClick:function(){return e.handleChangeSort(We.ACCEPTED)}},{key:We.FILTERED,title:(0,O.t)("Filtered"),align:"right",direction:o(We.FILTERED),onClick:function(){return e.handleChangeSort(We.FILTERED)}},{key:We.DROPPED,title:(0,O.t)("Dropped"),align:"right",direction:o(We.DROPPED),onClick:function(){return e.handleChangeSort(We.DROPPED)}}].map((function(e){var t=e.key===We.PROJECT?et:$e;return(0,se.tZ)(t,{children:(0,se.tZ)(Ie.Z,{canSort:!0,title:e.title,align:e.align,direction:e.direction,generateSortLink:e.onClick})},e.key)}))}},{key:"getProjectLink",value:function(e){var t=this.props,r=t.dataCategory,n=t.getNextLocations,o=t.organization,a=n(e),s=a.performance,i=a.projectDetail,c=a.settings;return r===T.cn.TRANSACTIONS&&o.features.includes("performance-view")?{projectLink:s,projectSettingsLink:c}:{projectLink:i,projectSettingsLink:c}}},{key:"mapSeriesToTable",value:function(e){var t=this;if(!e)return{tableStats:[]};var r={};try{var n,o=(n={},(0,l.Z)(n,We.TOTAL,0),(0,l.Z)(n,We.ACCEPTED,0),(0,l.Z)(n,We.FILTERED,0),(0,l.Z)(n,We.DROPPED,0),n),a=this.filteredProjects,s=new Set(a.map((function(e){return e.id})));e.groups.forEach((function(e){var t=e.by,n=t.outcome,a=t.project;s.has(a.toString())&&(r[a]||(r[a]=nt({},o)),r[a].total+=e.totals["sum(quantity)"],n===We.ACCEPTED||n===We.FILTERED||n===We.DROPPED?r[a][n]+=e.totals["sum(quantity)"]:r[a][We.DROPPED]+=e.totals["sum(quantity)"])}));var i=a.map((function(e){var n,a=null!==(n=r[e.id])&&void 0!==n?n:nt({},o);return nt(nt({project:nt({},e)},t.getProjectLink(e)),a)})),c=this.tableSort,u=c.key,d=c.direction;i.sort((function(e,t){return u===We.PROJECT?t.project.slug.localeCompare(e.project.slug)*d:e[u]!==t[u]?(t[u]-e[u])*d:e.project.slug.localeCompare(t.project.slug)}));var m=this.tableCursor;return{tableStats:i.slice(m,m+p.MAX_ROWS_USAGE_TABLE)}}catch(r){return xe.$e((function(n){n.setContext("query",t.endpointQuery),n.setContext("body",e),xe.Tb(r)})),{tableStats:[],error:r}}}},{key:"renderComponent",value:function(){var e=this.state,t=e.error,r=e.errors,n=e.loading,o=this.props,a=o.dataCategory,s=o.loadingProjects,i=o.tableQuery,c=this.tableData,l=c.headers,u=c.tableStats;return(0,se.BX)(d.Fragment,{children:[(0,se.tZ)(st,{children:(0,se.tZ)(Ne.Z,{defaultQuery:"",query:i,placeholder:(0,O.t)("Filter your projects"),onSearch:this.handleSearch})}),(0,se.BX)(st,{children:[(0,se.tZ)(Ye,{isLoading:n||s,isError:t,errors:r,isEmpty:0===u.length,headers:l,dataCategory:a,usageStats:u}),(0,se.tZ)(ze.Z,{pageLinks:this.pageLink})]})]})}}]),p}(De.Z);(0,l.Z)(ot,"MAX_ROWS_USAGE_TABLE",25);const at=(0,Ue.Z)(ot);var st=(0,u.Z)("div",{target:"e1ii6wy90"})({name:"18iuzk9",styles:"grid-column:1/-1"});function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lt=["pageStatsPeriod","pageStart","pageEnd","pageUtc","dataCategory","transform","sort","query","cursor"],ut=function(e){(0,s.Z)(p,e);var t,r,u=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(){var e;(0,n.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,a.Z)(e),"getNextLocations",(function(t){var r=e.props,n=r.location,o=r.organization,a=ct(ct({},n),{},{query:ct(ct({},n.query),{},{project:t.id})});return a.query=m()(a.query,lt),{performance:ct(ct({},a),{},{pathname:"/organizations/".concat(o.slug,"/performance/")}),projectDetail:ct(ct({},a),{},{pathname:"/organizations/".concat(o.slug,"/projects/").concat(t.slug,"/")}),issueList:ct(ct({},a),{},{pathname:"/organizations/".concat(o.slug,"/issues/")}),settings:{pathname:"/settings/".concat(o.slug,"/projects/").concat(t.slug,"/")}}})),(0,l.Z)((0,a.Z)(e),"handleUpdateDatetime",(function(t){var r=t.start,n=t.end,o=t.relative,a=t.utc;if(r&&n){var s=a?y().utc:y();return e.setStateOnUrl({pageStatsPeriod:void 0,pageStart:s(r).format(),pageEnd:s(n).format(),pageUtc:null!=a?a:void 0})}return e.setStateOnUrl({pageStatsPeriod:o||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0})})),(0,l.Z)((0,a.Z)(e),"setStateOnUrl",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{willUpdateRouter:!0},n=e.props,o=n.location,a=n.router,s=f()(t,lt),i=ct(ct({},o),{},{query:ct(ct({},null==o?void 0:o.query),s)});return r.willUpdateRouter&&a.push(i),i})),(0,l.Z)((0,a.Z)(e),"renderPageControl",(function(){var t=e.props.organization,r=e.dataDatetime,n=r.start,o=r.end,a=r.period,s=r.utc;return(0,se.BX)(d.Fragment,{children:[(0,se.tZ)(ht,{organization:t,relative:null!=a?a:"",start:null!=n?n:null,end:null!=o?o:null,utc:null!=s?s:null,onUpdate:e.handleUpdateDatetime,relativeOptions:m()(C.wh,["1h"])}),(0,se.tZ)(mt,{label:(0,se.BX)(ft,{children:[(0,se.tZ)("span",{children:(0,O.t)("Event Type: ")}),(0,se.tZ)("span",{children:e.dataCategoryName})]}),children:fe.map((function(t){return(0,se.tZ)(v.hP,{eventKey:t.value,onSelect:function(t){return e.setStateOnUrl({dataCategory:t})},children:t.label},t.value)}))})]})})),e}return(0,o.Z)(p,[{key:"dataCategory",get:function(){var e,t,r=null===(e=this.props.location)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.dataCategory;switch(r){case T.cn.ERRORS:case T.cn.TRANSACTIONS:case T.cn.ATTACHMENTS:return r;default:return T.cn.ERRORS}}},{key:"dataCategoryName",get:function(){var e,t=this.dataCategory;return null!==(e=T.mL[t])&&void 0!==e?e:(0,O.t)("Unknown Data Category")}},{key:"dataDatetime",get:function(){var e,t,r=null!==(e=null===(t=this.props.location)||void 0===t?void 0:t.query)&&void 0!==e?e:{},n=(0,j.Q)(r,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0}),o=n.start,a=n.end,s=n.statsPeriod,i=n.utc;if(!s&&!o&&!a)return{period:C.GY};if(s)return{period:s};var c="true"===i;return o&&a?c?{start:y().utc(o).format(),end:y().utc(a).format(),utc:c}:{start:y()(o).utc().format(),end:y()(a).utc().format(),utc:c}:{period:C.GY}}},{key:"chartTransform",get:function(){var e,t;return null===(e=this.props.location)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.transform}},{key:"tableSort",get:function(){var e,t;return null===(e=this.props.location)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.sort}},{key:"tableQuery",get:function(){var e,t;return null===(e=this.props.location)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.query}},{key:"tableCursor",get:function(){var e,t;return null===(e=this.props.location)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.cursor}},{key:"render",value:function(){var e=this.props.organization;return(0,se.tZ)(D.Z,{title:"Usage Stats",children:(0,se.BX)(S.JH,{children:[(0,se.tZ)(S.mr,{children:(0,se.tZ)(x.Z,{children:(0,O.t)("Organization Usage Stats")})}),(0,se.tZ)("p",{children:(0,O.t)("We collect usage metrics on three types of events: errors, transactions, and attachments. The charts below reflect events that Sentry has received across your entire organization. You can also find them broken down by project in the table.")}),(0,se.BX)(pt,{children:[this.renderPageControl(),(0,se.tZ)(b.Z,{mini:!0,children:(0,se.tZ)(ke,{organization:e,dataCategory:this.dataCategory,dataCategoryName:this.dataCategoryName,dataDatetime:this.dataDatetime,chartTransform:this.chartTransform,handleChangeState:this.setStateOnUrl})}),(0,se.tZ)(b.Z,{mini:!0,children:(0,se.tZ)(at,{organization:e,dataCategory:this.dataCategory,dataCategoryName:this.dataCategoryName,dataDatetime:this.dataDatetime,tableSort:this.tableSort,tableQuery:this.tableQuery,tableCursor:this.tableCursor,handleChangeState:this.setStateOnUrl,getNextLocations:this.getNextLocations})})]})]})})}}]),p}(d.Component);ut.displayName="OrganizationStats";const dt=(0,P.Z)(ut);var pt=(0,u.Z)("div",{target:"eonnbv93"})("display:grid;grid-template-columns:1fr;grid-gap:",(0,E.Z)(2),";@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:repeat(4, 1fr);}"),mt=(0,u.Z)(v.ZP,{target:"eonnbv92"})("height:42px;grid-column:auto/span 1;justify-self:stretch;align-self:stretch;button{width:100%;height:100%;>span{display:flex;justify-content:space-between;}}@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-column:auto/span 2;}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-column:auto/span 1;}"),ht=(0,u.Z)(Z.Z,{target:"eonnbv91"})("grid-column:auto/span 1;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-column:auto/span 2;}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-column:auto/span 3;}"),ft=(0,u.Z)("span",{target:"eonnbv90"})("text-align:left;font-weight:600;color:",(function(e){return e.theme.textColor}),";>span:last-child{font-weight:400;}")}}]);
//# sourceMappingURL=../sourcemaps/OrganizationStats.330853f1eacec17e23ea6aa3afa52662.js.map