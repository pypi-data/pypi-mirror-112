(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx"],{"./app/components/events/searchBar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>V}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n,o=r("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(r("../node_modules/core-js/modules/es.regexp.constructor.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.regexp.to-string.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.object.assign.js"),r("../node_modules/react/index.js")),m=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),f=r("../node_modules/lodash/assign.js"),h=r.n(f),j=r("../node_modules/lodash/flatten.js"),b=r.n(j),g=r("../node_modules/lodash/isEqual.js"),v=r.n(g),y=r("../node_modules/lodash/memoize.js"),Z=r.n(y),O=r("../node_modules/lodash/omit.js"),w=r.n(O),_=r("./app/actionCreators/tags.tsx"),k=r("./app/components/smartSearchBar/index.tsx"),x=r("./app/constants/index.tsx"),P=r("./app/types/index.tsx"),C=r("./app/utils.tsx"),S=r("./app/utils/discover/fields.tsx"),T=r("./app/utils/measurements/measurements.tsx"),E=r("./app/utils/withApi.tsx"),D=r("./app/utils/withTags.tsx"),F=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=new RegExp("^".concat(x.c$,"|\\").concat(x.ir),"g"),N=function(e){(0,u.Z)(f,e);var t,r,p=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function f(){var e;(0,s.Z)(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,c.Z)((0,i.Z)(e),"getEventFieldValues",Z()((function(t,r,n){var o=e.props,s=o.api,a=o.organization,i=o.projectIds,u=null==i?void 0:i.map(String);return(0,S.h1)(t.key)||(0,S.Xr)(t.key)?Promise.resolve([]):(0,_.Fo)(s,a.slug,t.key,r,u,n,!0).then((function(e){return b()(e.filter((function(e){var t=e.name;return(0,C.ri)(t)})).map((function(e){return e.name})))}),(function(){throw new Error("Unable to fetch event field values")}))}),(function(e,t){var r=e.key;return"".concat(r,"-").concat(t)}))),(0,c.Z)((0,i.Z)(e),"prepareQuery",(function(e){return e.replace(A,"")})),e}return(0,a.Z)(f,[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}},{key:"componentDidUpdate",value:function(e){var t,r;v()(this.props.projectIds,e.projectIds)||null===(t=(r=this.getEventFieldValues.cache).clear)||void 0===t||t.call(r)}},{key:"getTagList",value:function(e){var t=this.props,r=t.fields,n=t.organization,o=t.tags,s=t.omitTags,a=r?Object.fromEntries(r.filter((function(e){return!Object.keys(S.wZ).includes(e.field)&&!(0,S.GO)(e.field)})).map((function(e){return[e.field,{key:e.field,name:e.field}]}))):{},i=n.features.includes("performance-view")?Object.assign({},e,S.wZ,a):w()(S.wZ,S.J8),u=h()({},o,i);return u.has={key:"has",name:"Has property",values:Object.keys(u),predefined:!0},w()(u,null!=s?s:[])}},{key:"render",value:function(){var e=this,t=this.props.organization;return(0,F.tZ)(T.Z,{organization:t,children:function(t){var r=t.measurements,s=e.getTagList(r);return(0,F.tZ)(m.ms,{children:function(t){var r=t.css;return(0,F.tZ)(k.Z,R(R({},e.props),{},{hasRecentSearches:!0,savedSearchType:P.L4.EVENT,onGetTagValues:e.getEventFieldValues,supportedTags:s,prepareQuery:e.prepareQuery,excludeEnvironment:!0,dropdownClassName:r(n||(n=(0,o.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))}))}})}})}}]),f}(p.PureComponent);N.displayName="SearchBar";const V=(0,E.Z)((0,D.Z)(N))},"./app/utils/measurements/measurements.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js"),r("../node_modules/react/index.js")),a=r("./app/utils/performance/vitals/constants.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,o.Z)(e,2),r=t[0];return[r,{name:t[1].name,key:r}]})))}var c=d(a.T),p=d(a.r);function m(e){var t=e.organization,r=e.children,n=t.features.includes("performance-mobile-vitals")?l(l({},p),c):p;return(0,i.tZ)(s.Fragment,{children:r({measurements:n})})}m.displayName="Measurements";const f=m},"./app/utils/withTags.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),p=r("./app/stores/tagStore.tsx"),m=r("./app/utils/getDisplayName.tsx"),f=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),h=["tags"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(e){var t=function(t){(0,i.Z)(j,t);var r,c,m=(r=j,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(r);if(c){var n=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function j(){var e;(0,o.Z)(this,j);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=m.call.apply(m,[this].concat(r)),(0,d.Z)((0,a.Z)(e),"state",{tags:p.Z.getAllTags()}),(0,d.Z)((0,a.Z)(e),"unsubscribe",p.Z.listen((function(t){return e.setState({tags:t})}),void 0)),e}return(0,s.Z)(j,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this.props,r=t.tags,o=(0,n.Z)(t,h);return(0,f.tZ)(e,b({},b({tags:null!=r?r:this.state.tags},o)))}}]),j}(c.Component);return t.displayName="WithTags",(0,d.Z)(t,"displayName","withTags(".concat((0,m.Z)(e),")")),t}},"./app/views/eventsV2/table/queryField.tsx":(e,t,r)=>{"use strict";r.d(t,{q:()=>J}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.array.index-of.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/core-js/modules/es.object.assign.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/react/index.js")),m=r("../node_modules/react-select/dist/chunk-80640036.browser.esm.js"),f=r("../node_modules/lodash/cloneDeep.js"),h=r.n(f),j=r("./app/components/forms/selectControl.tsx"),b=r("./app/components/tag.tsx"),g=r("./app/locale.tsx"),v=r("./app/styles/space.tsx"),y=r("./app/views/settings/components/forms/controls/input.tsx"),Z=(r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.symbol.iterator.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.is-array.js"),r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),O=(r("../node_modules/core-js/modules/es.array.flat.js"),r("../node_modules/core-js/modules/es.string.match-all.js"),r("../node_modules/core-js/modules/es.string.search.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/lodash/isEqual.js")),w=r.n(O),_=r("./app/styles/overflowEllipsis.tsx"),k=r("./app/utils/discover/fields.tsx"),x=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),P=["onUpdate","options"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){(0,i.Z)(m,e);var t,r,c=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),(0,d.Z)((0,a.Z)(e),"state",{query:e.props.value,partialTerm:null,rawOptions:e.props.options,dropdownVisible:!1,dropdownOptionGroups:N(e.props.options,null),activeSelection:-1}),(0,d.Z)((0,a.Z)(e),"input",(0,p.createRef)()),(0,d.Z)((0,a.Z)(e),"blur",(function(){var t;null===(t=e.input.current)||void 0===t||t.blur()})),(0,d.Z)((0,a.Z)(e),"focus",(function(t){var r,n;null===(r=e.input.current)||void 0===r||r.focus(),null===(n=e.input.current)||void 0===n||n.setSelectionRange(t,t)})),(0,d.Z)((0,a.Z)(e),"handleChange",(function(t){var r=t.target.value.replace("\n","");e.setState({query:r},e.updateAutocompleteOptions)})),(0,d.Z)((0,a.Z)(e),"handleClick",(function(){e.updateAutocompleteOptions()})),(0,d.Z)((0,a.Z)(e),"handleFocus",(function(){e.setState({dropdownVisible:!0})})),(0,d.Z)((0,a.Z)(e),"handleBlur",(function(){e.props.onUpdate(e.state.query),e.setState({dropdownVisible:!1})})),(0,d.Z)((0,a.Z)(e),"handleKeyDown",(function(t){var r=t.key,n=e.props.options,o=e.state,s=o.activeSelection,a=o.partialTerm,i=s>=0;if("ArrowDown"===r||"ArrowUp"===r){t.preventDefault();var u,l=N(n,a),d=l.map((function(e){return e.options})).flat();return d[u=i?"ArrowUp"===r?(s-1+d.length)%d.length:(s+1)%d.length:"ArrowUp"===r?d.length-1:0].active=!0,void e.setState({activeSelection:u,dropdownOptionGroups:l})}if(!i||"Tab"!==r&&"Enter"!==r)"Enter"!==r||e.blur();else{t.preventDefault();var c=e.getSelection(s);c&&e.handleSelect(c)}})),(0,d.Z)((0,a.Z)(e),"handleKeyUp",(function(t){"Escape"===t.key&&(t.preventDefault(),e.state.activeSelection>=0||e.blur())})),(0,d.Z)((0,a.Z)(e),"handleSelect",(function(t){var r=e.splitQuery(),n=r.prefix,o=r.suffix;e.setState({query:"".concat(n).concat(t.value," ").concat(o),activeSelection:-1},(function(){e.focus(n.length+t.value.length+1),e.updateAutocompleteOptions()}))})),e}return(0,s.Z)(m,[{key:"getCursorPosition",value:function(){var e,t;return null!==(e=null===(t=this.input.current)||void 0===t?void 0:t.selectionStart)&&void 0!==e?e:-1}},{key:"splitQuery",value:function(){var e=this.state.query,t=this.getCursorPosition(),r=(0,Z.Z)(e.substring(0,t).matchAll(/\s|^/g)),n=r[r.length-1],o=""===n[0]?0:(n.index||0)+1,s=e.slice(t).search(/\s|$/),a=t+(-1===s?0:s);return{startOfTerm:o,endOfTerm:a,prefix:e.substring(0,o),term:e.substring(o,a),suffix:e.substring(a)}}},{key:"getSelection",value:function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw s}}}}(this.state.dropdownOptionGroups);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!(e>=n.options.length))return n.options[e];e-=n.options.length}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"updateAutocompleteOptions",value:function(){var e=this.props.options,t=this.splitQuery().term||null;this.setState({dropdownOptionGroups:N(e,t),partialTerm:t})}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,e.options,(0,n.Z)(e,P)),r=this.state,o=r.dropdownVisible,s=r.dropdownOptionGroups;return(0,x.BX)(D,{isOpen:o,children:[(0,x.tZ)(F,S(S({},t),{},{ref:this.input,autoComplete:"off",className:"form-control",value:this.state.query,onClick:this.handleClick,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown})),(0,x.tZ)(L,{isOpen:o,optionGroups:s,handleSelect:this.handleSelect})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return w()(t.rawOptions,e.options)?S({},t):S(S({},t),{},{rawOptions:e.options,dropdownOptionGroups:N(e.options,t.partialTerm),activeSelection:-1})}}]),m}(p.PureComponent);E.displayName="ArithmeticInput",(0,d.Z)(E,"defaultProps",{options:[]});var D=(0,c.Z)("div",{target:"e18r1b6w8"})("border:1px solid ",(function(e){return e.theme.border}),";box-shadow:inset ",(function(e){return e.theme.dropShadowLight}),";background:",(function(e){return e.theme.background}),";position:relative;border-radius:",(function(e){return e.isOpen?"".concat(e.theme.borderRadius," ").concat(e.theme.borderRadius," 0 0"):e.theme.borderRadius}),";.show-sidebar &{background:",(function(e){return e.theme.backgroundSecondary}),";}"),F=(0,c.Z)(y.Z,{target:"e18r1b6w7"})({name:"pv1u47",styles:"height:40px;padding:7px 10px;border:0;box-shadow:none;&:hover,&:focus{border:0;box-shadow:none;}"});function L(e){var t=e.isOpen,r=e.optionGroups,n=e.handleSelect;return(0,x.tZ)(V,{isOpen:t,children:(0,x.tZ)(I,{children:r.map((function(e){var t=e.title,r=e.options;return(0,x.BX)(p.Fragment,{children:[(0,x.tZ)(B,{children:(0,x.tZ)(U,{children:t})}),r.map((function(e){return(0,x.tZ)(q,{className:e.active?"active":void 0,onClick:function(){return n(e)},onMouseDown:function(e){return e.preventDefault()},ref:function(t){var r;return e.active&&(null==t||null===(r=t.scrollIntoView)||void 0===r?void 0:r.call(t,{block:"nearest"}))},children:(0,x.tZ)(z,{children:e.value})},e.value)})),0===r.length&&(0,x.tZ)(M,{children:(0,g.t)("No items found")})]},t)}))})})}function R(e,t){return{title:"Fields",options:e.filter((function(e){return"equation"!==e.kind})).filter((function(e){var t=(0,k.T$)(e);return"number"===t||"integer"===t||"duration"===t})).map((function(e){return{kind:"field",active:!1,value:(0,k.sN)(e)}})).filter((function(e){var r=e.value;return!t||r.includes(t)}))}}function A(e){return{title:"Operators",options:["+","-","*","/"].filter((function(t){return!e||t.includes(e)})).map((function(e){return{kind:"operator",active:!1,value:e}}))}}function N(e,t){return[R(e,t),A(t)]}L.displayName="TermDropdown";var V=(0,c.Z)("div",{target:"e18r1b6w6"})("display:",(function(e){return e.isOpen?"block":"none"}),";position:absolute;top:100%;left:-1px;right:-1px;z-index:",(function(e){return e.theme.zIndex.dropdown}),";background:",(function(e){return e.theme.background}),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadiusBottom}),";max-height:300px;overflow-y:auto;"),I=(0,c.Z)("ul",{target:"e18r1b6w5"})({name:"nfj5ll",styles:"padding-left:0;list-style:none;margin-bottom:0"}),B=(0,c.Z)("li",{target:"e18r1b6w4"})("&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),U=(0,c.Z)("header",{target:"e18r1b6w3"})("display:flex;align-items:center;background-color:",(function(e){return e.theme.backgroundSecondary}),";color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";&>svg{margin-right:",(0,v.Z)(1),";}"),q=(0,c.Z)(B,{target:"e18r1b6w2"})("scroll-margin:40px 0;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";cursor:pointer;&:hover,&.active{background:",(function(e){return e.theme.focus}),";}"),z=(0,c.Z)("div",{target:"e18r1b6w1"})("color:",(function(e){return e.theme.textColor}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;line-height:",(function(e){return e.theme.text.lineHeightHeading}),";",_.Z,";"),M=(0,c.Z)("div",{target:"e18r1b6w0"})("display:flex;padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.gray300}),";&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),G=r("./app/views/eventsV2/table/types.tsx"),Q=["label","data"],K=["data"],W=["onUpdate"];function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var J=function(e){(0,i.Z)(r,e);var t=H(r);function r(){var e;(0,o.Z)(this,r);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),(0,d.Z)((0,a.Z)(e),"handleFieldChange",(function(t){if(t){var r=t.value,n=e.props.fieldValue,o=h()(e.props.fieldValue);switch(r.kind){case G.L.TAG:case G.L.MEASUREMENT:case G.L.BREAKDOWN:case G.L.FIELD:o={kind:"field",field:r.meta.name};break;case G.L.FUNCTION:"field"===n.kind?o={kind:"function",function:[r.meta.name,"",void 0,void 0]}:"function"===n.kind&&(o={kind:"function",function:[r.meta.name,n.function[1],n.function[2],n.function[3]]});break;default:throw new Error("Invalid field type found in column picker")}r.kind===G.L.FUNCTION&&(r.meta.parameters.forEach((function(t,r){if("function"===o.kind)if("column"===t.kind){var n=e.getFieldOrTagOrMeasurementValue(o.function[r+1]);null===n?o.function[r+1]=t.defaultValue||"":n.kind!==G.L.FIELD&&n.kind!==G.L.TAG&&n.kind!==G.L.MEASUREMENT&&n.kind!==G.L.BREAKDOWN||!Y(t.columnTypes,n)?(o.function[r+1]=t.defaultValue||"",o.function[r+2]=void 0):o.function[r+1]=n.meta.name}else o.function[r+1]=t.defaultValue||""})),"function"===o.kind&&(0===r.meta.parameters.length?o.function=[o.function[0],"",void 0,void 0]:1===r.meta.parameters.length&&(o.function[2]=void 0))),e.triggerChange(o)}})),(0,d.Z)((0,a.Z)(e),"handleEquationChange",(function(t){var r=h()(e.props.fieldValue);r.kind===G.L.EQUATION&&(r.field=t),e.triggerChange(r)})),(0,d.Z)((0,a.Z)(e),"handleFieldParameterChange",(function(t){var r=t.value,n=h()(e.props.fieldValue);"function"===n.kind&&(n.function[1]=r.meta.name),e.triggerChange(n)})),(0,d.Z)((0,a.Z)(e),"handleDropdownParameterChange",(function(t){return function(r){var n=h()(e.props.fieldValue);"function"===n.kind&&(n.function[t]=r.value),e.triggerChange(n)}})),(0,d.Z)((0,a.Z)(e),"handleScalarParameterChange",(function(t){return function(r){var n=h()(e.props.fieldValue);"function"===n.kind&&(n.function[t]=r),e.triggerChange(n)}})),e}return(0,s.Z)(r,[{key:"triggerChange",value:function(e){this.props.onChange(e)}},{key:"getFieldOrTagOrMeasurementValue",value:function(e){var t=this.props.fieldOptions;if(void 0===e)return null;var r="field:".concat(e);if(t[r])return t[r].value;var n="measurement:".concat(e);if(t[n])return t[n].value;var o="span_op_breakdown:".concat(e);if(t[o])return t[o].value;var s=0===e.indexOf("tags[")?"tag:".concat(e.replace(/tags\[(.*?)\]/,"$1")):"tag:".concat(e);return t[s]?t[s].value:e.length>0?{kind:G.L.TAG,meta:{name:e,dataType:"string",unknown:!0}}:null}},{key:"getFieldData",value:function(){var e=this,t=null,r=this.props.fieldValue,n=this.props.fieldOptions;if("function"===r.kind){var o="function:".concat(r.function[0]);void 0!==n[o]&&(t=n[o].value)}"field"===r.kind&&(t=this.getFieldOrTagOrMeasurementValue(r.field),n=this.appendFieldIfUnknown(n,t));var s=[];return t&&t.kind===G.L.FUNCTION&&t.meta.parameters.length>0&&r.kind===G.L.FUNCTION&&(s=t.meta.parameters.map((function(t,o){if("column"===t.kind){var s=e.getFieldOrTagOrMeasurementValue(r.function[1]);return n=e.appendFieldIfUnknown(n,s),{kind:"column",value:s,required:t.required,options:Object.values(n).filter((function(e){var r=e.value;return(r.kind===G.L.FIELD||r.kind===G.L.TAG||r.kind===G.L.MEASUREMENT||r.kind===G.L.BREAKDOWN)&&Y(t.columnTypes,r)}))}}return"dropdown"===t.kind?{kind:"dropdown",options:t.options,dataType:t.dataType,required:t.required,value:"function"===r.kind&&r.function[o+1]||t.defaultValue||""}:{kind:"value",value:"function"===r.kind&&r.function[o+1]||t.defaultValue||"",dataType:t.dataType,required:t.required,placeholder:t.placeholder}}))),{field:t,fieldOptions:n,parameterDescriptions:s}}},{key:"appendFieldIfUnknown",value:function(e,t){return t?(t&&t.kind===G.L.TAG&&t.meta.unknown&&((e=Object.assign({},e))[t.meta.name]={label:t.meta.name,value:t}),e):e}},{key:"renderParameterInputs",value:function(e){var t=this,r=this.props,n=r.disabled,o=r.inFieldLabels,s=r.filterAggregateParameters,a=r.hideParameterSelector,i=e.map((function(e,r){if("column"===e.kind&&e.options.length>0){if(a)return null;var i=s?e.options.filter(s):e.options;return(0,x.tZ)(j.Z,{name:"parameter",placeholder:(0,g.t)("Select value"),options:i,value:e.value,required:e.required,onChange:t.handleFieldParameterChange,inFieldLabel:o?(0,g.t)("Parameter: "):void 0,disabled:n},"select")}if("value"===e.kind){var u={required:e.required,value:e.value,onUpdate:t.handleScalarParameterChange(r+1),placeholder:e.placeholder,disabled:n};switch(e.dataType){case"number":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*(\\.[0-9]*)?"},u),"parameter:number");case"integer":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*"},u),"parameter:integer");default:return(0,x.tZ)(te,$({name:"refinement",type:"text"},u),"parameter:text")}}if("dropdown"===e.kind)return(0,x.tZ)(j.Z,{name:"dropdown",placeholder:(0,g.t)("Select value"),options:e.options,value:e.value,required:e.required,onChange:t.handleDropdownParameterChange(r+1),inFieldLabel:o?(0,g.t)("Parameter: "):void 0,disabled:n});throw new Error("Unknown parameter type encountered for ".concat(t.props.fieldValue))})),u=this.props.gridColumns,l=(null!=u?u:i.length+1)-i.length-1;if(void 0!==u&&l>0)for(var d=0;d<l;d++)i.push((0,x.tZ)(ne,{},d));return i}},{key:"renderTag",value:function(e){var t,r;if(!1===this.props.shouldRenderTag)return null;switch(e){case G.L.FUNCTION:t="f(x)",r="success";break;case G.L.MEASUREMENT:t="measure",r="info";break;case G.L.BREAKDOWN:t="breakdown",r="error";break;case G.L.TAG:t=e,r="warning";break;case G.L.FIELD:t=e,r="highlight";break;default:t=e}return(0,x.tZ)(b.Z,{type:r,children:t})}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,o=t.takeFocus,s=t.filterPrimaryOptions,a=t.fieldValue,i=t.inFieldLabels,u=t.disabled,l=t.hidePrimarySelector,d=t.gridColumns,c=t.otherColumns,p=this.getFieldData(),f=p.field,h=p.fieldOptions,b=p.parameterDescriptions,v=s?Object.values(h).filter(s):Object.values(h),y={name:"field",options:Object.values(v),placeholder:(0,g.t)("(Required)"),value:f,onChange:this.handleFieldChange,inFieldLabel:i?(0,g.t)("Function: "):void 0,disabled:u};o&&null===f&&(y.autoFocus=!0);var Z={singleValue:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"calc(100% - 10px)"})},option:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"})}},O=this.renderParameterInputs(b);if(a.kind===G.L.EQUATION)return(0,x.tZ)(ee,{className:r,gridColumns:1,tripleLayout:!1,children:(0,x.tZ)(E,{name:"arithmetic",type:"text",required:!0,value:a.field,onUpdate:this.handleEquationChange,options:c},"parameter:text")});var w=O.length>2?2:d||O.length+1;return(0,x.BX)(ee,{className:r,gridColumns:w,tripleLayout:3===d&&O.length>2,children:[!l&&(0,x.tZ)(j.Z,$($({},y),{},{styles:i?void 0:Z,components:{Option:function(t){var r=t.label,o=t.data,s=(0,n.Z)(t,Q);return(0,x.BX)(m.y.Option,$($({label:r,data:o},s),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:r}),e.renderTag(o.value.kind)]}))},SingleValue:function(t){var r=t.data,o=(0,n.Z)(t,K);return(0,x.BX)(m.y.SingleValue,$($({data:r},o),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:r.label}),e.renderTag(r.value.kind)]}))}}})),O]})}}]),r}(p.Component);function Y(e,t){return"function"==typeof e?e({name:t.meta.name,dataType:t.meta.dataType}):e.includes(t.meta.dataType)}J.displayName="QueryField";var ee=(0,c.Z)("div",{target:"eve9joo2"})("display:grid;",(function(e){return e.tripleLayout?"grid-template-columns: 1fr 2fr;":"grid-template-columns: repeat(".concat(e.gridColumns,", 1fr);")})," grid-column-gap:",(0,v.Z)(1),";align-items:center;flex-grow:1;"),te=function(e){(0,i.Z)(r,e);var t=H(r);function r(e){var n;return(0,o.Z)(this,r),n=t.call(this,e),(0,d.Z)((0,a.Z)(n),"state",{value:n.props.value}),(0,d.Z)((0,a.Z)(n),"input",void 0),(0,d.Z)((0,a.Z)(n),"handleBlur",(function(){n.isValid?n.props.onUpdate(n.state.value):n.setState({value:n.props.value})})),(0,d.Z)((0,a.Z)(n),"handleChange",(function(e){n.isValid&&n.setState({value:e.target.value})})),n.input=p.createRef(),n}return(0,s.Z)(r,[{key:"isValid",get:function(){return!this.input.current||this.input.current.validity.valid}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,(0,n.Z)(e,W));return(0,x.tZ)(re,$($({},t),{},{ref:this.input,className:"form-control",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur}))}}]),r}(p.Component);te.displayName="BufferedInput";var re=(0,c.Z)(y.Z,{target:"eve9joo1"})({name:"9dgk9j",styles:"height:41px;min-width:50px"}),ne=(0,c.Z)("div",{target:"eve9joo0"})("height:41px;min-width:50px;background:",(function(e){return e.theme.backgroundSecondary}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:flex;align-items:center;justify-content:center;&:after{font-size:",(function(e){return e.theme.fontSizeMedium}),";content:'",(0,g.t)("No parameter"),"';color:",(function(e){return e.theme.gray300}),";}")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx.5594d9c95be974ca54f3024c62546612.js.map