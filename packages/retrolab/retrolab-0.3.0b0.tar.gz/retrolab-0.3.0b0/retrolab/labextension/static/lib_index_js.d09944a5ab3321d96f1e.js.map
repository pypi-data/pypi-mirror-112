{"version":3,"sources":["webpack://@retrolab/lab-extension/./lib/index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACoD;AACkB;AACnB;AACF;AACK;AACE;AACD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+DAAa;AACxC;AACA,kBAAkB,iEAAY;AAC9B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kEAAgB,EAAE,iEAAe,EAAE,2DAAS,EAAE,8DAAS;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,+BAA+B;AAC9C,wBAAwB,wEAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC,+BAA+B,QAAQ,kBAAkB,aAAa;AACtE,aAAa;AACb;AACA,SAAS;AACT;AACA,6BAA6B,mDAAmD;AAChF;AACA;AACA,qCAAqC,gCAAgC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gEAAW;AAC1B,eAAe,2DAAS,EAAE,iEAAe;AACzC;AACA,eAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA,4BAA4B,wEAAqB;AACjD;AACA,SAAS;AACT;AACA;AACA,gCAAgC,sCAAsC;AACtE;AACA;AACA,6BAA6B,gDAAgD;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,OAAO,EAAC","file":"lib_index_js.d09944a5ab3321d96f1e.js","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { ILabShell } from '@jupyterlab/application';\nimport { ICommandPalette, ToolbarButton } from '@jupyterlab/apputils';\nimport { PageConfig } from '@jupyterlab/coreutils';\nimport { IMainMenu } from '@jupyterlab/mainmenu';\nimport { ITranslator } from '@jupyterlab/translation';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { retroSunIcon } from '@retrolab/ui-components';\n/**\n * The command IDs used by the application plugin.\n */\nvar CommandIDs;\n(function (CommandIDs) {\n    /**\n     * Toggle Top Bar visibility\n     */\n    CommandIDs.openRetro = 'retrolab:open';\n    CommandIDs.launchRetroTree = 'retrolab:launchtree';\n})(CommandIDs || (CommandIDs = {}));\n/**\n * A notebook widget extension that adds a retrolab button to the toolbar.\n */\nclass RetroButton {\n    /**\n     * Instantiate a new RetroButton.\n     * @param commands The command registry.\n     */\n    constructor(commands) {\n        this._commands = commands;\n    }\n    /**\n     * Create a new extension object.\n     */\n    createNew(panel) {\n        const button = new ToolbarButton({\n            tooltip: 'Open with RetroLab',\n            icon: retroSunIcon,\n            onClick: () => {\n                this._commands.execute(CommandIDs.openRetro);\n            }\n        });\n        panel.toolbar.insertAfter('cellType', 'retro', button);\n        return button;\n    }\n}\n/**\n * A plugin for the checkpoint indicator\n */\nconst openRetro = {\n    id: '@retrolab/lab-extension:open-retro',\n    autoStart: true,\n    optional: [INotebookTracker, ICommandPalette, IMainMenu, ILabShell],\n    activate: (app, notebookTracker, palette, menu, labShell) => {\n        // TODO: do not activate if already in a IRetroShell?\n        if (!notebookTracker || !labShell) {\n            // to prevent showing the toolbar button in RetroLab\n            return;\n        }\n        const { commands, docRegistry, shell } = app;\n        const baseUrl = PageConfig.getBaseUrl();\n        const isEnabled = () => {\n            return (notebookTracker.currentWidget !== null &&\n                notebookTracker.currentWidget === shell.currentWidget);\n        };\n        commands.addCommand(CommandIDs.openRetro, {\n            label: 'Open in RetroLab',\n            execute: () => {\n                const current = notebookTracker.currentWidget;\n                if (!current) {\n                    return;\n                }\n                const { context } = current;\n                window.open(`${baseUrl}retro/notebooks/${context.path}`);\n            },\n            isEnabled\n        });\n        if (palette) {\n            palette.addItem({ command: CommandIDs.openRetro, category: 'Other' });\n        }\n        if (menu) {\n            menu.viewMenu.addGroup([{ command: CommandIDs.openRetro }], 1);\n        }\n        const retroButton = new RetroButton(commands);\n        docRegistry.addWidgetExtension('Notebook', retroButton);\n    }\n};\n/**\n * A plugin to add a command to open the RetroLab Tree.\n */\nconst launchRetroTree = {\n    id: '@retrolab/lab-extension:launch-retrotree',\n    autoStart: true,\n    requires: [ITranslator],\n    optional: [IMainMenu, ICommandPalette],\n    activate: (app, translator, menu, palette) => {\n        const { commands } = app;\n        const trans = translator.load('jupyterlab');\n        const category = trans.__('Help');\n        commands.addCommand(CommandIDs.launchRetroTree, {\n            label: trans.__('Launch RetroLab File Browser'),\n            execute: () => {\n                window.open(PageConfig.getBaseUrl() + 'retro/tree');\n            }\n        });\n        if (menu) {\n            const helpMenu = menu.helpMenu;\n            helpMenu.addGroup([{ command: CommandIDs.launchRetroTree }], 1);\n        }\n        if (palette) {\n            palette.addItem({ command: CommandIDs.launchRetroTree, category });\n        }\n    }\n};\n/**\n * Export the plugins as default.\n */\nconst plugins = [launchRetroTree, openRetro];\nexport default plugins;\n"],"sourceRoot":""}