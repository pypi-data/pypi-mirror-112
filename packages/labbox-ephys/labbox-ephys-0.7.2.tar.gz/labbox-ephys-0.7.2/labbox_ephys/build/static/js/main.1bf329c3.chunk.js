(this["webpackJsonplabbox-ephys"]=this["webpackJsonplabbox-ephys"]||[]).push([[6],{34:function(e){e.exports=JSON.parse('{"webSocketPort":15308,"httpPort":15309}')},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if(!e)return{feedUri:void 0,feedId:void 0};if(!e.startsWith("workspace://"))return{feedUri:void 0,feedId:void 0};var t=e.split("?")[0].split("/")[2]||void 0;return t?{feedId:t,feedUri:"feed://".concat(t)}:{feedUri:void 0,feedId:void 0}}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(22),c=n(10),a=n(2),i=function(e,t){if("SET_CURATION"===t.type)return t.curation;if("ADD_UNIT_LABEL"===t.type){var n=t.unitId+"",i=(e.labelsByUnit||{})[n]||[];return i.includes(t.label)?e:Object(a.a)(Object(a.a)({},e),{},{labelsByUnit:Object(a.a)(Object(a.a)({},e.labelsByUnit),{},Object(r.a)({},n,[].concat(Object(c.a)(i),[t.label]).sort()))})}if("REMOVE_UNIT_LABEL"===t.type){var o=t.unitId+"",s=(e.labelsByUnit||{})[o]||[];return s.includes(t.label)?Object(a.a)(Object(a.a)({},e),{},{labelsByUnit:Object(a.a)(Object(a.a)({},e.labelsByUnit),{},Object(r.a)({},o,s.filter((function(e){return e!==t.label}))))}):e}return"MERGE_UNITS"===t.type?Object(a.a)(Object(a.a)({},e),{},{mergeGroups:u([].concat(Object(c.a)(e.mergeGroups||[]),[t.unitIds]))}):"UNMERGE_UNITS"===t.type?Object(a.a)(Object(a.a)({},e),{},{mergeGroups:u((e.mergeGroups||[]).map((function(e){return e.filter((function(e){return!t.unitIds.includes(e)}))})))}):e},o=function(e,t){return e.filter((function(e){return t.includes(e)}))},s=function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t.filter((function(t){return!e.includes(t)})))).sort()},u=function(e){for(var t=e.map((function(e){return Object(c.a)(e)})),n=!0;n;){n=!1;for(var r=0;r<t.length;r++)for(var a=t[r],i=r+1;i<t.length;i++){var u=t[i];o(a,u).length>0&&(t[r]=s(a,u),t[i]=[],n=!0)}}return t.filter((function(e){return e.length>=2}))};t.a=function(e,t){switch(t.type){case"ADD_RECORDING":return Object(a.a)(Object(a.a)({},e),{},{recordings:[].concat(Object(c.a)(e.recordings.filter((function(e){return e.recordingId!==t.recording.recordingId}))),[t.recording])});case"DELETE_RECORDINGS":return Object(a.a)(Object(a.a)({},e),{},{recordings:e.recordings.filter((function(e){return!t.recordingIds.includes(e.recordingId)}))});case"ADD_SORTING":return Object(a.a)(Object(a.a)({},e),{},{sortings:[].concat(Object(c.a)(e.sortings.filter((function(e){return e.sortingId!==t.sorting.sortingId}))),[t.sorting])});case"DELETE_SORTINGS":return Object(a.a)(Object(a.a)({},e),{},{sortings:e.sortings.filter((function(e){return!t.sortingIds.includes(e.sortingId)}))});case"DELETE_SORTINGS_FOR_RECORDINGS":return Object(a.a)(Object(a.a)({},e),{},{sortings:e.sortings.filter((function(e){return!t.recordingIds.includes(e.recordingId)}))});case"SET_UNIT_METRICS_FOR_SORTING":return Object(a.a)(Object(a.a)({},e),{},{sortings:e.sortings.map((function(e){return e.sortingId===t.unitMetricsForSorting.sortingId?Object(a.a)(Object(a.a)({},e),{},{unitMetricsUri:t.unitMetricsForSorting.metricsUri}):e}))});default:return e}}},92:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(13),c=n(18),a=n(0),i=n(40),o=n.n(i),s=n(36),u=n(9),d=n(2),l=n(110),b=n(31),g=n.n(b),p=n(4),f=(n(92),n(61)),h=n(62),O=function(e){var t=Object.keys(e);return 0===t.length?"":"?"+t.map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},j=n(109),m=n(33),w=n(107),v={palette:{primary:j.a,secondary:m.a},overrides:{MuiAccordionSummary:{root:{"&$expanded":{minHeight:0,maxHeight:30,paddingTop:10},minHeight:0}},MuiToolbar:{regular:{minHeight:48,"@media(min-width:600px)":{minHeight:48}}},MuiTabs:{root:{minHeight:30,maxHeight:30}},MuiTab:{root:{minHeight:30,maxHeight:30,padding:"6px 0px"}}}},I=Object(w.a)(v);var U=function(e){var t=e.version,n=Object(c.g)().filter((function(e){return"MainWindow"===e.name}))[0],i=Object(a.useContext)(c.c).serverInfo,o=Object(p.e)(),s=Object(p.d)(),b=Object(a.useMemo)((function(){var e=g.a.parse(o.search.slice(1)).workspace||"default",t=null===i||void 0===i?void 0:i.defaultFeedId;return e.startsWith("workspace://")?e:t?"workspace://".concat(t,"/").concat(e):void 0}),[o.search,i]),j=Object(a.useMemo)((function(){return function(e,t){var n=e.pathname.split("/"),r=g.a.parse(e.search.slice(1)).workspace||"default",c=null===t||void 0===t?void 0:t.defaultFeedId,a=r.startsWith("workspace://")?r:c?"workspace://".concat(c,"/").concat(r):void 0,i=n[1]||"recordings";if(!["recordings","recording","sorting"].includes(i))throw Error("Invalid page: ".concat(i));switch(i){case"recordings":return{workspaceUri:a,page:i};case"recording":return{workspaceUri:a,page:i,recordingId:n[2]};case"sorting":return{workspaceUri:a,page:i,recordingId:n[2]||"",sortingId:n[3]||""};default:return{workspaceUri:a,page:"recordings"}}}(o,i)}),[o,i]),m=Object(a.useCallback)((function(e){var t=function(e){var t={};switch(e.workspaceUri&&(t.workspace=e.workspaceUri),e.page){case"recordings":return{pathname:"/",search:O(t)};case"recording":return{pathname:"/recording/".concat(e.recordingId),search:O(t)};case"sorting":return{pathname:"/sorting/".concat(e.recordingId,"/").concat(e.sortingId),search:O(t)}}}(function(e,t){var n=e;switch(t.type){case"gotoRecordingsPage":n={page:"recordings",workspaceUri:e.workspaceUri};break;case"gotoRecordingPage":n={page:"recording",recordingId:t.recordingId,workspaceUri:e.workspaceUri};break;case"gotoSortingPage":n={page:"sorting",recordingId:t.recordingId,sortingId:t.sortingId,workspaceUri:e.workspaceUri}}return n}(j,e));o.pathname===t.pathname&&o.search===t.search||s.push(Object(d.a)(Object(d.a)({},o),t))}),[j,s,o]),w=Object(a.useReducer)(h.a,Object(a.useMemo)((function(){return{recordings:[],sortings:[]}}),[])),v=Object(u.a)(w,2),U=v[0],k=v[1],x=Object(a.useCallback)((function(e){e.filter((function(e){return e.action})).forEach((function(e){return k(e.action)}))}),[]),E=Object(f.a)(b).feedUri,S=Object(c.h)({feedUri:E,subfeedName:"main",onMessages:x}).appendMessages,R=Object(a.useCallback)((function(e){S([{action:e}])}),[S]);return Object(r.jsx)(l.a,{theme:I,children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:n?Object(r.jsx)(n.component,Object(d.a)({},{workspace:U,workspaceDispatch:R,workspaceRoute:j,workspaceRouteDispatch:m,version:t})):Object(r.jsx)("div",{children:"No main window plugin"})})})})},k=n(34),x=(n(97),n(3)),E=n.n(x),S=n(39),R=function(){var e=Object(S.a)(E.a.mark((function e(t){var r,c,a,i,o,s,u,d,l,b,g,p,f;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(1),n.e(17),n.e(23)]).then(n.bind(null,720));case 2:return r=e.sent,(0,r.activate)(t),e.next=7,Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(8)]).then(n.bind(null,719));case 7:return c=e.sent,(0,c.activate)(t),e.next=12,Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(13)]).then(n.bind(null,717));case 12:return a=e.sent,(0,a.activate)(t),e.next=17,Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(15)]).then(n.bind(null,726));case 17:return i=e.sent,(0,i.activate)(t),e.next=22,Promise.all([n.e(0),n.e(1),n.e(3),n.e(24),n.e(21)]).then(n.bind(null,724));case 22:return o=e.sent,(0,o.activate)(t),e.next=27,Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(11)]).then(n.bind(null,715));case 27:return s=e.sent,(0,s.activate)(t),e.next=32,Promise.all([n.e(0),n.e(3),n.e(5),n.e(19)]).then(n.bind(null,713));case 32:return u=e.sent,(0,u.activate)(t),e.next=37,Promise.all([n.e(0),n.e(3),n.e(2),n.e(5),n.e(20)]).then(n.bind(null,727));case 37:return d=e.sent,(0,d.activate)(t),e.next=42,Promise.all([n.e(0),n.e(9),n.e(25)]).then(n.bind(null,729));case 42:return l=e.sent,(0,l.activate)(t),e.next=47,Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(14)]).then(n.bind(null,722));case 47:return b=e.sent,(0,b.activate)(t),e.next=52,Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(12)]).then(n.bind(null,723));case 52:return g=e.sent,(0,g.activate)(t),e.next=57,Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(16)]).then(n.bind(null,728));case 57:return p=e.sent,(0,p.activate)(t),e.next=62,Promise.all([n.e(0),n.e(1),n.e(4),n.e(18),n.e(22)]).then(n.bind(null,721));case 62:f=e.sent,(0,f.activate)(t);case 65:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){e&&e instanceof Function&&n.e(26).then(n.bind(null,714)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},y="labbox-ephys.flatironinstitute.org"===window.location.hostname?{webSocketUrl:"ws://".concat(window.location.hostname,"/ws"),baseSha1Url:"http://".concat(window.location.hostname,"/api/sha1"),baseFeedUrl:"http://".concat(window.location.hostname,"/api/feed")}:{webSocketUrl:"ws://".concat(window.location.hostname,":").concat(k.webSocketPort),baseSha1Url:"http://".concat(window.location.hostname,":").concat(k.httpPort,"/sha1"),baseFeedUrl:"http://".concat(window.location.hostname,":").concat(k.httpPort,"/feed")},T=Object(c.e)();R(T).then((function(){o.a.render(Object(r.jsx)(c.b,{extensionContext:T,apiConfig:y,children:Object(r.jsx)(s.a,{children:Object(r.jsx)(U,{version:"0.7.2"})})}),document.getElementById("root"))})),P()}},[[98,7,10]]]);
//# sourceMappingURL=main.1bf329c3.chunk.js.map